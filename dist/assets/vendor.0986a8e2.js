var H={exports:{}},te={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var GT=Object.getOwnPropertySymbols,e$=Object.prototype.hasOwnProperty,t$=Object.prototype.propertyIsEnumerable;function n$(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r$(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var rA=r$()?Object.assign:function(t,e){for(var n,r=n$(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)e$.call(n,o)&&(r[o]=n[o]);if(GT){i=GT(n);for(var a=0;a<i.length;a++)t$.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw=rA,_l=60103,iA=60106;te.Fragment=60107;te.StrictMode=60108;te.Profiler=60114;var sA=60109,oA=60110,aA=60112;te.Suspense=60113;var lA=60115,uA=60116;if(typeof Symbol=="function"&&Symbol.for){var tr=Symbol.for;_l=tr("react.element"),iA=tr("react.portal"),te.Fragment=tr("react.fragment"),te.StrictMode=tr("react.strict_mode"),te.Profiler=tr("react.profiler"),sA=tr("react.provider"),oA=tr("react.context"),aA=tr("react.forward_ref"),te.Suspense=tr("react.suspense"),lA=tr("react.memo"),uA=tr("react.lazy")}var QT=typeof Symbol=="function"&&Symbol.iterator;function i$(t){return t===null||typeof t!="object"?null:(t=QT&&t[QT]||t["@@iterator"],typeof t=="function"?t:null)}function rh(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hA={};function vl(t,e,n){this.props=t,this.context=e,this.refs=hA,this.updater=n||cA}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(rh(85));this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dA(){}dA.prototype=vl.prototype;function Nw(t,e,n){this.props=t,this.context=e,this.refs=hA,this.updater=n||cA}var Pw=Nw.prototype=new dA;Pw.constructor=Nw;Rw(Pw,vl.prototype);Pw.isPureReactComponent=!0;var Ow={current:null},fA=Object.prototype.hasOwnProperty,pA={key:!0,ref:!0,__self:!0,__source:!0};function gA(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fA.call(e,r)&&!pA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_l,type:t,key:s,ref:o,props:i,_owner:Ow.current}}function s$(t,e){return{$$typeof:_l,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xw(t){return typeof t=="object"&&t!==null&&t.$$typeof===_l}function o$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var YT=/\/+/g;function Jm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?o$(""+t.key):e.toString(36)}function Bd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _l:case iA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Jm(o,0):r,Array.isArray(i)?(n="",t!=null&&(n=t.replace(YT,"$&/")+"/"),Bd(i,e,n,"",function(u){return u})):i!=null&&(xw(i)&&(i=s$(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(YT,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Array.isArray(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Jm(s,a);o+=Bd(s,e,n,l,i)}else if(l=i$(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Jm(s,a++),o+=Bd(s,e,n,l,i);else if(s==="object")throw e=""+t,Error(rh(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function ad(t,e,n){if(t==null)return t;var r=[],i=0;return Bd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function a$(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var mA={current:null};function gi(){var t=mA.current;if(t===null)throw Error(rh(321));return t}var l$={ReactCurrentDispatcher:mA,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Ow,IsSomeRendererActing:{current:!1},assign:Rw};te.Children={map:ad,forEach:function(t,e,n){ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!xw(t))throw Error(rh(143));return t}};te.Component=vl;te.PureComponent=Nw;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l$;te.cloneElement=function(t,e,n){if(t==null)throw Error(rh(267,t));var r=Rw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ow.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fA.call(e,l)&&!pA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:_l,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:oA,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:sA,_context:t},t.Consumer=t};te.createElement=gA;te.createFactory=function(t){var e=gA.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:aA,render:t}};te.isValidElement=xw;te.lazy=function(t){return{$$typeof:uA,_payload:{_status:-1,_result:t},_init:a$}};te.memo=function(t,e){return{$$typeof:lA,type:t,compare:e===void 0?null:e}};te.useCallback=function(t,e){return gi().useCallback(t,e)};te.useContext=function(t,e){return gi().useContext(t,e)};te.useDebugValue=function(){};te.useEffect=function(t,e){return gi().useEffect(t,e)};te.useImperativeHandle=function(t,e,n){return gi().useImperativeHandle(t,e,n)};te.useLayoutEffect=function(t,e){return gi().useLayoutEffect(t,e)};te.useMemo=function(t,e){return gi().useMemo(t,e)};te.useReducer=function(t,e,n){return gi().useReducer(t,e,n)};te.useRef=function(t){return gi().useRef(t)};te.useState=function(t){return gi().useState(t)};te.version="17.0.2";H.exports=te;var yA=H.exports,Dw={exports:{}},Zn={},_A={exports:{}},vA={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,u=null,c=function(){if(l!==null)try{var P=t.unstable_now();l(!0,P),l=null}catch(z){throw setTimeout(c,0),z}};e=function(P){l!==null?setTimeout(e,0,P):(l=P,setTimeout(c,0))},n=function(P,z){u=setTimeout(P,z)},r=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if(typeof console!="undefined"){var f=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof f!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,_=null,p=-1,g=5,y=0;t.unstable_shouldYield=function(){return t.unstable_now()>=y},i=function(){},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<P?Math.floor(1e3/P):5};var v=new MessageChannel,w=v.port2;v.port1.onmessage=function(){if(_!==null){var P=t.unstable_now();y=P+g;try{_(!0,P)?w.postMessage(null):(m=!1,_=null)}catch(z){throw w.postMessage(null),z}}else m=!1},e=function(P){_=P,m||(m=!0,w.postMessage(null))},n=function(P,z){p=h(function(){P(t.unstable_now())},z)},r=function(){d(p),p=-1}}function O(P,z){var J=P.length;P.push(z);e:for(;;){var xe=J-1>>>1,_t=P[xe];if(_t!==void 0&&0<U(_t,z))P[xe]=z,P[J]=_t,J=xe;else break e}}function A(P){return P=P[0],P===void 0?null:P}function $(P){var z=P[0];if(z!==void 0){var J=P.pop();if(J!==z){P[0]=J;e:for(var xe=0,_t=P.length;xe<_t;){var Ss=2*(xe+1)-1,bs=P[Ss],Ql=Ss+1,Yo=P[Ql];if(bs!==void 0&&0>U(bs,J))Yo!==void 0&&0>U(Yo,bs)?(P[xe]=Yo,P[Ql]=J,xe=Ql):(P[xe]=bs,P[Ss]=J,xe=Ss);else if(Yo!==void 0&&0>U(Yo,J))P[xe]=Yo,P[Ql]=J,xe=Ql;else break e}}return z}return null}function U(P,z){var J=P.sortIndex-z.sortIndex;return J!==0?J:P.id-z.id}var L=[],je=[],Gm=1,Ln=null,Dt=3,od=!1,Ts=!1,Gl=!1;function Qm(P){for(var z=A(je);z!==null;){if(z.callback===null)$(je);else if(z.startTime<=P)$(je),z.sortIndex=z.expirationTime,O(L,z);else break;z=A(je)}}function Ym(P){if(Gl=!1,Qm(P),!Ts)if(A(L)!==null)Ts=!0,e(Xm);else{var z=A(je);z!==null&&n(Ym,z.startTime-P)}}function Xm(P,z){Ts=!1,Gl&&(Gl=!1,r()),od=!0;var J=Dt;try{for(Qm(z),Ln=A(L);Ln!==null&&(!(Ln.expirationTime>z)||P&&!t.unstable_shouldYield());){var xe=Ln.callback;if(typeof xe=="function"){Ln.callback=null,Dt=Ln.priorityLevel;var _t=xe(Ln.expirationTime<=z);z=t.unstable_now(),typeof _t=="function"?Ln.callback=_t:Ln===A(L)&&$(L),Qm(z)}else $(L);Ln=A(L)}if(Ln!==null)var Ss=!0;else{var bs=A(je);bs!==null&&n(Ym,bs.startTime-z),Ss=!1}return Ss}finally{Ln=null,Dt=J,od=!1}}var ZF=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){Ts||od||(Ts=!0,e(Xm))},t.unstable_getCurrentPriorityLevel=function(){return Dt},t.unstable_getFirstCallbackNode=function(){return A(L)},t.unstable_next=function(P){switch(Dt){case 1:case 2:case 3:var z=3;break;default:z=Dt}var J=Dt;Dt=z;try{return P()}finally{Dt=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=ZF,t.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var J=Dt;Dt=P;try{return z()}finally{Dt=J}},t.unstable_scheduleCallback=function(P,z,J){var xe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?xe+J:xe):J=xe,P){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=J+_t,P={id:Gm++,callback:z,priorityLevel:P,startTime:J,expirationTime:_t,sortIndex:-1},J>xe?(P.sortIndex=J,O(je,P),A(L)===null&&P===A(je)&&(Gl?r():Gl=!0,n(Ym,J-xe))):(P.sortIndex=_t,O(L,P),Ts||od||(Ts=!0,e(Xm))),P},t.unstable_wrapCallback=function(P){var z=Dt;return function(){var J=Dt;Dt=z;try{return P.apply(this,arguments)}finally{Dt=J}}}})(vA);_A.exports=vA;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp=H.exports,Se=rA,lt=_A.exports;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Wp)throw Error(R(227));var wA=new Set,Ju={};function Ro(t,e){Wa(t,e),Wa(t+"Capture",e)}function Wa(t,e){for(Ju[t]=e,t=0;t<e.length;t++)wA.add(e[t])}var ui=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),u$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XT=Object.prototype.hasOwnProperty,JT={},ZT={};function c$(t){return XT.call(ZT,t)?!0:XT.call(JT,t)?!1:u$.test(t)?ZT[t]=!0:(JT[t]=!0,!1)}function h$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function d$(t,e,n,r){if(e===null||typeof e=="undefined"||h$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mw=/[\-:]([a-z])/g;function Lw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mw,Lw);Pt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mw,Lw);Pt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mw,Lw);Pt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fw(t,e,n,r){var i=Pt.hasOwnProperty(e)?Pt[e]:null,s=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(d$(e,n,i,r)&&(n=null),r||i===null?c$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var No=Wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vu=60103,xs=60106,Ci=60107,$w=60108,Au=60114,Uw=60109,Vw=60110,zp=60112,Ru=60113,pf=60120,Kp=60115,Bw=60116,jw=60121,qw=60128,EA=60129,Ww=60130,S_=60131;if(typeof Symbol=="function"&&Symbol.for){var Qe=Symbol.for;vu=Qe("react.element"),xs=Qe("react.portal"),Ci=Qe("react.fragment"),$w=Qe("react.strict_mode"),Au=Qe("react.profiler"),Uw=Qe("react.provider"),Vw=Qe("react.context"),zp=Qe("react.forward_ref"),Ru=Qe("react.suspense"),pf=Qe("react.suspense_list"),Kp=Qe("react.memo"),Bw=Qe("react.lazy"),jw=Qe("react.block"),Qe("react.scope"),qw=Qe("react.opaque.id"),EA=Qe("react.debug_trace_mode"),Ww=Qe("react.offscreen"),S_=Qe("react.legacy_hidden")}var eS=typeof Symbol=="function"&&Symbol.iterator;function Yl(t){return t===null||typeof t!="object"?null:(t=eS&&t[eS]||t["@@iterator"],typeof t=="function"?t:null)}var Zm;function wu(t){if(Zm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zm=e&&e[1]||""}return`
`+Zm+t}var ey=!1;function ld(t,e){if(!t||ey)return"";ey=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=a);break}}}finally{ey=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wu(t):""}function f$(t){switch(t.tag){case 5:return wu(t.type);case 16:return wu("Lazy");case 13:return wu("Suspense");case 19:return wu("SuspenseList");case 0:case 2:case 15:return t=ld(t.type,!1),t;case 11:return t=ld(t.type.render,!1),t;case 22:return t=ld(t.type._render,!1),t;case 1:return t=ld(t.type,!0),t;default:return""}}function wa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ci:return"Fragment";case xs:return"Portal";case Au:return"Profiler";case $w:return"StrictMode";case Ru:return"Suspense";case pf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Vw:return(t.displayName||"Context")+".Consumer";case Uw:return(t._context.displayName||"Context")+".Provider";case zp:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Kp:return wa(t.type);case jw:return wa(t._render);case Bw:e=t._payload,t=t._init;try{return wa(t(e))}catch{}}return null}function Yi(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function IA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p$(t){var e=IA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ud(t){t._valueTracker||(t._valueTracker=p$(t))}function TA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=IA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gf(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function b_(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function tS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SA(t,e){e=e.checked,e!=null&&Fw(t,"checked",e,!1)}function C_(t,e){SA(t,e);var n=Yi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?k_(t,e.type,n):e.hasOwnProperty("defaultValue")&&k_(t,e.type,Yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function k_(t,e,n){(e!=="number"||gf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function g$(t){var e="";return Wp.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function A_(t,e){return t=Se({children:void 0},e),(e=g$(e.children))&&(t.children=e),t}function Ea(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function R_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yi(n)}}function bA(t,e){var n=Yi(e.value),r=Yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var N_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function CA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cd,kA=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!==N_.svg||"innerHTML"in t)t.innerHTML=e;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Nu={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m$=["Webkit","ms","Moz","O"];Object.keys(Nu).forEach(function(t){m$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nu[e]=Nu[t]})});function AA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Nu.hasOwnProperty(t)&&Nu[t]?(""+e).trim():e+"px"}function RA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var y$=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function O_(t,e){if(e){if(y$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function x_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function zw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var D_=null,Ia=null,Ta=null;function sS(t){if(t=sh(t)){if(typeof D_!="function")throw Error(R(280));var e=t.stateNode;e&&(e=Jp(e),D_(t.stateNode,t.type,e))}}function NA(t){Ia?Ta?Ta.push(t):Ta=[t]:Ia=t}function PA(){if(Ia){var t=Ia,e=Ta;if(Ta=Ia=null,sS(t),e)for(t=0;t<e.length;t++)sS(e[t])}}function Kw(t,e){return t(e)}function OA(t,e,n,r,i){return t(e,n,r,i)}function Hw(){}var xA=Kw,Ds=!1,ty=!1;function Gw(){(Ia!==null||Ta!==null)&&(Hw(),PA())}function _$(t,e,n){if(ty)return t(e,n);ty=!0;try{return xA(t,e,n)}finally{ty=!1,Gw()}}function ec(t,e){var n=t.stateNode;if(n===null)return null;var r=Jp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var M_=!1;if(ui)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){M_=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{M_=!1}function v$(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Pu=!1,mf=null,yf=!1,L_=null,w$={onError:function(t){Pu=!0,mf=t}};function E$(t,e,n,r,i,s,o,a,l){Pu=!1,mf=null,v$.apply(w$,arguments)}function I$(t,e,n,r,i,s,o,a,l){if(E$.apply(this,arguments),Pu){if(Pu){var u=mf;Pu=!1,mf=null}else throw Error(R(198));yf||(yf=!0,L_=u)}}function Po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oS(t){if(Po(t)!==t)throw Error(R(188))}function T$(t){var e=t.alternate;if(!e){if(e=Po(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return oS(i),t;if(s===r)return oS(i),e;s=s.sibling}throw Error(R(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function MA(t){if(t=T$(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function aS(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var LA,Qw,FA,$A,F_=!1,Er=[],Mi=null,Li=null,Fi=null,tc=new Map,nc=new Map,Jl=[],lS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $_(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:i,targetContainers:[r]}}function uS(t,e){switch(t){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":tc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(e.pointerId)}}function Zl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t=$_(e,n,r,i,s),e!==null&&(e=sh(e),e!==null&&Qw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function S$(t,e,n,r,i){switch(e){case"focusin":return Mi=Zl(Mi,t,e,n,r,i),!0;case"dragenter":return Li=Zl(Li,t,e,n,r,i),!0;case"mouseover":return Fi=Zl(Fi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return tc.set(s,Zl(tc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,nc.set(s,Zl(nc.get(s)||null,t,e,n,r,i)),!0}return!1}function b$(t){var e=Ms(t.target);if(e!==null){var n=Po(e);if(n!==null){if(e=n.tag,e===13){if(e=DA(n),e!==null){t.blockedOn=e,$A(t.lanePriority,function(){lt.unstable_runWithPriority(t.priority,function(){FA(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=sh(n),e!==null&&Qw(e),t.blockedOn=n,!1;e.shift()}return!0}function cS(t,e,n){jd(t)&&n.delete(e)}function C$(){for(F_=!1;0<Er.length;){var t=Er[0];if(t.blockedOn!==null){t=sh(t.blockedOn),t!==null&&LA(t);break}for(var e=t.targetContainers;0<e.length;){var n=Zw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&Er.shift()}Mi!==null&&jd(Mi)&&(Mi=null),Li!==null&&jd(Li)&&(Li=null),Fi!==null&&jd(Fi)&&(Fi=null),tc.forEach(cS),nc.forEach(cS)}function eu(t,e){t.blockedOn===e&&(t.blockedOn=null,F_||(F_=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,C$)))}function UA(t){function e(i){return eu(i,t)}if(0<Er.length){eu(Er[0],t);for(var n=1;n<Er.length;n++){var r=Er[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mi!==null&&eu(Mi,t),Li!==null&&eu(Li,t),Fi!==null&&eu(Fi,t),tc.forEach(e),nc.forEach(e),n=0;n<Jl.length;n++)r=Jl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jl.length&&(n=Jl[0],n.blockedOn===null);)b$(n),n.blockedOn===null&&Jl.shift()}function hd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ca={animationend:hd("Animation","AnimationEnd"),animationiteration:hd("Animation","AnimationIteration"),animationstart:hd("Animation","AnimationStart"),transitionend:hd("Transition","TransitionEnd")},ny={},VA={};ui&&(VA=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function Hp(t){if(ny[t])return ny[t];if(!ca[t])return t;var e=ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in VA)return ny[t]=e[n];return t}var BA=Hp("animationend"),jA=Hp("animationiteration"),qA=Hp("animationstart"),WA=Hp("transitionend"),zA=new Map,Yw=new Map,k$=["abort","abort",BA,"animationEnd",jA,"animationIteration",qA,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",WA,"transitionEnd","waiting","waiting"];function Xw(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Yw.set(r,e),zA.set(r,i),Ro(i,[r])}}var A$=lt.unstable_now;A$();var he=8;function oa(t){if((1&t)!==0)return he=15,1;if((2&t)!==0)return he=14,2;if((4&t)!==0)return he=13,4;var e=24&t;return e!==0?(he=12,e):(t&32)!==0?(he=11,32):(e=192&t,e!==0?(he=10,e):(t&256)!==0?(he=9,256):(e=3584&t,e!==0?(he=8,e):(t&4096)!==0?(he=7,4096):(e=4186112&t,e!==0?(he=6,e):(e=62914560&t,e!==0?(he=5,e):t&67108864?(he=4,67108864):(t&134217728)!==0?(he=3,134217728):(e=805306368&t,e!==0?(he=2,e):(1073741824&t)!==0?(he=1,1073741824):(he=8,t))))))}function R$(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function N$(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(R(358,t))}}function rc(t,e){var n=t.pendingLanes;if(n===0)return he=0;var r=0,i=0,s=t.expiredLanes,o=t.suspendedLanes,a=t.pingedLanes;if(s!==0)r=s,i=he=15;else if(s=n&134217727,s!==0){var l=s&~o;l!==0?(r=oa(l),i=he):(a&=s,a!==0&&(r=oa(a),i=he))}else s=n&~o,s!==0?(r=oa(s),i=he):a!==0&&(r=oa(a),i=he);if(r===0)return 0;if(r=31-Xi(r),r=n&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&o)===0){if(oa(e),i<=he)return e;he=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xi(e),i=1<<n,r|=t[n],e&=~i;return r}function KA(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _f(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=aa(24&~e),t===0?_f(10,e):t;case 10:return t=aa(192&~e),t===0?_f(8,e):t;case 8:return t=aa(3584&~e),t===0&&(t=aa(4186112&~e),t===0&&(t=512)),t;case 2:return e=aa(805306368&~e),e===0&&(e=268435456),e}throw Error(R(358,t))}function aa(t){return t&-t}function ry(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gp(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-Xi(e),t[e]=n}var Xi=Math.clz32?Math.clz32:x$,P$=Math.log,O$=Math.LN2;function x$(t){return t===0?32:31-(P$(t)/O$|0)|0}var D$=lt.unstable_UserBlockingPriority,M$=lt.unstable_runWithPriority,qd=!0;function L$(t,e,n,r){Ds||Hw();var i=Jw,s=Ds;Ds=!0;try{OA(i,t,e,n,r)}finally{(Ds=s)||Gw()}}function F$(t,e,n,r){M$(D$,Jw.bind(null,t,e,n,r))}function Jw(t,e,n,r){if(qd){var i;if((i=(e&4)===0)&&0<Er.length&&-1<lS.indexOf(t))t=$_(null,t,e,n,r),Er.push(t);else{var s=Zw(t,e,n,r);if(s===null)i&&uS(t,r);else{if(i){if(-1<lS.indexOf(t)){t=$_(s,t,e,n,r),Er.push(t);return}if(S$(s,t,e,n,r))return;uS(t,r)}sR(t,e,r,null,n)}}}}function Zw(t,e,n,r){var i=zw(r);if(i=Ms(i),i!==null){var s=Po(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=DA(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return sR(t,e,r,i,n),null}var Ni=null,eE=null,Wd=null;function HA(){if(Wd)return Wd;var t,e=eE,n=e.length,r,i="value"in Ni?Ni.value:Ni.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wd=i.slice(t,1<r?1-r:void 0)}function zd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dd(){return!0}function hS(){return!1}function Dn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dd:hS,this.isPropagationStopped=hS,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dd)},persist:function(){},isPersistent:dd}),e}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tE=Dn(wl),ih=Se({},wl,{view:0,detail:0}),$$=Dn(ih),iy,sy,tu,Qp=Se({},ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tu&&(tu&&t.type==="mousemove"?(iy=t.screenX-tu.screenX,sy=t.screenY-tu.screenY):sy=iy=0,tu=t),iy)},movementY:function(t){return"movementY"in t?t.movementY:sy}}),dS=Dn(Qp),U$=Se({},Qp,{dataTransfer:0}),V$=Dn(U$),B$=Se({},ih,{relatedTarget:0}),oy=Dn(B$),j$=Se({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),q$=Dn(j$),W$=Se({},wl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),z$=Dn(W$),K$=Se({},wl,{data:0}),fS=Dn(K$),H$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q$[t])?!!e[t]:!1}function nE(){return Y$}var X$=Se({},ih,{key:function(t){if(t.key){var e=H$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?G$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nE,charCode:function(t){return t.type==="keypress"?zd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J$=Dn(X$),Z$=Se({},Qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pS=Dn(Z$),eU=Se({},ih,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nE}),tU=Dn(eU),nU=Se({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),rU=Dn(nU),iU=Se({},Qp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sU=Dn(iU),oU=[9,13,27,32],rE=ui&&"CompositionEvent"in window,Ou=null;ui&&"documentMode"in document&&(Ou=document.documentMode);var aU=ui&&"TextEvent"in window&&!Ou,GA=ui&&(!rE||Ou&&8<Ou&&11>=Ou),gS=String.fromCharCode(32),mS=!1;function QA(t,e){switch(t){case"keyup":return oU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ha=!1;function lU(t,e){switch(t){case"compositionend":return YA(e);case"keypress":return e.which!==32?null:(mS=!0,gS);case"textInput":return t=e.data,t===gS&&mS?null:t;default:return null}}function uU(t,e){if(ha)return t==="compositionend"||!rE&&QA(t,e)?(t=HA(),Wd=eE=Ni=null,ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GA&&e.locale!=="ko"?null:e.data;default:return null}}var cU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cU[t.type]:e==="textarea"}function XA(t,e,n,r){NA(r),e=vf(e,"onChange"),0<e.length&&(n=new tE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xu=null,ic=null;function hU(t){nR(t,0)}function Yp(t){var e=fa(t);if(TA(e))return t}function dU(t,e){if(t==="change")return e}var JA=!1;if(ui){var ay;if(ui){var ly="oninput"in document;if(!ly){var _S=document.createElement("div");_S.setAttribute("oninput","return;"),ly=typeof _S.oninput=="function"}ay=ly}else ay=!1;JA=ay&&(!document.documentMode||9<document.documentMode)}function vS(){xu&&(xu.detachEvent("onpropertychange",ZA),ic=xu=null)}function ZA(t){if(t.propertyName==="value"&&Yp(ic)){var e=[];if(XA(e,ic,t,zw(t)),t=hU,Ds)t(e);else{Ds=!0;try{Kw(t,e)}finally{Ds=!1,Gw()}}}}function fU(t,e,n){t==="focusin"?(vS(),xu=e,ic=n,xu.attachEvent("onpropertychange",ZA)):t==="focusout"&&vS()}function pU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yp(ic)}function gU(t,e){if(t==="click")return Yp(e)}function mU(t,e){if(t==="input"||t==="change")return Yp(e)}function yU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:yU,_U=Object.prototype.hasOwnProperty;function sc(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!_U.call(e,n[r])||!Fn(t[n[r]],e[n[r]]))return!1;return!0}function wS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ES(t,e){var n=wS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wS(n)}}function eR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IS(){for(var t=window,e=gf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gf(t.document)}return e}function U_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var vU=ui&&"documentMode"in document&&11>=document.documentMode,da=null,V_=null,Du=null,B_=!1;function TS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;B_||da==null||da!==gf(r)||(r=da,"selectionStart"in r&&U_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Du&&sc(Du,r)||(Du=r,r=vf(V_,"onSelect"),0<r.length&&(e=new tE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=da)))}Xw("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Xw("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Xw(k$,2);for(var SS="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),uy=0;uy<SS.length;uy++)Yw.set(SS[uy],0);Wa("onMouseEnter",["mouseout","mouseover"]);Wa("onMouseLeave",["mouseout","mouseover"]);Wa("onPointerEnter",["pointerout","pointerover"]);Wa("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eu));function bS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,I$(r,e,void 0,t),t.currentTarget=null}function nR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;bS(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;bS(i,a,u),s=l}}}if(yf)throw t=L_,yf=!1,L_=null,t}function ge(t,e){var n=aR(e),r=t+"__bubble";n.has(r)||(iR(e,t,2,!1),n.add(r))}var CS="_reactListening"+Math.random().toString(36).slice(2);function rR(t){t[CS]||(t[CS]=!0,wA.forEach(function(e){tR.has(e)||kS(e,!1,t,null),kS(e,!0,t,null)}))}function kS(t,e,n,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=n;if(t==="selectionchange"&&n.nodeType!==9&&(s=n.ownerDocument),r!==null&&!e&&tR.has(t)){if(t!=="scroll")return;i|=2,s=r}var o=aR(s),a=t+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),iR(s,t,i,e),o.add(a))}function iR(t,e,n,r){var i=Yw.get(e);switch(i===void 0?2:i){case 0:i=L$;break;case 1:i=F$;break;default:i=Jw}n=i.bind(null,e,n,t),i=void 0,!M_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sR(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ms(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_$(function(){var u=s,c=zw(n),h=[];e:{var d=zA.get(t);if(d!==void 0){var f=tE,m=t;switch(t){case"keypress":if(zd(n)===0)break e;case"keydown":case"keyup":f=J$;break;case"focusin":m="focus",f=oy;break;case"focusout":m="blur",f=oy;break;case"beforeblur":case"afterblur":f=oy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=dS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=V$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=tU;break;case BA:case jA:case qA:f=q$;break;case WA:f=rU;break;case"scroll":f=$$;break;case"wheel":f=sU;break;case"copy":case"cut":case"paste":f=z$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=pS}var _=(e&4)!==0,p=!_&&t==="scroll",g=_?d!==null?d+"Capture":null:d;_=[];for(var y=u,v;y!==null;){v=y;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=ec(y,g),w!=null&&_.push(oc(y,w,v)))),p)break;y=y.return}0<_.length&&(d=new f(d,m,null,n,c),h.push({event:d,listeners:_}))}}if((e&7)===0){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&(e&16)===0&&(m=n.relatedTarget||n.fromElement)&&(Ms(m)||m[El]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=u,m=m?Ms(m):null,m!==null&&(p=Po(m),m!==p||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(_=dS,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=pS,w="onPointerLeave",g="onPointerEnter",y="pointer"),p=f==null?d:fa(f),v=m==null?d:fa(m),d=new _(w,y+"leave",f,n,c),d.target=p,d.relatedTarget=v,w=null,Ms(c)===u&&(_=new _(g,y+"enter",m,n,c),_.target=v,_.relatedTarget=p,w=_),p=w,f&&m)t:{for(_=f,g=m,y=0,v=_;v;v=Xo(v))y++;for(v=0,w=g;w;w=Xo(w))v++;for(;0<y-v;)_=Xo(_),y--;for(;0<v-y;)g=Xo(g),v--;for(;y--;){if(_===g||g!==null&&_===g.alternate)break t;_=Xo(_),g=Xo(g)}_=null}else _=null;f!==null&&AS(h,d,f,_,!1),m!==null&&p!==null&&AS(h,p,m,_,!0)}}e:{if(d=u?fa(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var O=dU;else if(yS(d))if(JA)O=mU;else{O=pU;var A=fU}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(O=gU);if(O&&(O=O(t,u))){XA(h,O,n,c);break e}A&&A(t,d,u),t==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&k_(d,"number",d.value)}switch(A=u?fa(u):window,t){case"focusin":(yS(A)||A.contentEditable==="true")&&(da=A,V_=u,Du=null);break;case"focusout":Du=V_=da=null;break;case"mousedown":B_=!0;break;case"contextmenu":case"mouseup":case"dragend":B_=!1,TS(h,n,c);break;case"selectionchange":if(vU)break;case"keydown":case"keyup":TS(h,n,c)}var $;if(rE)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else ha?QA(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(GA&&n.locale!=="ko"&&(ha||U!=="onCompositionStart"?U==="onCompositionEnd"&&ha&&($=HA()):(Ni=c,eE="value"in Ni?Ni.value:Ni.textContent,ha=!0)),A=vf(u,U),0<A.length&&(U=new fS(U,t,null,n,c),h.push({event:U,listeners:A}),$?U.data=$:($=YA(n),$!==null&&(U.data=$)))),($=aU?lU(t,n):uU(t,n))&&(u=vf(u,"onBeforeInput"),0<u.length&&(c=new fS("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=$))}nR(h,e)})}function oc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ec(t,n),s!=null&&r.unshift(oc(t,s,i)),s=ec(t,e),s!=null&&r.push(oc(t,s,i))),t=t.return}return r}function Xo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function AS(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ec(n,s),l!=null&&o.unshift(oc(n,l,a))):i||(l=ec(n,s),l!=null&&o.push(oc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}function wf(){}var cy=null,hy=null;function oR(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function j_(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var RS=typeof setTimeout=="function"?setTimeout:void 0,wU=typeof clearTimeout=="function"?clearTimeout:void 0;function iE(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Sa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function NS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var dy=0;function EU(t){return{$$typeof:qw,toString:t,valueOf:t}}var Xp=Math.random().toString(36).slice(2),Pi="__reactFiber$"+Xp,Ef="__reactProps$"+Xp,El="__reactContainer$"+Xp,PS="__reactEvents$"+Xp;function Ms(t){var e=t[Pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[El]||n[Pi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=NS(t);t!==null;){if(n=t[Pi])return n;t=NS(t)}return e}t=n,n=t.parentNode}return null}function sh(t){return t=t[Pi]||t[El],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function Jp(t){return t[Ef]||null}function aR(t){var e=t[PS];return e===void 0&&(e=t[PS]=new Set),e}var q_=[],pa=-1;function ps(t){return{current:t}}function ye(t){0>pa||(t.current=q_[pa],q_[pa]=null,pa--)}function Ne(t,e){pa++,q_[pa]=t.current,t.current=e}var Ji={},Wt=ps(Ji),gn=ps(!1),eo=Ji;function za(t,e){var n=t.type.contextTypes;if(!n)return Ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mn(t){return t=t.childContextTypes,t!=null}function If(){ye(gn),ye(Wt)}function OS(t,e,n){if(Wt.current!==Ji)throw Error(R(168));Ne(Wt,e),Ne(gn,n)}function lR(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(R(108,wa(e)||"Unknown",i));return Se({},n,r)}function Kd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,eo=Wt.current,Ne(Wt,t),Ne(gn,gn.current),!0}function xS(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=lR(t,e,eo),r.__reactInternalMemoizedMergedChildContext=t,ye(gn),ye(Wt),Ne(Wt,t)):ye(gn),Ne(gn,n)}var sE=null,Ks=null,IU=lt.unstable_runWithPriority,oE=lt.unstable_scheduleCallback,W_=lt.unstable_cancelCallback,TU=lt.unstable_shouldYield,DS=lt.unstable_requestPaint,z_=lt.unstable_now,SU=lt.unstable_getCurrentPriorityLevel,Zp=lt.unstable_ImmediatePriority,uR=lt.unstable_UserBlockingPriority,cR=lt.unstable_NormalPriority,hR=lt.unstable_LowPriority,dR=lt.unstable_IdlePriority,fy={},bU=DS!==void 0?DS:function(){},Gr=null,Hd=null,py=!1,MS=z_(),Vt=1e4>MS?z_:function(){return z_()-MS};function Ka(){switch(SU()){case Zp:return 99;case uR:return 98;case cR:return 97;case hR:return 96;case dR:return 95;default:throw Error(R(332))}}function fR(t){switch(t){case 99:return Zp;case 98:return uR;case 97:return cR;case 96:return hR;case 95:return dR;default:throw Error(R(332))}}function to(t,e){return t=fR(t),IU(t,e)}function ac(t,e,n){return t=fR(t),oE(t,e,n)}function Br(){if(Hd!==null){var t=Hd;Hd=null,W_(t)}pR()}function pR(){if(!py&&Gr!==null){py=!0;var t=0;try{var e=Gr;to(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),Gr=null}catch(n){throw Gr!==null&&(Gr=Gr.slice(t+1)),oE(Zp,Br),n}finally{py=!1}}}var CU=No.ReactCurrentBatchConfig;function rr(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Tf=ps(null),Sf=null,ga=null,bf=null;function aE(){bf=ga=Sf=null}function lE(t){var e=Tf.current;ye(Tf),t.type._context._currentValue=e}function gR(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function ba(t,e){Sf=t,bf=ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(or=!0),t.firstContext=null)}function Gn(t,e){if(bf!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(bf=t,e=1073741823),e={context:t,observedBits:e,next:null},ga===null){if(Sf===null)throw Error(R(308));ga=e,Sf.dependencies={lanes:0,firstContext:e,responders:null}}else ga=ga.next=e;return t._currentValue}var Si=!1;function uE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function mR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function LS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lc(t,e,n,r){var i=t.updateQueue;Si=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;if(c!==null){c=c.updateQueue;var h=c.lastBaseUpdate;h!==o&&(h===null?c.firstBaseUpdate=u:h.next=u,c.lastBaseUpdate=l)}}if(s!==null){h=i.baseState,o=0,c=u=l=null;do{a=s.lane;var d=s.eventTime;if((r&a)===a){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=t,m=s;switch(a=e,d=n,m.tag){case 1:if(f=m.payload,typeof f=="function"){h=f.call(d,h,a);break e}h=f;break e;case 3:f.flags=f.flags&-4097|64;case 0:if(f=m.payload,a=typeof f=="function"?f.call(d,h,a):f,a==null)break e;h=Se({},h,a);break e;case 2:Si=!0}}s.callback!==null&&(t.flags|=32,a=i.effects,a===null?i.effects=[s]:a.push(s))}else d={eventTime:d,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,o|=a;if(s=s.next,s===null){if(a=i.shared.pending,a===null)break;s=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,ah|=o,t.lanes=o,t.memoizedState=h}}function FS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(R(191,i));i.call(r)}}}var yR=new Wp.Component().refs;function Cf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eg={isMounted:function(t){return(t=t._reactInternals)?Po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rn(),i=Vi(t),s=$i(r,i);s.payload=e,n!=null&&(s.callback=n),Ui(t,s),Bi(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rn(),i=Vi(t),s=$i(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),Ui(t,s),Bi(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rn(),r=Vi(t),i=$i(n,r);i.tag=2,e!=null&&(i.callback=e),Ui(t,i),Bi(t,r,n)}};function $S(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!sc(n,r)||!sc(i,s):!0}function _R(t,e,n){var r=!1,i=Ji,s=e.contextType;return typeof s=="object"&&s!==null?s=Gn(s):(i=mn(e)?eo:Wt.current,r=e.contextTypes,s=(r=r!=null)?za(t,i):Ji),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function US(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eg.enqueueReplaceState(e,e.state,null)}function K_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=yR,uE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Gn(s):(s=mn(e)?eo:Wt.current,i.context=za(t,s)),lc(t,n,i,r),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&eg.enqueueReplaceState(i,i.state,null),lc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var fd=Array.isArray;function nu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=r.refs;o===yR&&(o=r.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function pd(t,e){if(t.type!=="textarea")throw Error(R(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function vR(t){function e(p,g){if(t){var y=p.lastEffect;y!==null?(y.nextEffect=g,p.lastEffect=g):p.firstEffect=p.lastEffect=g,g.nextEffect=null,g.flags=8}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=es(p,g),p.index=0,p.sibling=null,p}function s(p,g,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags=2,g):y):(p.flags=2,g)):g}function o(p){return t&&p.alternate===null&&(p.flags=2),p}function a(p,g,y,v){return g===null||g.tag!==6?(g=vy(y,p.mode,v),g.return=p,g):(g=i(g,y),g.return=p,g)}function l(p,g,y,v){return g!==null&&g.elementType===y.type?(v=i(g,y.props),v.ref=nu(p,g,y),v.return=p,v):(v=Xd(y.type,y.key,y.props,null,p.mode,v),v.ref=nu(p,g,y),v.return=p,v)}function u(p,g,y,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=wy(y,p.mode,v),g.return=p,g):(g=i(g,y.children||[]),g.return=p,g)}function c(p,g,y,v,w){return g===null||g.tag!==7?(g=Ra(y,p.mode,v,w),g.return=p,g):(g=i(g,y),g.return=p,g)}function h(p,g,y){if(typeof g=="string"||typeof g=="number")return g=vy(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case vu:return y=Xd(g.type,g.key,g.props,null,p.mode,y),y.ref=nu(p,null,g),y.return=p,y;case xs:return g=wy(g,p.mode,y),g.return=p,g}if(fd(g)||Yl(g))return g=Ra(g,p.mode,y,null),g.return=p,g;pd(p,g)}return null}function d(p,g,y,v){var w=g!==null?g.key:null;if(typeof y=="string"||typeof y=="number")return w!==null?null:a(p,g,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case vu:return y.key===w?y.type===Ci?c(p,g,y.props.children,v,w):l(p,g,y,v):null;case xs:return y.key===w?u(p,g,y,v):null}if(fd(y)||Yl(y))return w!==null?null:c(p,g,y,v,null);pd(p,y)}return null}function f(p,g,y,v,w){if(typeof v=="string"||typeof v=="number")return p=p.get(y)||null,a(g,p,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case vu:return p=p.get(v.key===null?y:v.key)||null,v.type===Ci?c(g,p,v.props.children,w,v.key):l(g,p,v,w);case xs:return p=p.get(v.key===null?y:v.key)||null,u(g,p,v,w)}if(fd(v)||Yl(v))return p=p.get(y)||null,c(g,p,v,w,null);pd(g,v)}return null}function m(p,g,y,v){for(var w=null,O=null,A=g,$=g=0,U=null;A!==null&&$<y.length;$++){A.index>$?(U=A,A=null):U=A.sibling;var L=d(p,A,y[$],v);if(L===null){A===null&&(A=U);break}t&&A&&L.alternate===null&&e(p,A),g=s(L,g,$),O===null?w=L:O.sibling=L,O=L,A=U}if($===y.length)return n(p,A),w;if(A===null){for(;$<y.length;$++)A=h(p,y[$],v),A!==null&&(g=s(A,g,$),O===null?w=A:O.sibling=A,O=A);return w}for(A=r(p,A);$<y.length;$++)U=f(A,p,$,y[$],v),U!==null&&(t&&U.alternate!==null&&A.delete(U.key===null?$:U.key),g=s(U,g,$),O===null?w=U:O.sibling=U,O=U);return t&&A.forEach(function(je){return e(p,je)}),w}function _(p,g,y,v){var w=Yl(y);if(typeof w!="function")throw Error(R(150));if(y=w.call(y),y==null)throw Error(R(151));for(var O=w=null,A=g,$=g=0,U=null,L=y.next();A!==null&&!L.done;$++,L=y.next()){A.index>$?(U=A,A=null):U=A.sibling;var je=d(p,A,L.value,v);if(je===null){A===null&&(A=U);break}t&&A&&je.alternate===null&&e(p,A),g=s(je,g,$),O===null?w=je:O.sibling=je,O=je,A=U}if(L.done)return n(p,A),w;if(A===null){for(;!L.done;$++,L=y.next())L=h(p,L.value,v),L!==null&&(g=s(L,g,$),O===null?w=L:O.sibling=L,O=L);return w}for(A=r(p,A);!L.done;$++,L=y.next())L=f(A,p,$,L.value,v),L!==null&&(t&&L.alternate!==null&&A.delete(L.key===null?$:L.key),g=s(L,g,$),O===null?w=L:O.sibling=L,O=L);return t&&A.forEach(function(Gm){return e(p,Gm)}),w}return function(p,g,y,v){var w=typeof y=="object"&&y!==null&&y.type===Ci&&y.key===null;w&&(y=y.props.children);var O=typeof y=="object"&&y!==null;if(O)switch(y.$$typeof){case vu:e:{for(O=y.key,w=g;w!==null;){if(w.key===O){switch(w.tag){case 7:if(y.type===Ci){n(p,w.sibling),g=i(w,y.props.children),g.return=p,p=g;break e}break;default:if(w.elementType===y.type){n(p,w.sibling),g=i(w,y.props),g.ref=nu(p,w,y),g.return=p,p=g;break e}}n(p,w);break}else e(p,w);w=w.sibling}y.type===Ci?(g=Ra(y.props.children,p.mode,v,y.key),g.return=p,p=g):(v=Xd(y.type,y.key,y.props,null,p.mode,v),v.ref=nu(p,g,y),v.return=p,p=v)}return o(p);case xs:e:{for(w=y.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),g=i(g,y.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=wy(y,p.mode,v),g.return=p,p=g}return o(p)}if(typeof y=="string"||typeof y=="number")return y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,y),g.return=p,p=g):(n(p,g),g=vy(y,p.mode,v),g.return=p,p=g),o(p);if(fd(y))return m(p,g,y,v);if(Yl(y))return _(p,g,y,v);if(O&&pd(p,y),typeof y=="undefined"&&!w)switch(p.tag){case 1:case 22:case 0:case 11:case 15:throw Error(R(152,wa(p.type)||"Component"))}return n(p,g)}}var kf=vR(!0),wR=vR(!1),oh={},kr=ps(oh),uc=ps(oh),cc=ps(oh);function Ls(t){if(t===oh)throw Error(R(174));return t}function H_(t,e){switch(Ne(cc,e),Ne(uc,t),Ne(kr,oh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:P_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=P_(e,t)}ye(kr),Ne(kr,e)}function Ha(){ye(kr),ye(uc),ye(cc)}function VS(t){Ls(cc.current);var e=Ls(kr.current),n=P_(e,t.type);e!==n&&(Ne(uc,t),Ne(kr,n))}function cE(t){uc.current===t&&(ye(kr),ye(uc))}var Re=ps(0);function Af(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xr=null,Oi=null,Ar=!1;function ER(t,e){var n=$n(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function BS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function G_(t){if(Ar){var e=Oi;if(e){var n=e;if(!BS(t,e)){if(e=Sa(n.nextSibling),!e||!BS(t,e)){t.flags=t.flags&-1025|2,Ar=!1,Xr=t;return}ER(Xr,n)}Xr=t,Oi=Sa(e.firstChild)}else t.flags=t.flags&-1025|2,Ar=!1,Xr=t}}function jS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xr=t}function gd(t){if(t!==Xr)return!1;if(!Ar)return jS(t),Ar=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!j_(e,t.memoizedProps))for(e=Oi;e;)ER(t,e),e=Sa(e.nextSibling);if(jS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Oi=Sa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Oi=null}}else Oi=Xr?Sa(t.stateNode.nextSibling):null;return!0}function gy(){Oi=Xr=null,Ar=!1}var Ca=[];function hE(){for(var t=0;t<Ca.length;t++)Ca[t]._workInProgressVersionPrimary=null;Ca.length=0}var Mu=No.ReactCurrentDispatcher,zn=No.ReactCurrentBatchConfig,hc=0,De=null,Lt=null,It=null,Rf=!1,Lu=!1;function ln(){throw Error(R(321))}function dE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function fE(t,e,n,r,i,s){if(hc=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mu.current=t===null||t.memoizedState===null?AU:RU,t=n(r,i),Lu){s=0;do{if(Lu=!1,!(25>s))throw Error(R(301));s+=1,It=Lt=null,e.updateQueue=null,Mu.current=NU,t=n(r,i)}while(Lu)}if(Mu.current=xf,e=Lt!==null&&Lt.next!==null,hc=0,It=Lt=De=null,Rf=!1,e)throw Error(R(300));return t}function Fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?De.memoizedState=It=t:It=It.next=t,It}function Oo(){if(Lt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var e=It===null?De.memoizedState:It.next;if(e!==null)It=e,Lt=t;else{if(t===null)throw Error(R(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},It===null?De.memoizedState=It=t:It=It.next=t}return It}function Ir(t,e){return typeof e=="function"?e(t):e}function ru(t){var e=Oo(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=Lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){i=i.next,r=r.baseState;var a=o=s=null,l=i;do{var u=l.lane;if((hc&u)===u)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===t?l.eagerState:t(r,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(o=a=c,s=r):a=a.next=c,De.lanes|=u,ah|=u}l=l.next}while(l!==null&&l!==i);a===null?s=r:a.next=o,Fn(r,e.memoizedState)||(or=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function iu(t){var e=Oo(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Fn(s,e.memoizedState)||(or=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function qS(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===r:(t=t.mutableReadLanes,(t=(hc&t)===t)&&(e._workInProgressVersionPrimary=r,Ca.push(e))),t)return n(e._source);throw Ca.push(e),Error(R(350))}function IR(t,e,n,r){var i=nn;if(i===null)throw Error(R(349));var s=e._getVersion,o=s(e._source),a=Mu.current,l=a.useState(function(){return qS(i,e,n)}),u=l[1],c=l[0];l=It;var h=t.memoizedState,d=h.refs,f=d.getSnapshot,m=h.source;h=h.subscribe;var _=De;return t.memoizedState={refs:d,source:e,subscribe:r},a.useEffect(function(){d.getSnapshot=n,d.setSnapshot=u;var p=s(e._source);if(!Fn(o,p)){p=n(e._source),Fn(c,p)||(u(p),p=Vi(_),i.mutableReadLanes|=p&i.pendingLanes),p=i.mutableReadLanes,i.entangledLanes|=p;for(var g=i.entanglements,y=p;0<y;){var v=31-Xi(y),w=1<<v;g[v]|=p,y&=~w}}},[n,e,r]),a.useEffect(function(){return r(e._source,function(){var p=d.getSnapshot,g=d.setSnapshot;try{g(p(e._source));var y=Vi(_);i.mutableReadLanes|=y&i.pendingLanes}catch(v){g(function(){throw v})}})},[e,r]),Fn(f,n)&&Fn(m,e)&&Fn(h,r)||(t={pending:null,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:c},t.dispatch=u=mE.bind(null,De,t),l.queue=t,l.baseQueue=null,c=qS(i,e,n),l.memoizedState=l.baseState=c),c}function TR(t,e,n){var r=Oo();return IR(r,t,e,n)}function su(t){var e=Fs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:t},t=t.dispatch=mE.bind(null,De,t),[e.memoizedState,t]}function Nf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function WS(t){var e=Fs();return t={current:t},e.memoizedState=t}function Pf(){return Oo().memoizedState}function Q_(t,e,n,r){var i=Fs();De.flags|=t,i.memoizedState=Nf(1|e,n,void 0,r===void 0?null:r)}function pE(t,e,n,r){var i=Oo();r=r===void 0?null:r;var s=void 0;if(Lt!==null){var o=Lt.memoizedState;if(s=o.destroy,r!==null&&dE(r,o.deps)){Nf(e,n,s,r);return}}De.flags|=t,i.memoizedState=Nf(1|e,n,s,r)}function zS(t,e){return Q_(516,4,t,e)}function Of(t,e){return pE(516,4,t,e)}function SR(t,e){return pE(4,2,t,e)}function bR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CR(t,e,n){return n=n!=null?n.concat([t]):null,pE(4,2,bR.bind(null,e,t),n)}function gE(){}function kR(t,e){var n=Oo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function AR(t,e){var n=Oo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kU(t,e){var n=Ka();to(98>n?98:n,function(){t(!0)}),to(97<n?97:n,function(){var r=zn.transition;zn.transition=1;try{t(!1),e()}finally{zn.transition=r}})}function mE(t,e,n){var r=Rn(),i=Vi(t),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=t.alternate,t===De||o!==null&&o===De)Lu=Rf=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,Fn(l,a))return}catch{}finally{}Bi(t,i,r)}}var xf={readContext:Gn,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useOpaqueIdentifier:ln,unstable_isNewReconciler:!1},AU={readContext:Gn,useCallback:function(t,e){return Fs().memoizedState=[t,e===void 0?null:e],t},useContext:Gn,useEffect:zS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Q_(4,2,bR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Q_(4,2,t,e)},useMemo:function(t,e){var n=Fs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=mE.bind(null,De,t),[r.memoizedState,t]},useRef:WS,useState:su,useDebugValue:gE,useDeferredValue:function(t){var e=su(t),n=e[0],r=e[1];return zS(function(){var i=zn.transition;zn.transition=1;try{r(t)}finally{zn.transition=i}},[t]),n},useTransition:function(){var t=su(!1),e=t[0];return t=kU.bind(null,t[1]),WS(t),[t,e]},useMutableSource:function(t,e,n){var r=Fs();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},IR(r,t,e,n)},useOpaqueIdentifier:function(){if(Ar){var t=!1,e=EU(function(){throw t||(t=!0,n("r:"+(dy++).toString(36))),Error(R(355))}),n=su(e)[1];return(De.mode&2)===0&&(De.flags|=516,Nf(5,function(){n("r:"+(dy++).toString(36))},void 0,null)),e}return e="r:"+(dy++).toString(36),su(e),e},unstable_isNewReconciler:!1},RU={readContext:Gn,useCallback:kR,useContext:Gn,useEffect:Of,useImperativeHandle:CR,useLayoutEffect:SR,useMemo:AR,useReducer:ru,useRef:Pf,useState:function(){return ru(Ir)},useDebugValue:gE,useDeferredValue:function(t){var e=ru(Ir),n=e[0],r=e[1];return Of(function(){var i=zn.transition;zn.transition=1;try{r(t)}finally{zn.transition=i}},[t]),n},useTransition:function(){var t=ru(Ir)[0];return[Pf().current,t]},useMutableSource:TR,useOpaqueIdentifier:function(){return ru(Ir)[0]},unstable_isNewReconciler:!1},NU={readContext:Gn,useCallback:kR,useContext:Gn,useEffect:Of,useImperativeHandle:CR,useLayoutEffect:SR,useMemo:AR,useReducer:iu,useRef:Pf,useState:function(){return iu(Ir)},useDebugValue:gE,useDeferredValue:function(t){var e=iu(Ir),n=e[0],r=e[1];return Of(function(){var i=zn.transition;zn.transition=1;try{r(t)}finally{zn.transition=i}},[t]),n},useTransition:function(){var t=iu(Ir)[0];return[Pf().current,t]},useMutableSource:TR,useOpaqueIdentifier:function(){return iu(Ir)[0]},unstable_isNewReconciler:!1},PU=No.ReactCurrentOwner,or=!1;function un(t,e,n,r){e.child=t===null?wR(e,null,n,r):kf(e,t.child,n,r)}function KS(t,e,n,r,i){n=n.render;var s=e.ref;return ba(e,i),r=fE(t,e,n,r,s,i),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Jr(t,e,i)):(e.flags|=1,un(t,e,r,i),e.child)}function HS(t,e,n,r,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!IE(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,RR(t,e,o,r,i,s)):(t=Xd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,(i&s)===0&&(i=o.memoizedProps,n=n.compare,n=n!==null?n:sc,n(i,r)&&t.ref===e.ref)?Jr(t,e,s):(e.flags|=1,t=es(o,r),t.ref=e.ref,t.return=e,e.child=t)}function RR(t,e,n,r,i,s){if(t!==null&&sc(t.memoizedProps,r)&&t.ref===e.ref)if(or=!1,(s&i)!==0)(t.flags&16384)!==0&&(or=!0);else return e.lanes=t.lanes,Jr(t,e,s);return Y_(t,e,n,r,s)}function my(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},yd(e,n);else if((n&1073741824)!==0)e.memoizedState={baseLanes:0},yd(e,s!==null?s.baseLanes:n);else return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},yd(e,t),null;else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,yd(e,r);return un(t,e,i,n),e.child}function NR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function Y_(t,e,n,r,i){var s=mn(n)?eo:Wt.current;return s=za(e,s),ba(e,i),n=fE(t,e,n,r,s,i),t!==null&&!or?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Jr(t,e,i)):(e.flags|=1,un(t,e,n,i),e.child)}function GS(t,e,n,r,i){if(mn(n)){var s=!0;Kd(e)}else s=!1;if(ba(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),_R(e,n,r),K_(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gn(u):(u=mn(n)?eo:Wt.current,u=za(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&US(e,o,r,u),Si=!1;var d=e.memoizedState;o.state=d,lc(e,r,o,i),l=e.memoizedState,a!==r||d!==l||gn.current||Si?(typeof c=="function"&&(Cf(e,n,c,r),l=e.memoizedState),(a=Si||$S(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{o=e.stateNode,mR(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:rr(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gn(l):(l=mn(n)?eo:Wt.current,l=za(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&US(e,o,r,l),Si=!1,d=e.memoizedState,o.state=d,lc(e,r,o,i);var m=e.memoizedState;a!==h||d!==m||gn.current||Si?(typeof f=="function"&&(Cf(e,n,f,r),m=e.memoizedState),(u=Si||$S(e,n,u,r,d,m,l))?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),r=!1)}return X_(t,e,n,r,s,i)}function X_(t,e,n,r,i,s){NR(t,e);var o=(e.flags&64)!==0;if(!r&&!o)return i&&xS(e,n,!1),Jr(t,e,s);r=e.stateNode,PU.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=kf(e,t.child,null,s),e.child=kf(e,null,a,s)):un(t,e,a,s),e.memoizedState=r.state,i&&xS(e,n,!0),e.child}function QS(t){var e=t.stateNode;e.pendingContext?OS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&OS(t,e.context,!1),H_(t,e.containerInfo)}var md={dehydrated:null,retryLane:0};function YS(t,e,n){var r=e.pendingProps,i=Re.current,s=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),Ne(Re,i&1),t===null?(r.fallback!==void 0&&G_(e),t=r.children,i=r.fallback,s?(t=XS(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=md,t):typeof r.unstable_expectedLoadTime=="number"?(t=XS(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=md,e.lanes=33554432,t):(n=TE({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?s?(r=ZS(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=md,r):(n=JS(t,e,r.children,n),e.memoizedState=null,n):s?(r=ZS(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=md,r):(n=JS(t,e,r.children,n),e.memoizedState=null,n)}function XS(t,e,n,r){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},(i&2)===0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=TE(e,i,0,null),n=Ra(n,i,r,null),s.return=t,n.return=t,s.sibling=n,t.child=s,n}function JS(t,e,n,r){var i=t.child;return t=i.sibling,n=es(i,{mode:"visible",children:n}),(e.mode&2)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function ZS(t,e,n,r,i){var s=e.mode,o=t.child;t=o.sibling;var a={mode:"hidden",children:n};return(s&2)===0&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=a,o=n.lastEffect,o!==null?(e.firstEffect=n.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):n=es(o,a),t!==null?r=es(t,r):(r=Ra(r,s,i,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function eb(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),gR(t.return,e)}function yy(t,e,n,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function tb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(un(t,e,r.children,n),r=Re.current,(r&2)!==0)r=r&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eb(t,n);else if(t.tag===19)eb(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Re,r),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Af(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),yy(e,!1,i,n,s,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Af(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}yy(e,!0,n,null,s,e.lastEffect);break;case"together":yy(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ah|=e.lanes,(n&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var PR,J_,OR,xR;PR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};J_=function(){};OR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ls(kr.current);var s=null;switch(n){case"input":i=b_(t,i),r=b_(t,r),s=[];break;case"option":i=A_(t,i),r=A_(t,r),s=[];break;case"select":i=Se({},i,{value:void 0}),r=Se({},r,{value:void 0}),s=[];break;case"textarea":i=R_(t,i),r=R_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wf)}O_(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ju.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ju.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ge("scroll",t),s||a===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===qw?l.toString():(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};xR=function(t,e,n,r){n!==r&&(e.flags|=4)};function ou(t,e){if(!Ar)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function OU(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mn(e.type)&&If(),null;case 3:return Ha(),ye(gn),ye(Wt),hE(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gd(e)?e.flags|=4:r.hydrate||(e.flags|=256)),J_(e),null;case 5:cE(e);var i=Ls(cc.current);if(n=e.type,t!==null&&e.stateNode!=null)OR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(R(166));return null}if(t=Ls(kr.current),gd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Pi]=e,r[Ef]=s,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(t=0;t<Eu.length;t++)ge(Eu[t],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":tS(r,s),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ge("invalid",r);break;case"textarea":rS(r,s),ge("invalid",r)}O_(n,s),t=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?r.textContent!==i&&(t=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(t=["children",""+i]):Ju.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&ge("scroll",r));switch(n){case"input":ud(r),nS(r,s,!0);break;case"textarea":ud(r),iS(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wf)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===N_.html&&(t=CA(n)),t===N_.html?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pi]=e,t[Ef]=r,PR(t,e,!1,!1),e.stateNode=t,o=x_(n,r),n){case"dialog":ge("cancel",t),ge("close",t),i=r;break;case"iframe":case"object":case"embed":ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<Eu.length;i++)ge(Eu[i],t);i=r;break;case"source":ge("error",t),i=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),i=r;break;case"details":ge("toggle",t),i=r;break;case"input":tS(t,r),i=b_(t,r),ge("invalid",t);break;case"option":i=A_(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Se({},r,{value:void 0}),ge("invalid",t);break;case"textarea":rS(t,r),i=R_(t,r),ge("invalid",t);break;default:i=r}O_(n,i);var a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kA(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zu(t,l):typeof l=="number"&&Zu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ju.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ge("scroll",t):l!=null&&Fw(t,s,l,o))}switch(n){case"input":ud(t),nS(t,r,!1);break;case"textarea":ud(t),iS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ea(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wf)}oR(n,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)xR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));n=Ls(cc.current),Ls(kr.current),gd(e)?(r=e.stateNode,n=e.memoizedProps,r[Pi]=e,r.nodeValue!==n&&(e.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pi]=e,e.stateNode=r)}return null;case 13:return ye(Re),r=e.memoizedState,(e.flags&64)!==0?(e.lanes=n,e):(r=r!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&gd(e):n=t.memoizedState!==null,r&&!n&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Re.current&1)!==0?bt===0&&(bt=3):((bt===0||bt===3)&&(bt=4),nn===null||(ah&134217727)===0&&(Tl&134217727)===0||ka(nn,jt))),(r||n)&&(e.flags|=4),null);case 4:return Ha(),J_(e),t===null&&rR(e.stateNode.containerInfo),null;case 10:return lE(e),null;case 17:return mn(e.type)&&If(),null;case 19:if(ye(Re),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!==0,o=r.rendering,o===null)if(s)ou(r,!1);else{if(bt!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(o=Af(t),o!==null){for(e.flags|=64,ou(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Re,Re.current&1|2),e.child}t=t.sibling}r.tail!==null&&Vt()>iv&&(e.flags|=64,s=!0,ou(r,!1),e.lanes=33554432)}else{if(!s)if(t=Af(o),t!==null){if(e.flags|=64,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ou(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ar)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*Vt()-r.renderingStartTime>iv&&n!==1073741824&&(e.flags|=64,s=!0,ou(r,!1),e.lanes=33554432);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Vt(),n.sibling=null,e=Re.current,Ne(Re,s?e&1|2:e&1),n):null;case 23:case 24:return EE(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(R(156,e.tag))}function xU(t){switch(t.tag){case 1:mn(t.type)&&If();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(Ha(),ye(gn),ye(Wt),hE(),e=t.flags,(e&64)!==0)throw Error(R(285));return t.flags=e&-4097|64,t;case 5:return cE(t),null;case 13:return ye(Re),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return ye(Re),null;case 4:return Ha(),null;case 10:return lE(t),null;case 23:case 24:return EE(),null;default:return null}}function yE(t,e){try{var n="",r=e;do n+=f$(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function Z_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DU=typeof WeakMap=="function"?WeakMap:Map;function DR(t,e,n){n=$i(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mf||(Mf=!0,sv=r),Z_(t,e)},n}function MR(t,e,n){n=$i(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return Z_(t,e),r(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this),Z_(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}var MU=typeof WeakSet=="function"?WeakSet:Set;function nb(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){ji(t,n)}else e.current=null}function LU(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:rr(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&iE(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(R(163))}function FU(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;r=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(WR(n,t),zU(n,t)),t=r}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:rr(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&FS(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}FS(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&oR(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&UA(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(R(163))}function rb(t,e){for(var n=t;;){if(n.tag===5){var r=n.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=AA("display",i)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ib(t,e){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(sE,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,i!==void 0)if((r&4)!==0)WR(e,n);else{r=e;try{i()}catch(s){ji(r,s)}}n=n.next}while(n!==t)}break;case 1:if(nb(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){ji(e,s)}break;case 5:nb(e);break;case 4:LR(t,e)}}function sb(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ob(t){return t.tag===5||t.tag===3||t.tag===4}function ab(t){e:{for(var e=t.return;e!==null;){if(ob(e))break e;e=e.return}throw Error(R(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(R(161))}n.flags&16&&(Zu(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||ob(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?ev(t,n,e):tv(t,n,e)}function ev(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wf));else if(r!==4&&(t=t.child,t!==null))for(ev(t,e,n),t=t.sibling;t!==null;)ev(t,e,n),t=t.sibling}function tv(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tv(t,e,n),t=t.sibling;t!==null;)tv(t,e,n),t=t.sibling}function LR(t,e){for(var n=e,r=!1,i,s;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(R(160));switch(i=r.stateNode,r.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var o=t,a=n,l=a;;)if(ib(o,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(o=i,a=n.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):i.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){i=n.stateNode.containerInfo,s=!0,n.child.return=n,n=n.child;continue}}else if(ib(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function _y(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){r=e.memoizedProps;var i=t!==null?t.memoizedProps:r;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(n[Ef]=r,t==="input"&&r.type==="radio"&&r.name!=null&&SA(n,r),x_(t,i),e=x_(t,r),i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];o==="style"?RA(n,a):o==="dangerouslySetInnerHTML"?kA(n,a):o==="children"?Zu(n,a):Fw(n,o,a,e)}switch(t){case"input":C_(n,r);break;case"textarea":bA(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?Ea(n,!!r.multiple,s,!1):t!==!!r.multiple&&(r.defaultValue!=null?Ea(n,!!r.multiple,r.defaultValue,!0):Ea(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(R(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,UA(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(wE=Vt(),rb(e.child,!0)),lb(e);return;case 19:lb(e);return;case 17:return;case 23:case 24:rb(e,e.memoizedState!==null);return}throw Error(R(163))}function lb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MU),e.forEach(function(r){var i=GU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $U(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var UU=Math.ceil,Df=No.ReactCurrentDispatcher,_E=No.ReactCurrentOwner,W=0,nn=null,Ke=null,jt=0,no=0,nv=ps(0),bt=0,tg=null,Il=0,ah=0,Tl=0,vE=0,rv=null,wE=0,iv=1/0;function Sl(){iv=Vt()+500}var M=null,Mf=!1,sv=null,Tr=null,Zi=!1,Fu=null,Iu=90,ov=[],av=[],ri=null,$u=0,lv=null,Gd=-1,Qr=0,Qd=0,Uu=null,Yd=!1;function Rn(){return(W&48)!==0?Vt():Gd!==-1?Gd:Gd=Vt()}function Vi(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return Ka()===99?1:2;if(Qr===0&&(Qr=Il),CU.transition!==0){Qd!==0&&(Qd=rv!==null?rv.pendingLanes:0),t=Qr;var e=4186112&~Qd;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Ka(),(W&4)!==0&&t===98?t=_f(12,Qr):(t=R$(t),t=_f(t,Qr)),t}function Bi(t,e,n){if(50<$u)throw $u=0,lv=null,Error(R(185));if(t=ng(t,e),t===null)return null;Gp(t,e,n),t===nn&&(Tl|=e,bt===4&&ka(t,jt));var r=Ka();e===1?(W&8)!==0&&(W&48)===0?uv(t):(Qn(t,n),W===0&&(Sl(),Br())):((W&4)===0||r!==98&&r!==99||(ri===null?ri=new Set([t]):ri.add(t)),Qn(t,n)),rv=t}function ng(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function Qn(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Xi(o),l=1<<a,u=s[a];if(u===-1){if((l&r)===0||(l&i)!==0){u=e,oa(l);var c=he;s[a]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=e&&(t.expiredLanes|=l);o&=~l}if(r=rc(t,t===nn?jt:0),e=he,r===0)n!==null&&(n!==fy&&W_(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==fy&&W_(n)}e===15?(n=uv.bind(null,t),Gr===null?(Gr=[n],Hd=oE(Zp,pR)):Gr.push(n),n=fy):e===14?n=ac(99,uv.bind(null,t)):(n=N$(e),n=ac(n,FR.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function FR(t){if(Gd=-1,Qd=Qr=0,(W&48)!==0)throw Error(R(327));var e=t.callbackNode;if(gs()&&t.callbackNode!==e)return null;var n=rc(t,t===nn?jt:0);if(n===0)return null;var r=n,i=W;W|=16;var s=BR();(nn!==t||jt!==r)&&(Sl(),Aa(t,r));do try{jU();break}catch(a){VR(t,a)}while(1);if(aE(),Df.current=s,W=i,Ke!==null?r=0:(nn=null,jt=0,r=bt),(Il&Tl)!==0)Aa(t,0);else if(r!==0){if(r===2&&(W|=64,t.hydrate&&(t.hydrate=!1,iE(t.containerInfo)),n=KA(t),n!==0&&(r=Tu(t,n))),r===1)throw e=tg,Aa(t,0),ka(t,n),Qn(t,Vt()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(R(345));case 2:Cs(t);break;case 3:if(ka(t,n),(n&62914560)===n&&(r=wE+500-Vt(),10<r)){if(rc(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Rn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=RS(Cs.bind(null,t),r);break}Cs(t);break;case 4:if(ka(t,n),(n&4186112)===n)break;for(r=t.eventTimes,i=-1;0<n;){var o=31-Xi(n);s=1<<o,o=r[o],o>i&&(i=o),n&=~s}if(n=i,n=Vt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*UU(n/1960))-n,10<n){t.timeoutHandle=RS(Cs.bind(null,t),n);break}Cs(t);break;case 5:Cs(t);break;default:throw Error(R(329))}}return Qn(t,Vt()),t.callbackNode===e?FR.bind(null,t):null}function ka(t,e){for(e&=~vE,e&=~Tl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xi(e),r=1<<n;t[n]=-1,e&=~r}}function uv(t){if((W&48)!==0)throw Error(R(327));if(gs(),t===nn&&(t.expiredLanes&jt)!==0){var e=jt,n=Tu(t,e);(Il&Tl)!==0&&(e=rc(t,e),n=Tu(t,e))}else e=rc(t,0),n=Tu(t,e);if(t.tag!==0&&n===2&&(W|=64,t.hydrate&&(t.hydrate=!1,iE(t.containerInfo)),e=KA(t),e!==0&&(n=Tu(t,e))),n===1)throw n=tg,Aa(t,0),ka(t,e),Qn(t,Vt()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cs(t),Qn(t,Vt()),null}function VU(){if(ri!==null){var t=ri;ri=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Qn(e,Vt())})}Br()}function $R(t,e){var n=W;W|=1;try{return t(e)}finally{W=n,W===0&&(Sl(),Br())}}function UR(t,e){var n=W;W&=-2,W|=8;try{return t(e)}finally{W=n,W===0&&(Sl(),Br())}}function yd(t,e){Ne(nv,no),no|=e,Il|=e}function EE(){no=nv.current,ye(nv)}function Aa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wU(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&If();break;case 3:Ha(),ye(gn),ye(Wt),hE();break;case 5:cE(r);break;case 4:Ha();break;case 13:ye(Re);break;case 19:ye(Re);break;case 10:lE(r);break;case 23:case 24:EE()}n=n.return}nn=t,Ke=es(t.current,null),jt=no=Il=e,bt=0,tg=null,vE=Tl=ah=0}function VR(t,e){do{var n=Ke;try{if(aE(),Mu.current=xf,Rf){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rf=!1}if(hc=0,It=Lt=De=null,Lu=!1,_E.current=null,n===null||n.return===null){bt=1,tg=e,Ke=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=jt,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l;if((a.mode&2)===0){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=(Re.current&1)!==0,d=o;do{var f;if(f=d.tag===13){var m=d.memoizedState;if(m!==null)f=m.dehydrated!==null;else{var _=d.memoizedProps;f=_.fallback===void 0?!1:_.unstable_avoidThisFallback!==!0?!0:!h}}if(f){var p=d.updateQueue;if(p===null){var g=new Set;g.add(u),d.updateQueue=g}else p.add(u);if((d.mode&2)===0){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var y=$i(-1,1);y.tag=2,Ui(a,y)}a.lanes|=1;break e}l=void 0,a=e;var v=s.pingCache;if(v===null?(v=s.pingCache=new DU,l=new Set,v.set(u,l)):(l=v.get(u),l===void 0&&(l=new Set,v.set(u,l))),!l.has(a)){l.add(a);var w=HU.bind(null,s,u,a);u.then(w,w)}d.flags|=4096,d.lanes=e;break e}d=d.return}while(d!==null);l=Error((wa(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}bt!==5&&(bt=2),l=yE(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,e&=-e,d.lanes|=e;var O=DR(d,s,e);LS(d,O);break e;case 1:s=l;var A=d.type,$=d.stateNode;if((d.flags&64)===0&&(typeof A.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Tr===null||!Tr.has($)))){d.flags|=4096,e&=-e,d.lanes|=e;var U=MR(d,s,e);LS(d,U);break e}}d=d.return}while(d!==null)}qR(n)}catch(L){e=L,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function BR(){var t=Df.current;return Df.current=xf,t===null?xf:t}function Tu(t,e){var n=W;W|=16;var r=BR();nn===t&&jt===e||Aa(t,e);do try{BU();break}catch(i){VR(t,i)}while(1);if(aE(),W=n,Df.current=r,Ke!==null)throw Error(R(261));return nn=null,jt=0,bt}function BU(){for(;Ke!==null;)jR(Ke)}function jU(){for(;Ke!==null&&!TU();)jR(Ke)}function jR(t){var e=zR(t.alternate,t,no);t.memoizedProps=t.pendingProps,e===null?qR(t):Ke=e,_E.current=null}function qR(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&2048)===0){if(n=OU(n,e,no),n!==null){Ke=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||(no&1073741824)!==0||(n.mode&4)===0){for(var r=0,i=n.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(n=xU(e),n!==null){n.flags&=2047,Ke=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);bt===0&&(bt=5)}function Cs(t){var e=Ka();return to(99,qU.bind(null,t,e)),null}function qU(t,e){do gs();while(Fu!==null);if((W&48)!==0)throw Error(R(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,a=t.expirationTimes;0<s;){var l=31-Xi(s),u=1<<l;i[l]=0,o[l]=-1,a[l]=-1,s&=~u}if(ri!==null&&(r&24)===0&&ri.has(t)&&ri.delete(t),t===nn&&(Ke=nn=null,jt=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(i=W,W|=32,_E.current=null,cy=qd,o=IS(),U_(o)){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(u=a.getSelection&&a.getSelection())&&u.rangeCount!==0){a=u.anchorNode,s=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var c=0,h=-1,d=-1,f=0,m=0,_=o,p=null;t:for(;;){for(var g;_!==a||s!==0&&_.nodeType!==3||(h=c+s),_!==l||u!==0&&_.nodeType!==3||(d=c+u),_.nodeType===3&&(c+=_.nodeValue.length),(g=_.firstChild)!==null;)p=_,_=g;for(;;){if(_===o)break t;if(p===a&&++f===s&&(h=c),p===l&&++m===u&&(d=c),(g=_.nextSibling)!==null)break;_=p,p=_.parentNode}_=g}a=h===-1||d===-1?null:{start:h,end:d}}else a=null;a=a||{start:0,end:0}}else a=null;hy={focusedElem:o,selectionRange:a},qd=!1,Uu=null,Yd=!1,M=r;do try{WU()}catch(L){if(M===null)throw Error(R(330));ji(M,L),M=M.nextEffect}while(M!==null);Uu=null,M=r;do try{for(o=t;M!==null;){var y=M.flags;if(y&16&&Zu(M.stateNode,""),y&128){var v=M.alternate;if(v!==null){var w=v.ref;w!==null&&(typeof w=="function"?w(null):w.current=null)}}switch(y&1038){case 2:ab(M),M.flags&=-3;break;case 6:ab(M),M.flags&=-3,_y(M.alternate,M);break;case 1024:M.flags&=-1025;break;case 1028:M.flags&=-1025,_y(M.alternate,M);break;case 4:_y(M.alternate,M);break;case 8:a=M,LR(o,a);var O=a.alternate;sb(a),O!==null&&sb(O)}M=M.nextEffect}}catch(L){if(M===null)throw Error(R(330));ji(M,L),M=M.nextEffect}while(M!==null);if(w=hy,v=IS(),y=w.focusedElem,o=w.selectionRange,v!==y&&y&&y.ownerDocument&&eR(y.ownerDocument.documentElement,y)){for(o!==null&&U_(y)&&(v=o.start,w=o.end,w===void 0&&(w=v),"selectionStart"in y?(y.selectionStart=v,y.selectionEnd=Math.min(w,y.value.length)):(w=(v=y.ownerDocument||document)&&v.defaultView||window,w.getSelection&&(w=w.getSelection(),a=y.textContent.length,O=Math.min(o.start,a),o=o.end===void 0?O:Math.min(o.end,a),!w.extend&&O>o&&(a=o,o=O,O=a),a=ES(y,O),s=ES(y,o),a&&s&&(w.rangeCount!==1||w.anchorNode!==a.node||w.anchorOffset!==a.offset||w.focusNode!==s.node||w.focusOffset!==s.offset)&&(v=v.createRange(),v.setStart(a.node,a.offset),w.removeAllRanges(),O>o?(w.addRange(v),w.extend(s.node,s.offset)):(v.setEnd(s.node,s.offset),w.addRange(v)))))),v=[],w=y;w=w.parentNode;)w.nodeType===1&&v.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<v.length;y++)w=v[y],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}qd=!!cy,hy=cy=null,t.current=n,M=r;do try{for(y=t;M!==null;){var A=M.flags;if(A&36&&FU(y,M.alternate,M),A&128){v=void 0;var $=M.ref;if($!==null){var U=M.stateNode;switch(M.tag){case 5:v=U;break;default:v=U}typeof $=="function"?$(v):$.current=v}}M=M.nextEffect}}catch(L){if(M===null)throw Error(R(330));ji(M,L),M=M.nextEffect}while(M!==null);M=null,bU(),W=i}else t.current=n;if(Zi)Zi=!1,Fu=t,Iu=e;else for(M=r;M!==null;)e=M.nextEffect,M.nextEffect=null,M.flags&8&&(A=M,A.sibling=null,A.stateNode=null),M=e;if(r=t.pendingLanes,r===0&&(Tr=null),r===1?t===lv?$u++:($u=0,lv=t):$u=0,n=n.stateNode,Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(sE,n,void 0,(n.current.flags&64)===64)}catch{}if(Qn(t,Vt()),Mf)throw Mf=!1,t=sv,sv=null,t;return(W&8)!==0||Br(),null}function WU(){for(;M!==null;){var t=M.alternate;Yd||Uu===null||((M.flags&8)!==0?aS(M,Uu)&&(Yd=!0):M.tag===13&&$U(t,M)&&aS(M,Uu)&&(Yd=!0));var e=M.flags;(e&256)!==0&&LU(t,M),(e&512)===0||Zi||(Zi=!0,ac(97,function(){return gs(),null})),M=M.nextEffect}}function gs(){if(Iu!==90){var t=97<Iu?97:Iu;return Iu=90,to(t,KU)}return!1}function zU(t,e){ov.push(e,t),Zi||(Zi=!0,ac(97,function(){return gs(),null}))}function WR(t,e){av.push(e,t),Zi||(Zi=!0,ac(97,function(){return gs(),null}))}function KU(){if(Fu===null)return!1;var t=Fu;if(Fu=null,(W&48)!==0)throw Error(R(331));var e=W;W|=32;var n=av;av=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(l){if(s===null)throw Error(R(330));ji(s,l)}}for(n=ov,ov=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var a=i.create;i.destroy=a()}catch(l){if(s===null)throw Error(R(330));ji(s,l)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return W=e,Br(),!0}function ub(t,e,n){e=yE(n,e),e=DR(t,e,1),Ui(t,e),e=Rn(),t=ng(t,1),t!==null&&(Gp(t,1,e),Qn(t,e))}function ji(t,e){if(t.tag===3)ub(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){ub(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tr===null||!Tr.has(r))){t=yE(e,t);var i=MR(n,t,1);if(Ui(n,i),i=Rn(),n=ng(n,1),n!==null)Gp(n,1,i),Qn(n,i);else if(typeof r.componentDidCatch=="function"&&(Tr===null||!Tr.has(r)))try{r.componentDidCatch(e,t)}catch{}break}}n=n.return}}function HU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rn(),t.pingedLanes|=t.suspendedLanes&n,nn===t&&(jt&n)===n&&(bt===4||bt===3&&(jt&62914560)===jt&&500>Vt()-wE?Aa(t,0):vE|=n),Qn(t,e)}function GU(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=Ka()===99?1:2:(Qr===0&&(Qr=Il),e=aa(62914560&~Qr),e===0&&(e=4194304))),n=Rn(),t=ng(t,e),t!==null&&(Gp(t,e,n),Qn(t,n))}var zR;zR=function(t,e,n){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)or=!0;else if((n&r)!==0)or=(t.flags&16384)!==0;else{switch(or=!1,e.tag){case 3:QS(e),gy();break;case 5:VS(e);break;case 1:mn(e.type)&&Kd(e);break;case 4:H_(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;Ne(Tf,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return(n&e.child.childLanes)!==0?YS(t,e,n):(Ne(Re,Re.current&1),e=Jr(t,e,n),e!==null?e.sibling:null);Ne(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&64)!==0){if(r)return tb(t,e,n);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(Re,Re.current),r)break;return null;case 23:case 24:return e.lanes=0,my(t,e,n)}return Jr(t,e,n)}else or=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=za(e,Wt.current),ba(e,n),i=fE(null,e,r,t,i,n),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)){var s=!0;Kd(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uE(e);var o=r.getDerivedStateFromProps;typeof o=="function"&&Cf(e,r,o,t),i.updater=eg,e.stateNode=i,i._reactInternals=e,K_(e,r,t,n),e=X_(null,e,r,!0,s,n)}else e.tag=0,un(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=YU(i),t=rr(i,t),s){case 0:e=Y_(null,e,i,t,n);break e;case 1:e=GS(null,e,i,t,n);break e;case 11:e=KS(null,e,i,t,n);break e;case 14:e=HS(null,e,i,rr(i.type,t),r,n);break e}throw Error(R(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rr(r,i),Y_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rr(r,i),GS(t,e,r,i,n);case 3:if(QS(e),r=e.updateQueue,t===null||r===null)throw Error(R(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,mR(t,e),lc(e,r,null,n),r=e.memoizedState.element,r===i)gy(),e=Jr(t,e,n);else{if(i=e.stateNode,(s=i.hydrate)&&(Oi=Sa(e.stateNode.containerInfo.firstChild),Xr=e,s=Ar=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],Ca.push(s);for(n=wR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else un(t,e,r,n),gy();e=e.child}return e;case 5:return VS(e),t===null&&G_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,j_(r,i)?o=null:s!==null&&j_(r,s)&&(e.flags|=16),NR(t,e),un(t,e,o,n),e.child;case 6:return t===null&&G_(e),null;case 13:return YS(t,e,n);case 4:return H_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kf(e,null,r,n):un(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rr(r,i),KS(t,e,r,i,n);case 7:return un(t,e,e.pendingProps,n),e.child;case 8:return un(t,e,e.pendingProps.children,n),e.child;case 12:return un(t,e,e.pendingProps.children,n),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var a=e.type._context;if(Ne(Tf,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=Fn(a,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===i.children&&!gn.current){e=Jr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r&&(u.observedBits&s)!==0){a.tag===1&&(u=$i(-1,n&-n),u.tag=2,Ui(a,u)),a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),gR(a.return,n),l.lanes|=n;break}u=u.next}}else o=a.tag===10&&a.type===e.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}un(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,r=s.children,ba(e,n),i=Gn(i,s.unstable_observedBits),r=r(i),e.flags|=1,un(t,e,r,n),e.child;case 14:return i=e.type,s=rr(i,e.pendingProps),s=rr(i.type,s),HS(t,e,i,s,r,n);case 15:return RR(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rr(r,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,mn(r)?(t=!0,Kd(e)):t=!1,ba(e,n),_R(e,r,i),K_(e,r,i,n),X_(null,e,r,!0,t,n);case 19:return tb(t,e,n);case 23:return my(t,e,n);case 24:return my(t,e,n)}throw Error(R(156,e.tag))};function QU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,n,r){return new QU(t,e,n,r)}function IE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YU(t){if(typeof t=="function")return IE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zp)return 11;if(t===Kp)return 14}return 2}function es(t,e){var n=t.alternate;return n===null?(n=$n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")IE(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ci:return Ra(n.children,i,s,e);case EA:o=8,i|=16;break;case $w:o=8,i|=1;break;case Au:return t=$n(12,n,e,i|8),t.elementType=Au,t.type=Au,t.lanes=s,t;case Ru:return t=$n(13,n,e,i),t.type=Ru,t.elementType=Ru,t.lanes=s,t;case pf:return t=$n(19,n,e,i),t.elementType=pf,t.lanes=s,t;case Ww:return TE(n,i,s,e);case S_:return t=$n(24,n,e,i),t.elementType=S_,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uw:o=10;break e;case Vw:o=9;break e;case zp:o=11;break e;case Kp:o=14;break e;case Bw:o=16,r=null;break e;case jw:o=22;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=$n(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ra(t,e,n,r){return t=$n(7,t,r,e),t.lanes=n,t}function TE(t,e,n,r){return t=$n(23,t,r,e),t.elementType=Ww,t.lanes=n,t}function vy(t,e,n){return t=$n(6,t,null,e),t.lanes=n,t}function wy(t,e,n){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XU(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=ry(0),this.expirationTimes=ry(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ry(0),this.mutableSourceEagerHydrationData=null}function JU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Lf(t,e,n,r){var i=e.current,s=Rn(),o=Vi(i);e:if(n){n=n._reactInternals;t:{if(Po(n)!==n||n.tag!==1)throw Error(R(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(mn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(R(171))}if(n.tag===1){var l=n.type;if(mn(l)){n=lR(n,l,a);break e}}n=a}else n=Ji;return e.context===null?e.context=n:e.pendingContext=n,e=$i(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),Ui(i,e),Bi(i,o,s),o}function Ey(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function SE(t,e){cb(t,e),(t=t.alternate)&&cb(t,e)}function ZU(){return null}function bE(t,e,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new XU(t,e,n!=null&&n.hydrate===!0),e=$n(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,uE(e),t[El]=n.current,rR(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var i=e._getVersion;i=i(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}bE.prototype.render=function(t){Lf(t,this._internalRoot,null,null)};bE.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Lf(null,t,null,function(){e[El]=null})};function lh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eV(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new bE(t,0,e?{hydrate:!0}:void 0)}function rg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var a=i;i=function(){var u=Ey(o);a.call(u)}}Lf(e,o,t,i)}else{if(s=n._reactRootContainer=eV(n,r),o=s._internalRoot,typeof i=="function"){var l=i;i=function(){var u=Ey(o);l.call(u)}}UR(function(){Lf(e,o,t,i)})}return Ey(o)}LA=function(t){if(t.tag===13){var e=Rn();Bi(t,4,e),SE(t,4)}};Qw=function(t){if(t.tag===13){var e=Rn();Bi(t,67108864,e),SE(t,67108864)}};FA=function(t){if(t.tag===13){var e=Rn(),n=Vi(t);Bi(t,n,e),SE(t,n)}};$A=function(t,e){return e()};D_=function(t,e,n){switch(e){case"input":if(C_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Jp(r);if(!i)throw Error(R(90));TA(r),C_(r,i)}}}break;case"textarea":bA(t,n);break;case"select":e=n.value,e!=null&&Ea(t,!!n.multiple,e,!1)}};Kw=$R;OA=function(t,e,n,r,i){var s=W;W|=4;try{return to(98,t.bind(null,e,n,r,i))}finally{W=s,W===0&&(Sl(),Br())}};Hw=function(){(W&49)===0&&(VU(),gs())};xA=function(t,e){var n=W;W|=2;try{return t(e)}finally{W=n,W===0&&(Sl(),Br())}};function KR(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lh(e))throw Error(R(200));return JU(t,e,null,n)}var tV={Events:[sh,fa,Jp,NA,PA,gs,{current:!1}]},au={findFiberByHostInstance:Ms,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},nV={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:No.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MA(t),t===null?null:t.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||ZU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{sE=_d.inject(nV),Ks=_d}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tV;Zn.createPortal=KR;Zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):Error(R(268,Object.keys(t)));return t=MA(e),t=t===null?null:t.stateNode,t};Zn.flushSync=function(t,e){var n=W;if((n&48)!==0)return t(e);W|=1;try{if(t)return to(99,t.bind(null,e))}finally{W=n,Br()}};Zn.hydrate=function(t,e,n){if(!lh(e))throw Error(R(200));return rg(null,t,e,!0,n)};Zn.render=function(t,e,n){if(!lh(e))throw Error(R(200));return rg(null,t,e,!1,n)};Zn.unmountComponentAtNode=function(t){if(!lh(t))throw Error(R(40));return t._reactRootContainer?(UR(function(){rg(null,null,t,!1,function(){t._reactRootContainer=null,t[El]=null})}),!0):!1};Zn.unstable_batchedUpdates=$R;Zn.unstable_createPortal=function(t,e){return KR(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Zn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lh(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return rg(t,e,n,!1,r)};Zn.version="17.0.2";function HR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HR)}catch(t){console.error(t)}}HR(),Dw.exports=Zn;var Wne=Dw.exports,ts=yA.createContext(null);function rV(t){t()}var GR=rV,iV=function(e){return GR=e},sV=function(){return GR};function oV(){var t=sV(),e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t(function(){for(var i=e;i;)i.callback(),i=i.next})},get:function(){for(var i=[],s=e;s;)i.push(s),s=s.next;return i},subscribe:function(i){var s=!0,o=n={callback:i,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){!s||e===null||(s=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var hb={notify:function(){},get:function(){return[]}};function QR(t,e){var n,r=hb;function i(h){return l(),r.subscribe(h)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return Boolean(n)}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=oV())}function u(){n&&(n(),n=void 0,r.clear(),r=hb)}var c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:u,getListeners:function(){return r}};return c}var cv=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?H.exports.useLayoutEffect:H.exports.useEffect;function zne(t){var e=t.store,n=t.context,r=t.children,i=H.exports.useMemo(function(){var a=QR(e);return a.onStateChange=a.notifyNestedSubs,{store:e,subscription:a}},[e]),s=H.exports.useMemo(function(){return e.getState()},[e]);cv(function(){var a=i.subscription;return a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),function(){a.tryUnsubscribe(),a.onStateChange=null}},[i,s]);var o=n||ts;return yA.createElement(o.Provider,{value:i},r)}function Ff(){return Ff=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ff.apply(this,arguments)}var YR={exports:{}},le={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft=typeof Symbol=="function"&&Symbol.for,CE=ft?Symbol.for("react.element"):60103,kE=ft?Symbol.for("react.portal"):60106,ig=ft?Symbol.for("react.fragment"):60107,sg=ft?Symbol.for("react.strict_mode"):60108,og=ft?Symbol.for("react.profiler"):60114,ag=ft?Symbol.for("react.provider"):60109,lg=ft?Symbol.for("react.context"):60110,AE=ft?Symbol.for("react.async_mode"):60111,ug=ft?Symbol.for("react.concurrent_mode"):60111,cg=ft?Symbol.for("react.forward_ref"):60112,hg=ft?Symbol.for("react.suspense"):60113,aV=ft?Symbol.for("react.suspense_list"):60120,dg=ft?Symbol.for("react.memo"):60115,fg=ft?Symbol.for("react.lazy"):60116,lV=ft?Symbol.for("react.block"):60121,uV=ft?Symbol.for("react.fundamental"):60117,cV=ft?Symbol.for("react.responder"):60118,hV=ft?Symbol.for("react.scope"):60119;function Mn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case CE:switch(t=t.type,t){case AE:case ug:case ig:case og:case sg:case hg:return t;default:switch(t=t&&t.$$typeof,t){case lg:case cg:case fg:case dg:case ag:return t;default:return e}}case kE:return e}}}function XR(t){return Mn(t)===ug}le.AsyncMode=AE;le.ConcurrentMode=ug;le.ContextConsumer=lg;le.ContextProvider=ag;le.Element=CE;le.ForwardRef=cg;le.Fragment=ig;le.Lazy=fg;le.Memo=dg;le.Portal=kE;le.Profiler=og;le.StrictMode=sg;le.Suspense=hg;le.isAsyncMode=function(t){return XR(t)||Mn(t)===AE};le.isConcurrentMode=XR;le.isContextConsumer=function(t){return Mn(t)===lg};le.isContextProvider=function(t){return Mn(t)===ag};le.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===CE};le.isForwardRef=function(t){return Mn(t)===cg};le.isFragment=function(t){return Mn(t)===ig};le.isLazy=function(t){return Mn(t)===fg};le.isMemo=function(t){return Mn(t)===dg};le.isPortal=function(t){return Mn(t)===kE};le.isProfiler=function(t){return Mn(t)===og};le.isStrictMode=function(t){return Mn(t)===sg};le.isSuspense=function(t){return Mn(t)===hg};le.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ig||t===ug||t===og||t===sg||t===hg||t===aV||typeof t=="object"&&t!==null&&(t.$$typeof===fg||t.$$typeof===dg||t.$$typeof===ag||t.$$typeof===lg||t.$$typeof===cg||t.$$typeof===uV||t.$$typeof===cV||t.$$typeof===hV||t.$$typeof===lV)};le.typeOf=Mn;YR.exports=le;var JR=YR.exports,dV={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ZR={};ZR[JR.ForwardRef]=dV;ZR[JR.Memo]=fV;var pe={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=60103,gg=60106,uh=60107,ch=60108,hh=60114,dh=60109,fh=60110,ph=60112,gh=60113,RE=60120,mh=60115,yh=60116,eN=60121,tN=60122,nN=60117,rN=60129,iN=60131;if(typeof Symbol=="function"&&Symbol.for){var vt=Symbol.for;pg=vt("react.element"),gg=vt("react.portal"),uh=vt("react.fragment"),ch=vt("react.strict_mode"),hh=vt("react.profiler"),dh=vt("react.provider"),fh=vt("react.context"),ph=vt("react.forward_ref"),gh=vt("react.suspense"),RE=vt("react.suspense_list"),mh=vt("react.memo"),yh=vt("react.lazy"),eN=vt("react.block"),tN=vt("react.server.block"),nN=vt("react.fundamental"),rN=vt("react.debug_trace_mode"),iN=vt("react.legacy_hidden")}function pr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case pg:switch(t=t.type,t){case uh:case hh:case ch:case gh:case RE:return t;default:switch(t=t&&t.$$typeof,t){case fh:case ph:case yh:case mh:case dh:return t;default:return e}}case gg:return e}}}var pV=dh,gV=pg,mV=ph,yV=uh,_V=yh,vV=mh,wV=gg,EV=hh,IV=ch,TV=gh;pe.ContextConsumer=fh;pe.ContextProvider=pV;pe.Element=gV;pe.ForwardRef=mV;pe.Fragment=yV;pe.Lazy=_V;pe.Memo=vV;pe.Portal=wV;pe.Profiler=EV;pe.StrictMode=IV;pe.Suspense=TV;pe.isAsyncMode=function(){return!1};pe.isConcurrentMode=function(){return!1};pe.isContextConsumer=function(t){return pr(t)===fh};pe.isContextProvider=function(t){return pr(t)===dh};pe.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===pg};pe.isForwardRef=function(t){return pr(t)===ph};pe.isFragment=function(t){return pr(t)===uh};pe.isLazy=function(t){return pr(t)===yh};pe.isMemo=function(t){return pr(t)===mh};pe.isPortal=function(t){return pr(t)===gg};pe.isProfiler=function(t){return pr(t)===hh};pe.isStrictMode=function(t){return pr(t)===ch};pe.isSuspense=function(t){return pr(t)===gh};pe.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uh||t===hh||t===rN||t===ch||t===gh||t===RE||t===iN||typeof t=="object"&&t!==null&&(t.$$typeof===yh||t.$$typeof===mh||t.$$typeof===dh||t.$$typeof===fh||t.$$typeof===ph||t.$$typeof===nN||t.$$typeof===eN||t[0]===tN)};pe.typeOf=pr;function sN(){var t=H.exports.useContext(ts);return t}function oN(t){t===void 0&&(t=ts);var e=t===ts?sN:function(){return H.exports.useContext(t)};return function(){var r=e(),i=r.store;return i}}var SV=oN();function bV(t){t===void 0&&(t=ts);var e=t===ts?SV:oN(t);return function(){var r=e();return r.dispatch}}var Kne=bV(),CV=function(e,n){return e===n};function kV(t,e,n,r){var i=H.exports.useReducer(function(m){return m+1},0),s=i[1],o=H.exports.useMemo(function(){return QR(n,r)},[n,r]),a=H.exports.useRef(),l=H.exports.useRef(),u=H.exports.useRef(),c=H.exports.useRef(),h=n.getState(),d;try{if(t!==l.current||h!==u.current||a.current){var f=t(h);c.current===void 0||!e(f,c.current)?d=f:d=c.current}else d=c.current}catch(m){throw a.current&&(m.message+=`
The error may be correlated with this previous error:
`+a.current.stack+`

`),m}return cv(function(){l.current=t,u.current=h,c.current=d,a.current=void 0}),cv(function(){function m(){try{var _=n.getState();if(_===u.current)return;var p=l.current(_);if(e(p,c.current))return;c.current=p,u.current=_}catch(g){a.current=g}s()}return o.onStateChange=m,o.trySubscribe(),m(),function(){return o.tryUnsubscribe()}},[n,o]),d}function AV(t){t===void 0&&(t=ts);var e=t===ts?sN:function(){return H.exports.useContext(t)};return function(r,i){i===void 0&&(i=CV);var s=e(),o=s.store,a=s.subscription,l=kV(r,i,o,a);return H.exports.useDebugValue(l),l}}var Hne=AV();iV(Dw.exports.unstable_batchedUpdates);var $s,NE=$s||($s={});NE.Pop="POP";NE.Push="PUSH";NE.Replace="REPLACE";var db=function(t){return t};function fb(t){t.preventDefault(),t.returnValue=""}function pb(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter(function(n){return n!==e})}},call:function(e){t.forEach(function(n){return n&&n(e)})}}}function RV(){return Math.random().toString(36).substr(2,8)}function NV(t){var e=t.pathname;e=e===void 0?"/":e;var n=t.search;return n=n===void 0?"":n,t=t.hash,t=t===void 0?"":t,n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),t&&t!=="#"&&(e+=t.charAt(0)==="#"?t:"#"+t),e}function bl(t){var e={};if(t){var n=t.indexOf("#");0<=n&&(e.hash=t.substr(n),t=t.substr(0,n)),n=t.indexOf("?"),0<=n&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function PV(t){function e(){var p=l.location,g=u.state||{};return[g.idx,db({pathname:p.pathname,search:p.search,hash:p.hash,state:g.usr||null,key:g.key||"default"})]}function n(p){return typeof p=="string"?p:NV(p)}function r(p,g){return g===void 0&&(g=null),db(Ff({pathname:f.pathname,hash:"",search:""},typeof p=="string"?bl(p):p,{state:g,key:RV()}))}function i(p){h=p,p=e(),d=p[0],f=p[1],m.call({action:h,location:f})}function s(p,g){function y(){s(p,g)}var v=$s.Push,w=r(p,g);if(!_.length||(_.call({action:v,location:w,retry:y}),!1)){var O=[{usr:w.state,key:w.key,idx:d+1},n(w)];w=O[0],O=O[1];try{u.pushState(w,"",O)}catch{l.location.assign(O)}i(v)}}function o(p,g){function y(){o(p,g)}var v=$s.Replace,w=r(p,g);_.length&&(_.call({action:v,location:w,retry:y}),1)||(w=[{usr:w.state,key:w.key,idx:d},n(w)],u.replaceState(w[0],"",w[1]),i(v))}function a(p){u.go(p)}t===void 0&&(t={}),t=t.window;var l=t===void 0?document.defaultView:t,u=l.history,c=null;l.addEventListener("popstate",function(){if(c)_.call(c),c=null;else{var p=$s.Pop,g=e(),y=g[0];if(g=g[1],_.length){if(y!=null){var v=d-y;v&&(c={action:p,location:g,retry:function(){a(-1*v)}},a(v))}}else i(p)}});var h=$s.Pop;t=e();var d=t[0],f=t[1],m=pb(),_=pb();return d==null&&(d=0,u.replaceState(Ff({},u.state,{idx:d}),"")),{get action(){return h},get location(){return f},createHref:n,push:s,replace:o,go:a,back:function(){a(-1)},forward:function(){a(1)},listen:function(p){return m.push(p)},block:function(p){var g=_.push(p);return _.length===1&&l.addEventListener("beforeunload",fb),function(){g(),_.length||l.removeEventListener("beforeunload",fb)}}}}/**
 * React Router v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ci(t,e){if(!t)throw new Error(e)}const aN=H.exports.createContext(null),PE=H.exports.createContext(null),mg=H.exports.createContext({outlet:null,matches:[]});function OV(t){return LV(t.context)}function xV(t){ci(!1)}function DV(t){let{basename:e="/",children:n=null,location:r,navigationType:i=$s.Pop,navigator:s,static:o=!1}=t;yg()&&ci(!1);let a=nB(e),l=H.exports.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=bl(r));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=r,m=H.exports.useMemo(()=>{let _=cN(u,a);return _==null?null:{pathname:_,search:c,hash:h,state:d,key:f}},[a,u,c,h,d,f]);return m==null?null:H.exports.createElement(aN.Provider,{value:l},H.exports.createElement(PE.Provider,{children:n,value:{location:m,navigationType:i}}))}function Gne(t){let{children:e,location:n}=t;return FV(hv(e),n)}function yg(){return H.exports.useContext(PE)!=null}function lN(){return yg()||ci(!1),H.exports.useContext(PE).location}function Qne(){yg()||ci(!1);let{basename:t,navigator:e}=H.exports.useContext(aN),{matches:n}=H.exports.useContext(mg),{pathname:r}=lN(),i=JSON.stringify(n.map(a=>a.pathnameBase)),s=H.exports.useRef(!1);return H.exports.useEffect(()=>{s.current=!0}),H.exports.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let u=tB(a,JSON.parse(i),r);t!=="/"&&(u.pathname=Hs([t,u.pathname])),(l.replace?e.replace:e.push)(u,l.state)},[t,e,i,r])}const MV=H.exports.createContext(null);function LV(t){let e=H.exports.useContext(mg).outlet;return e&&H.exports.createElement(MV.Provider,{value:t},e)}function FV(t,e){yg()||ci(!1);let{matches:n}=H.exports.useContext(mg),r=n[n.length-1],i=r?r.params:{};r&&r.pathname;let s=r?r.pathnameBase:"/";r&&r.route;let o=lN(),a;if(e){var l;let d=typeof e=="string"?bl(e):e;s==="/"||((l=d.pathname)==null?void 0:l.startsWith(s))||ci(!1),a=d}else a=o;let u=a.pathname||"/",c=s==="/"?u:u.slice(s.length)||"/",h=$V(t,{pathname:c});return QV(h&&h.map(d=>Object.assign({},d,{params:Object.assign({},i,d.params),pathname:Hs([s,d.pathname]),pathnameBase:d.pathnameBase==="/"?s:Hs([s,d.pathnameBase])})),n)}function hv(t){let e=[];return H.exports.Children.forEach(t,n=>{if(!H.exports.isValidElement(n))return;if(n.type===H.exports.Fragment){e.push.apply(e,hv(n.props.children));return}n.type!==xV&&ci(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=hv(n.props.children)),e.push(r)}),e}function $V(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?bl(e):e,i=cN(r.pathname||"/",n);if(i==null)return null;let s=uN(t);UV(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=GV(s[a],i);return o}function uN(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((i,s)=>{let o={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||ci(!1),o.relativePath=o.relativePath.slice(r.length));let a=Hs([r,o.relativePath]),l=n.concat(o);i.children&&i.children.length>0&&(i.index===!0&&ci(!1),uN(i.children,e,l,a)),!(i.path==null&&!i.index)&&e.push({path:a,score:KV(a,i.index),routesMeta:l})}),e}function UV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:HV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const VV=/^:\w+$/,BV=3,jV=2,qV=1,WV=10,zV=-2,gb=t=>t==="*";function KV(t,e){let n=t.split("/"),r=n.length;return n.some(gb)&&(r+=zV),e&&(r+=jV),n.filter(i=>!gb(i)).reduce((i,s)=>i+(VV.test(s)?BV:s===""?qV:WV),r)}function HV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function GV(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=YV({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;s.push({params:r,pathname:Hs([i,c.pathname]),pathnameBase:Hs([i,c.pathnameBase]),route:h}),c.pathnameBase!=="/"&&(i=Hs([i,c.pathnameBase]))}return s}function QV(t,e){return e===void 0&&(e=[]),t==null?null:t.reduceRight((n,r,i)=>H.exports.createElement(mg.Provider,{children:r.route.element!==void 0?r.route.element:H.exports.createElement(OV,null),value:{outlet:n,matches:e.concat(t.slice(0,i+1))}}),null)}function YV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=XV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{if(c==="*"){let d=a[h]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return u[c]=JV(a[h]||""),u},{}),pathname:s,pathnameBase:o,pattern:t}}function XV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)",[new RegExp(i,e?void 0:"i"),r]}function JV(t,e){try{return decodeURIComponent(t)}catch{return t}}function ZV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?bl(t):t;return{pathname:n?n.startsWith("/")?n:eB(n,e):e,search:rB(r),hash:iB(i)}}function eB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function tB(t,e,n){let r=typeof t=="string"?bl(t):t,i=t===""||r.pathname===""?"/":r.pathname,s;if(i==null)s=n;else{let a=e.length-1;if(i.startsWith("..")){let l=i.split("/");for(;l[0]==="..";)l.shift(),a-=1;r.pathname=l.join("/")}s=a>=0?e[a]:"/"}let o=ZV(r,s);return i&&i!=="/"&&i.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function cN(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=t.charAt(e.length);return n&&n!=="/"?null:t.slice(e.length)||"/"}const Hs=t=>t.join("/").replace(/\/\/+/g,"/"),nB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;/**
 * React Router DOM v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yne(t){let{basename:e,children:n,window:r}=t,i=H.exports.useRef();i.current==null&&(i.current=PV({window:r}));let s=i.current,[o,a]=H.exports.useState({action:s.action,location:s.location});return H.exports.useLayoutEffect(()=>s.listen(a),[s]),H.exports.createElement(DV,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}var hN={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(!!s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&r.push(a)}}else if(o==="object")if(s.toString===Object.prototype.toString)for(var l in s)e.call(s,l)&&s[l]&&r.push(l);else r.push(s.toString())}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(hN);var Xne=hN.exports,OE={exports:{}},dN=function(e,n){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(n,i)}},sB=dN,ms=Object.prototype.toString;function xE(t){return Array.isArray(t)}function dv(t){return typeof t=="undefined"}function oB(t){return t!==null&&!dv(t)&&t.constructor!==null&&!dv(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function fN(t){return ms.call(t)==="[object ArrayBuffer]"}function aB(t){return ms.call(t)==="[object FormData]"}function lB(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&fN(t.buffer),e}function uB(t){return typeof t=="string"}function cB(t){return typeof t=="number"}function pN(t){return t!==null&&typeof t=="object"}function Jd(t){if(ms.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function hB(t){return ms.call(t)==="[object Date]"}function dB(t){return ms.call(t)==="[object File]"}function fB(t){return ms.call(t)==="[object Blob]"}function gN(t){return ms.call(t)==="[object Function]"}function pB(t){return pN(t)&&gN(t.pipe)}function gB(t){return ms.call(t)==="[object URLSearchParams]"}function mB(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function yB(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function DE(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),xE(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function fv(){var t={};function e(i,s){Jd(t[s])&&Jd(i)?t[s]=fv(t[s],i):Jd(i)?t[s]=fv({},i):xE(i)?t[s]=i.slice():t[s]=i}for(var n=0,r=arguments.length;n<r;n++)DE(arguments[n],e);return t}function _B(t,e,n){return DE(e,function(i,s){n&&typeof i=="function"?t[s]=sB(i,n):t[s]=i}),t}function vB(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var _n={isArray:xE,isArrayBuffer:fN,isBuffer:oB,isFormData:aB,isArrayBufferView:lB,isString:uB,isNumber:cB,isObject:pN,isPlainObject:Jd,isUndefined:dv,isDate:hB,isFile:dB,isBlob:fB,isFunction:gN,isStream:pB,isURLSearchParams:gB,isStandardBrowserEnv:yB,forEach:DE,merge:fv,extend:_B,trim:mB,stripBOM:vB},Jo=_n;function mb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var mN=function(e,n,r){if(!n)return e;var i;if(r)i=r(n);else if(Jo.isURLSearchParams(n))i=n.toString();else{var s=[];Jo.forEach(n,function(l,u){l===null||typeof l=="undefined"||(Jo.isArray(l)?u=u+"[]":l=[l],Jo.forEach(l,function(h){Jo.isDate(h)?h=h.toISOString():Jo.isObject(h)&&(h=JSON.stringify(h)),s.push(mb(u)+"="+mb(h))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},wB=_n;function _g(){this.handlers=[]}_g.prototype.use=function(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};_g.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};_g.prototype.forEach=function(e){wB.forEach(this.handlers,function(r){r!==null&&e(r)})};var EB=_g,IB=_n,TB=function(e,n){IB.forEach(e,function(i,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(e[n]=i,delete e[s])})},yN=function(e,n,r,i,s){return e.config=n,r&&(e.code=r),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},SB=yN,_N=function(e,n,r,i,s){var o=new Error(e);return SB(o,n,r,i,s)},bB=_N,CB=function(e,n,r){var i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):n(bB("Request failed with status code "+r.status,r.config,null,r.request,r))},vd=_n,kB=vd.isStandardBrowserEnv()?function(){return{write:function(n,r,i,s,o,a){var l=[];l.push(n+"="+encodeURIComponent(r)),vd.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),vd.isString(s)&&l.push("path="+s),vd.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),AB=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},RB=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},NB=AB,PB=RB,OB=function(e,n){return e&&!NB(n)?PB(e,n):n},Iy=_n,xB=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],DB=function(e){var n={},r,i,s;return e&&Iy.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),r=Iy.trim(a.substr(0,s)).toLowerCase(),i=Iy.trim(a.substr(s+1)),r){if(n[r]&&xB.indexOf(r)>=0)return;r==="set-cookie"?n[r]=(n[r]?n[r]:[]).concat([i]):n[r]=n[r]?n[r]+", "+i:i}}),n},yb=_n,MB=yb.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),r;function i(s){var o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){var a=yb.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function ME(t){this.message=t}ME.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ME.prototype.__CANCEL__=!0;var vg=ME,wd=_n,LB=CB,FB=kB,$B=mN,UB=OB,VB=DB,BB=MB,Ty=_N,jB=Eg,qB=vg,_b=function(e){return new Promise(function(r,i){var s=e.data,o=e.headers,a=e.responseType,l;function u(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}wd.isFormData(s)&&delete o["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(h+":"+d)}var f=UB(e.baseURL,e.url);c.open(e.method.toUpperCase(),$B(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function m(){if(!!c){var p="getAllResponseHeaders"in c?VB(c.getAllResponseHeaders()):null,g=!a||a==="text"||a==="json"?c.responseText:c.response,y={data:g,status:c.status,statusText:c.statusText,headers:p,config:e,request:c};LB(function(w){r(w),u()},function(w){i(w),u()},y),c=null}}if("onloadend"in c?c.onloadend=m:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(m)},c.onabort=function(){!c||(i(Ty("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(Ty("Network Error",e,null,c)),c=null},c.ontimeout=function(){var g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",y=e.transitional||jB.transitional;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),i(Ty(g,e,y.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},wd.isStandardBrowserEnv()){var _=(e.withCredentials||BB(f))&&e.xsrfCookieName?FB.read(e.xsrfCookieName):void 0;_&&(o[e.xsrfHeaderName]=_)}"setRequestHeader"in c&&wd.forEach(o,function(g,y){typeof s=="undefined"&&y.toLowerCase()==="content-type"?delete o[y]:c.setRequestHeader(y,g)}),wd.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&a!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(l=function(p){!c||(i(!p||p&&p.type?new qB("canceled"):p),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l))),s||(s=null),c.send(s)})},Et=_n,vb=TB,WB=yN,zB={"Content-Type":"application/x-www-form-urlencoded"};function wb(t,e){!Et.isUndefined(t)&&Et.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function KB(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=_b),t}function HB(t,e,n){if(Et.isString(t))try{return(e||JSON.parse)(t),Et.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}var wg={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:KB(),transformRequest:[function(e,n){return vb(n,"Accept"),vb(n,"Content-Type"),Et.isFormData(e)||Et.isArrayBuffer(e)||Et.isBuffer(e)||Et.isStream(e)||Et.isFile(e)||Et.isBlob(e)?e:Et.isArrayBufferView(e)?e.buffer:Et.isURLSearchParams(e)?(wb(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Et.isObject(e)||n&&n["Content-Type"]==="application/json"?(wb(n,"application/json"),HB(e)):e}],transformResponse:[function(e){var n=this.transitional||wg.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,s=!r&&this.responseType==="json";if(s||i&&Et.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?WB(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Et.forEach(["delete","get","head"],function(e){wg.headers[e]={}});Et.forEach(["post","put","patch"],function(e){wg.headers[e]=Et.merge(zB)});var Eg=wg,GB=_n,QB=Eg,YB=function(e,n,r){var i=this||QB;return GB.forEach(r,function(o){e=o.call(i,e,n)}),e},vN=function(e){return!!(e&&e.__CANCEL__)},Eb=_n,Sy=YB,XB=vN,JB=Eg,ZB=vg;function by(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ZB("canceled")}var e2=function(e){by(e),e.headers=e.headers||{},e.data=Sy.call(e,e.data,e.headers,e.transformRequest),e.headers=Eb.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Eb.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var n=e.adapter||JB.adapter;return n(e).then(function(i){return by(e),i.data=Sy.call(e,i.data,i.headers,e.transformResponse),i},function(i){return XB(i)||(by(e),i&&i.response&&(i.response.data=Sy.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},wn=_n,wN=function(e,n){n=n||{};var r={};function i(c,h){return wn.isPlainObject(c)&&wn.isPlainObject(h)?wn.merge(c,h):wn.isPlainObject(h)?wn.merge({},h):wn.isArray(h)?h.slice():h}function s(c){if(wn.isUndefined(n[c])){if(!wn.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],n[c])}function o(c){if(!wn.isUndefined(n[c]))return i(void 0,n[c])}function a(c){if(wn.isUndefined(n[c])){if(!wn.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,n[c])}function l(c){if(c in n)return i(e[c],n[c]);if(c in e)return i(void 0,e[c])}var u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return wn.forEach(Object.keys(e).concat(Object.keys(n)),function(h){var d=u[h]||s,f=d(h);wn.isUndefined(f)&&d!==l||(r[h]=f)}),r},EN={version:"0.26.0"},t2=EN.version,LE={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){LE[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var Ib={};LE.transitional=function(e,n,r){function i(s,o){return"[Axios v"+t2+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(n?" in "+n:"")));return n&&!Ib[o]&&(Ib[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function n2(t,e,n){if(typeof t!="object")throw new TypeError("options must be an object");for(var r=Object.keys(t),i=r.length;i-- >0;){var s=r[i],o=e[s];if(o){var a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(n!==!0)throw Error("Unknown option "+s)}}var r2={assertOptions:n2,validators:LE},IN=_n,i2=mN,Tb=EB,Sb=e2,Ig=wN,TN=r2,Zo=TN.validators;function _h(t){this.defaults=t,this.interceptors={request:new Tb,response:new Tb}}_h.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ig(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&TN.assertOptions(r,{silentJSONParsing:Zo.transitional(Zo.boolean),forcedJSONParsing:Zo.transitional(Zo.boolean),clarifyTimeoutError:Zo.transitional(Zo.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(s=s&&f.synchronous,i.unshift(f.fulfilled,f.rejected))});var o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});var a;if(!s){var l=[Sb,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),a=Promise.resolve(n);l.length;)a=a.then(l.shift(),l.shift());return a}for(var u=n;i.length;){var c=i.shift(),h=i.shift();try{u=c(u)}catch(d){h(d);break}}try{a=Sb(u)}catch(d){return Promise.reject(d)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};_h.prototype.getUri=function(e){return e=Ig(this.defaults,e),i2(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};IN.forEach(["delete","get","head","options"],function(e){_h.prototype[e]=function(n,r){return this.request(Ig(r||{},{method:e,url:n,data:(r||{}).data}))}});IN.forEach(["post","put","patch"],function(e){_h.prototype[e]=function(n,r,i){return this.request(Ig(i||{},{method:e,url:n,data:r}))}});var s2=_h,o2=vg;function Ga(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var n=this;this.promise.then(function(r){if(!!n._listeners){var i,s=n._listeners.length;for(i=0;i<s;i++)n._listeners[i](r);n._listeners=null}}),this.promise.then=function(r){var i,s=new Promise(function(o){n.subscribe(o),i=o}).then(r);return s.cancel=function(){n.unsubscribe(i)},s},t(function(i){n.reason||(n.reason=new o2(i),e(n.reason))})}Ga.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Ga.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Ga.prototype.unsubscribe=function(e){if(!!this._listeners){var n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}};Ga.source=function(){var e,n=new Ga(function(i){e=i});return{token:n,cancel:e}};var a2=Ga,l2=function(e){return function(r){return e.apply(null,r)}},u2=_n,c2=function(e){return u2.isObject(e)&&e.isAxiosError===!0},bb=_n,h2=dN,Zd=s2,d2=wN,f2=Eg;function SN(t){var e=new Zd(t),n=h2(Zd.prototype.request,e);return bb.extend(n,Zd.prototype,e),bb.extend(n,e),n.create=function(i){return SN(d2(t,i))},n}var jr=SN(f2);jr.Axios=Zd;jr.Cancel=vg;jr.CancelToken=a2;jr.isCancel=vN;jr.VERSION=EN.version;jr.all=function(e){return Promise.all(e)};jr.spread=l2;jr.isAxiosError=c2;OE.exports=jr;OE.exports.default=jr;var Jne=OE.exports;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k=function(t,e){if(!t)throw Cl(e)},Cl=function(t){return new Error("Firebase Database ("+bN.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},p2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Tg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,f=u&63;l||(f=64,o||(d=64)),r.push(n[c],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):p2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw Error();const d=s<<2|a>>4;if(r.push(d),u!==64){const f=a<<4&240|u>>2;if(r.push(f),h!==64){const m=u<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},kN=function(t){const e=CN(t);return Tg.encodeByteArray(e,!0)},Cb=function(t){return kN(t).replace(/\./g,"")},pv=function(t){try{return Tg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){return dc(void 0,t)}function dc(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!m2(n)||(t[n]=dc(t[n],e[n]));return t}function m2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Cb(JSON.stringify(n)),Cb(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sg(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ve())}function $E(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y2(){return typeof self=="object"&&self.self===self}function vh(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _2(){return ve().indexOf("Electron/")>=0}function UE(){const t=ve();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v2(){return ve().indexOf("MSAppHost/")>=0}function AN(){return bN.NODE_ADMIN===!0}function w2(){return!$E()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nn(){return typeof indexedDB=="object"}function bg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Cg(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}function E2(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="FirebaseError";class Me extends Error{constructor(e,n,r){super(n);this.code=e,this.customData=r,this.name=I2,Object.setPrototypeOf(this,Me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,an.prototype.create)}}class an{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?T2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Me(i,a,r)}}function T2(t,e){return t.replace(S2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const S2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){return JSON.parse(t)}function ze(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=fc(pv(s[0])||""),n=fc(pv(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},b2=function(t){const e=VE(t).claims;return typeof e=="object"&&e.hasOwnProperty("iat")?e.iat:null},C2=function(t){const e=VE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},k2=function(t){const e=VE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ro(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function $f(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function gv(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(kb(s)&&kb(o)){if(!gv(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function kb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ma(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Su(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,c;for(let h=0;h<80;h++){h<40?h<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):h<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const d=(i<<5|i>>>27)+u+l+c+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function RN(t,e){const n=new R2(t,e);return n.subscribe.bind(n)}class R2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");N2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Cy),i.error===void 0&&(i.error=Cy),i.complete===void 0&&(i.complete=Cy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cy(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=function(t,e,n,r){let i;if(r<e?i="at least "+e:r>n&&(i=n===0?"none":"no more than "+n),i){const s=t+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function yn(t,e){return`${t} failed: ${e} argument `}function Je(t,e,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(yn(t,e)+"must be a valid function.")}function Ab(t,e,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(yn(t,e)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,k(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},kg=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=1e3,x2=2,D2=4*60*60*1e3,M2=.5;function Vf(t,e=O2,n=x2){const r=e*Math.pow(n,t),i=Math.round(M2*r*(Math.random()-.5)*2);return Math.min(D2,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(t){return t&&t._delegate?t._delegate:t}class se{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new We;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F2(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L2(t){return t===ks?void 0:t}function F2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new NN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=[];var G;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(G||(G={}));const ON={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},$2=G.INFO,U2={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},V2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=U2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qr{constructor(e){this.name=e,this._logLevel=$2,this._logHandler=V2,this._userLogHandler=null,BE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ON[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}}function B2(t){BE.forEach(e=>{e.setLogLevel(t)})}function j2(t,e){for(const n of BE){let r=null;e&&e.level&&(r=ON[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r!=null?r:i.logLevel)&&t({level:G[s].toLowerCase(),message:a,args:o,type:i.name})}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function W2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mv="@firebase/app",Rb="0.7.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new qr("@firebase/app"),z2="@firebase/app-compat",K2="@firebase/analytics-compat",H2="@firebase/analytics",G2="@firebase/app-check-compat",Q2="@firebase/app-check",Y2="@firebase/auth",X2="@firebase/auth-compat",J2="@firebase/database",Z2="@firebase/database-compat",ej="@firebase/functions",tj="@firebase/functions-compat",nj="@firebase/installations",rj="@firebase/installations-compat",ij="@firebase/messaging",sj="@firebase/messaging-compat",oj="@firebase/performance",aj="@firebase/performance-compat",lj="@firebase/remote-config",uj="@firebase/remote-config-compat",cj="@firebase/storage",hj="@firebase/storage-compat",dj="@firebase/firestore",fj="@firebase/firestore-compat",pj="firebase",gj="9.6.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]",mj={[mv]:"fire-core",[z2]:"fire-core-compat",[H2]:"fire-analytics",[K2]:"fire-analytics-compat",[Q2]:"fire-app-check",[G2]:"fire-app-check-compat",[Y2]:"fire-auth",[X2]:"fire-auth-compat",[J2]:"fire-rtdb",[Z2]:"fire-rtdb-compat",[ej]:"fire-fn",[tj]:"fire-fn-compat",[nj]:"fire-iid",[rj]:"fire-iid-compat",[ij]:"fire-fcm",[sj]:"fire-fcm-compat",[oj]:"fire-perf",[aj]:"fire-perf-compat",[lj]:"fire-rc",[uj]:"fire-rc-compat",[cj]:"fire-gcs",[hj]:"fire-gcs-compat",[dj]:"fire-fst",[fj]:"fire-fst-compat","fire-js":"fire-js",[pj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Map,pc=new Map;function Bf(t,e){try{t.container.addComponent(e)}catch(n){jE.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xN(t,e){t.container.addOrOverwriteComponent(e)}function Le(t){const e=t.name;if(pc.has(e))return jE.debug(`There were multiple attempts to register component ${e}.`),!1;pc.set(e,t);for(const n of ns.values())Bf(n,t);return!0}function Do(t,e){return t.container.getProvider(e)}function yj(t,e,n=io){Do(t,e).clearInstance(n)}function _j(){pc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},gc=new an("app","Firebase",vj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new se("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=gj;function DN(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:io,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw gc.create("bad-app-name",{appName:String(r)});const i=ns.get(r);if(i){if(gv(t,i.options)&&gv(n,i.config))return i;throw gc.create("duplicate-app",{appName:r})}const s=new PN(r);for(const a of pc.values())s.addComponent(a);const o=new wj(t,n,s);return ns.set(r,o),o}function MN(t=io){const e=ns.get(t);if(!e)throw gc.create("no-app",{appName:t});return e}function Ej(){return Array.from(ns.values())}async function LN(t){const e=t.name;ns.has(e)&&(ns.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function ce(t,e,n){var r;let i=(r=mj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jE.warn(a.join(" "));return}Le(new se(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function FN(t,e){if(t!==null&&typeof t!="function")throw gc.create("invalid-log-argument");j2(t,e)}function $N(t){B2(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){Le(new se("platform-logger",e=>new q2(e),"PRIVATE")),ce(mv,Rb,t),ce(mv,Rb,"esm2017"),ce("fire-js","")}Ij("");var Tj=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",SDK_VERSION:Wr,_DEFAULT_ENTRY_NAME:io,_addComponent:Bf,_addOrOverwriteComponent:xN,_apps:ns,_clearComponents:_j,_components:pc,_getProvider:Do,_registerComponent:Le,_removeServiceInstance:yj,deleteApp:LN,getApp:MN,getApps:Ej,initializeApp:DN,onLog:FN,registerVersion:ce,setLogLevel:$N,FirebaseError:Me});/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n){this._delegate=e,this.firebase=n,Bf(e,new se("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),LN(this._delegate)))}_getService(e,n=io){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=io){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Bf(this._delegate,e)}_addOrOverwriteComponent(e){xN(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},Nb=new an("app-compat","Firebase",bj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:ce,setLogLevel:$N,onLog:FN,apps:null,SDK_VERSION:Wr,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:Tj}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||io,!Pn(e,u))throw Nb.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const h=DN(u,c);if(Pn(e,h.name))return e[h.name];const d=new t(h,n);return e[h.name]=d,d}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,h=c.replace("-compat","");if(Le(u)&&u.type==="PUBLIC"){const d=(f=i())=>{if(typeof f[h]!="function")throw Nb.create("invalid-app-argument",{appName:c});return f[h]()};u.serviceProps!==void 0&&dc(d,u.serviceProps),n[h]=d,t.prototype[h]=function(...f){return this._getService.bind(this,c).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){const t=Cj(Sj);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:UN,extendNamespace:e,createSubscribe:RN,ErrorFactory:an,deepExtend:dc});function e(n){dc(t,n)}return t}const kj=UN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new qr("@firebase/app-compat"),Aj="@firebase/app-compat",Rj="0.1.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){ce(Aj,Rj,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(y2()&&self.firebase!==void 0){Pb.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Pb.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const pt=kj;Nj();function Pj(t){return Array.prototype.slice.call(t)}function VN(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function Ag(t,e,n){var r,i=new Promise(function(s,o){r=t[e].apply(t,n),VN(r).then(s,o)});return i.request=r,i}function Oj(t,e,n){var r=Ag(t,e,n);return r.then(function(i){if(!!i)return new mc(i,r.request)})}function kl(t,e,n){n.forEach(function(r){Object.defineProperty(t.prototype,r,{get:function(){return this[e][r]},set:function(i){this[e][r]=i}})})}function qE(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return Ag(this[e],i,arguments)})})}function Rg(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return this[e][i].apply(this[e],arguments)})})}function BN(t,e,n,r){r.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return Oj(this[e],i,arguments)})})}function Mo(t){this._index=t}kl(Mo,"_index",["name","keyPath","multiEntry","unique"]);qE(Mo,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);BN(Mo,"_index",IDBIndex,["openCursor","openKeyCursor"]);function mc(t,e){this._cursor=t,this._request=e}kl(mc,"_cursor",["direction","key","primaryKey","value"]);qE(mc,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(mc.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,n),VN(e._request).then(function(r){if(!!r)return new mc(r,e._request)})})})});function zr(t){this._store=t}zr.prototype.createIndex=function(){return new Mo(this._store.createIndex.apply(this._store,arguments))};zr.prototype.index=function(){return new Mo(this._store.index.apply(this._store,arguments))};kl(zr,"_store",["name","keyPath","indexNames","autoIncrement"]);qE(zr,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);BN(zr,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);Rg(zr,"_store",IDBObjectStore,["deleteIndex"]);function Eh(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}Eh.prototype.objectStore=function(){return new zr(this._tx.objectStore.apply(this._tx,arguments))};kl(Eh,"_tx",["objectStoreNames","mode"]);Rg(Eh,"_tx",IDBTransaction,["abort"]);function Ng(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new Eh(n)}Ng.prototype.createObjectStore=function(){return new zr(this._db.createObjectStore.apply(this._db,arguments))};kl(Ng,"_db",["name","version","objectStoreNames"]);Rg(Ng,"_db",IDBDatabase,["deleteObjectStore","close"]);function Pg(t){this._db=t}Pg.prototype.transaction=function(){return new Eh(this._db.transaction.apply(this._db,arguments))};kl(Pg,"_db",["name","version","objectStoreNames"]);Rg(Pg,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(t){[zr,Mo].forEach(function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var n=Pj(arguments),r=n[n.length-1],i=this._store||this._index,s=i[t].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})});[Mo,zr].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(e,n){var r=this,i=[];return new Promise(function(s){r.iterateCursor(e,function(o){if(!o){s(i);return}if(i.push(o.value),n!==void 0&&i.length==n){s(i);return}o.continue()})})})});function Ih(t,e,n){var r=Ag(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(s){n&&n(new Ng(i.result,s.oldVersion,i.transaction))}),r.then(function(s){return new Pg(s)})}function Na(t){return Ag(indexedDB,"deleteDatabase",[t])}const jN="@firebase/installations",WE="0.5.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=1e4,WN=`w:${WE}`,zN="FIS_v2",xj="https://firebaseinstallations.googleapis.com/v1",Dj=60*60*1e3,Mj="installations",Lj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},so=new an(Mj,Lj,Fj);function KN(t){return t instanceof Me&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN({projectId:t}){return`${xj}/projects/${t}/installations`}function GN(t){return{token:t.token,requestStatus:2,expiresIn:Uj(t.expiresIn),creationTime:Date.now()}}async function QN(t,e){const r=(await e.json()).error;return so.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function YN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $j(t,{refreshToken:e}){const n=YN(t);return n.append("Authorization",Vj(e)),n}async function XN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Uj(t){return Number(t.replace("s","000"))}function Vj(t){return`${zN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bj(t,{fid:e}){const n=HN(t),r=YN(t),i={fid:e,authVersion:zN,appId:t.appId,sdkVersion:WN},s={method:"POST",headers:r,body:JSON.stringify(i)},o=await XN(()=>fetch(n,s));if(o.ok){const a=await o.json();return{fid:a.fid||e,registrationStatus:2,refreshToken:a.refreshToken,authToken:GN(a.authToken)}}else throw await QN("Create Installation",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=/^[cdef][\w-]{21}$/,yv="";function Wj(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=zj(t);return qj.test(n)?n:yv}catch{return yv}}function zj(t){return jj(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new Map;function eP(t,e){const n=Og(t);tP(n,e),Kj(n,e)}function tP(t,e){const n=ZN.get(t);if(!!n)for(const r of n)r(e)}function Kj(t,e){const n=Hj();n&&n.postMessage({key:t,fid:e}),Gj()}let Us=null;function Hj(){return!Us&&"BroadcastChannel"in self&&(Us=new BroadcastChannel("[Firebase] FID Change"),Us.onmessage=t=>{tP(t.data.key,t.data.fid)}),Us}function Gj(){ZN.size===0&&Us&&(Us.close(),Us=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="firebase-installations-database",Yj=1,oo="firebase-installations-store";let ky=null;function zE(){return ky||(ky=Ih(Qj,Yj,t=>{switch(t.oldVersion){case 0:t.createObjectStore(oo)}})),ky}async function jf(t,e){const n=Og(t),i=(await zE()).transaction(oo,"readwrite"),s=i.objectStore(oo),o=await s.get(n);return await s.put(e,n),await i.complete,(!o||o.fid!==e.fid)&&eP(t,e.fid),e}async function nP(t){const e=Og(t),r=(await zE()).transaction(oo,"readwrite");await r.objectStore(oo).delete(e),await r.complete}async function xg(t,e){const n=Og(t),i=(await zE()).transaction(oo,"readwrite"),s=i.objectStore(oo),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.complete,a&&(!o||o.fid!==a.fid)&&eP(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KE(t){let e;const n=await xg(t,r=>{const i=Xj(r),s=Jj(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===yv?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Xj(t){const e=t||{fid:Wj(),registrationStatus:0};return rP(e)}function Jj(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(so.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Zj(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:eq(t)}:{installationEntry:e}}async function Zj(t,e){try{const n=await Bj(t,e);return jf(t,n)}catch(n){throw KN(n)&&n.customData.serverCode===409?await nP(t):await jf(t,{fid:e.fid,registrationStatus:0}),n}}async function eq(t){let e=await Ob(t);for(;e.registrationStatus===1;)await JN(100),e=await Ob(t);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await KE(t);return r||n}return e}function Ob(t){return xg(t,e=>{if(!e)throw so.create("installation-not-found");return rP(e)})}function rP(t){return tq(t)?{fid:t.fid,registrationStatus:0}:t}function tq(t){return t.registrationStatus===1&&t.registrationTime+qN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nq({appConfig:t,platformLoggerProvider:e},n){const r=rq(t,n),i=$j(t,n),s=e.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={installation:{sdkVersion:WN}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await XN(()=>fetch(r,a));if(l.ok){const u=await l.json();return GN(u)}else throw await QN("Generate Auth Token",l)}function rq(t,{fid:e}){return`${HN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(t,e=!1){let n;const r=await xg(t.appConfig,s=>{if(!iP(s))throw so.create("not-registered");const o=s.authToken;if(!e&&oq(o))return s;if(o.requestStatus===1)return n=iq(t,e),s;{if(!navigator.onLine)throw so.create("app-offline");const a=lq(s);return n=sq(t,a),a}});return n?await n:r.authToken}async function iq(t,e){let n=await xb(t.appConfig);for(;n.authToken.requestStatus===1;)await JN(100),n=await xb(t.appConfig);const r=n.authToken;return r.requestStatus===0?HE(t,e):r}function xb(t){return xg(t,e=>{if(!iP(e))throw so.create("not-registered");const n=e.authToken;return uq(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function sq(t,e){try{const n=await nq(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await jf(t.appConfig,r),n}catch(n){if(KN(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await nP(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jf(t.appConfig,r)}throw n}}function iP(t){return t!==void 0&&t.registrationStatus===2}function oq(t){return t.requestStatus===2&&!aq(t)}function aq(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Dj}function lq(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uq(t){return t.requestStatus===1&&t.requestTime+qN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cq(t){const e=t,{installationEntry:n,registrationPromise:r}=await KE(e.appConfig);return r?r.catch(console.error):HE(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hq(t,e=!1){const n=t;return await dq(n.appConfig),(await HE(n,e)).token}async function dq(t){const{registrationPromise:e}=await KE(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(t){if(!t||!t.options)throw Ay("App Configuration");if(!t.name)throw Ay("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ay(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ay(t){return so.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="installations",pq="installations-internal",gq=t=>{const e=t.getProvider("app").getImmediate(),n=fq(e),r=Do(e,"platform-logger");return{app:e,appConfig:n,platformLoggerProvider:r,_delete:()=>Promise.resolve()}},mq=t=>{const e=t.getProvider("app").getImmediate(),n=Do(e,sP).getImmediate();return{getId:()=>cq(n),getToken:i=>hq(n,i)}};function yq(){Le(new se(sP,gq,"PUBLIC")),Le(new se(pq,mq,"PRIVATE"))}yq();ce(jN,WE);ce(jN,WE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="analytics",_q="firebase_id",vq="origin",wq=60*1e3,Eq="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",oP="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt=new qr("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Iq(t,e){const n=document.createElement("script");n.src=`${oP}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function Tq(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Sq(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await aP(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){kt.error(a)}t("config",i,s)}async function bq(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await aP(n);for(const l of o){const u=a.find(h=>h.measurementId===l),c=u&&e[u.appId];if(c)s.push(c);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){kt.error(s)}}function Cq(t,e,n,r){async function i(s,o,a){try{s==="event"?await bq(t,e,n,o,a):s==="config"?await Sq(t,e,n,r,o,a):t("set",o)}catch(l){kt.error(l)}}return i}function kq(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Cq(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Aq(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes(oP))return e;return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'},Kn=new an("analytics","Analytics",Rq);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=30,Pq=1e3;class Oq{constructor(e={},n=Pq){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lP=new Oq;function xq(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Dq(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:xq(r)},s=Eq.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();((e=l.error)===null||e===void 0?void 0:e.message)&&(a=l.error.message)}catch{}throw Kn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Mq(t,e=lP,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Kn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Kn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new $q;return setTimeout(async()=>{a.abort()},n!==void 0?n:wq),uP({appId:r,apiKey:i,measurementId:s},o,a,e)}async function uP(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=lP){const{appId:s,measurementId:o}=t;try{await Lq(r,e)}catch(a){if(o)return kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:s,measurementId:o};throw a}try{const a=await Dq(t);return i.deleteThrottleMetadata(s),a}catch(a){if(!Fq(a)){if(i.deleteThrottleMetadata(s),o)return kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:s,measurementId:o};throw a}const l=Number(a.customData.httpStatus)===503?Vf(n,i.intervalMillis,Nq):Vf(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(s,u),kt.debug(`Calling attemptFetch again in ${l} millis`),uP(t,u,r,i)}}function Lq(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Fq(t){if(!(t instanceof Me)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class $q{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uq(){if(Nn())try{await bg()}catch(t){return kt.warn(Kn.create("indexeddb-unavailable",{errorInfo:t}).message),!1}else return kt.warn(Kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Vq(t,e,n,r,i,s,o){var a;const l=Mq(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&kt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>kt.error(f)),e.push(l);const u=Uq().then(f=>{if(f)return r.getId()}),[c,h]=await Promise.all([l,u]);Aq()||Iq(s,c.measurementId),i("js",new Date);const d=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return d[vq]="firebase",d.update=!0,h!=null&&(d[_q]=h),i("config",c.measurementId,d),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e){this.app=e}_delete(){return delete ii[this.app.options.appId],Promise.resolve()}}let ii={},Mb=[];const Lb={};let ef="dataLayer",cP="gtag",Fb,Th,_v=!1;function jq(t){if(_v)throw Kn.create("already-initialized");t.dataLayerName&&(ef=t.dataLayerName),t.gtagName&&(cP=t.gtagName)}function qq(){const t=[];if(vh()&&t.push("This is a browser extension environment."),Cg()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Kn.create("invalid-analytics-context",{errorInfo:e});kt.warn(n.message)}}function Wq(t,e,n){qq();const r=t.options.appId;if(!r)throw Kn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Kn.create("no-api-key");if(ii[r]!=null)throw Kn.create("already-exists",{id:r});if(!_v){Tq(ef);const{wrappedGtag:s,gtagCore:o}=kq(ii,Mb,Lb,ef,cP);Th=s,Fb=o,_v=!0}return ii[r]=Vq(t,Mb,Lb,e,Fb,ef,n),new Bq(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zq(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}async function Kq(t,e,n,r){if(r&&r.global)return t("set",{screen_name:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,screen_name:n})}}async function Hq(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,user_id:n})}}async function Gq(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}async function Qq(t,e){const n=await t;window[`ga-disable-${n}`]=!e}async function Yq(){if(vh()||!Cg()||!Nn())return!1;try{return await bg()}catch{return!1}}function Xq(t,e,n){t=S(t),Kq(Th,ii[t.app.options.appId],e,n).catch(r=>kt.error(r))}function Jq(t,e,n){t=S(t),Hq(Th,ii[t.app.options.appId],e,n).catch(r=>kt.error(r))}function Zq(t,e,n){t=S(t),Gq(Th,ii[t.app.options.appId],e,n).catch(r=>kt.error(r))}function eW(t,e){t=S(t),Qq(ii[t.app.options.appId],e).catch(n=>kt.error(n))}function hP(t,e,n,r){t=S(t),zq(Th,ii[t.app.options.appId],e,n,r).catch(i=>kt.error(i))}const $b="@firebase/analytics",Ub="0.7.5";function tW(){Le(new se(Db,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Wq(r,i,n)},"PUBLIC")),Le(new se("analytics-internal",t,"PRIVATE")),ce($b,Ub),ce($b,Ub,"esm2017");function t(e){try{const n=e.getProvider(Db).getImmediate();return{logEvent:(r,i,s)=>hP(n,r,i,s)}}catch(n){throw Kn.create("interop-component-reg-failed",{reason:n})}}}tW();const nW="@firebase/analytics-compat",rW="0.1.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n){this.app=e,this._delegate=n}logEvent(e,n,r){hP(this._delegate,e,n,r)}setCurrentScreen(e,n){Xq(this._delegate,e,n)}setUserId(e,n){Jq(this._delegate,e,n)}setUserProperties(e,n){Zq(this._delegate,e,n)}setAnalyticsCollectionEnabled(e){eW(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vv;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})(vv||(vv={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW=t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("analytics").getImmediate();return new dP(e,n)};function sW(){const t={Analytics:dP,settings:jq,isSupported:Yq,EventName:vv};pt.INTERNAL.registerComponent(new se("analytics-compat",iW,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}sW();pt.registerVersion(nW,rW);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new Map,oW={activated:!1,tokenObservers:[]},aW={initialized:!1,enabled:!1};function ut(t){return fP.get(t)||oW}function hr(t,e){fP.set(t,e)}function Dg(){return aW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="https://content-firebaseappcheck.googleapis.com/v1beta",lW="exchangeRecaptchaToken",uW="exchangeRecaptchaEnterpriseToken",cW="exchangeDebugToken",Vb={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},hW=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new We,await fW(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new We,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function fW(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Jt=new an("appCheck","AppCheck",pW);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function pP(t){if(!ut(t).activated)throw Jt.create("use-before-activation",{appName:t.name})}function gW(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function QE(t){const e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),s=e-n*3600*24-r*3600-i*60;let o="";return n&&(o+=Ed(n)+"d:"),r&&(o+=Ed(r)+"h:"),o+=Ed(i)+"m:"+Ed(s)+"s",o}function Ed(t){return t===0?"00":t>=10?t.toString():"0"+t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YE({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(e),headers:r};let o;try{o=await fetch(t,s)}catch(h){throw Jt.create("fetch-network-error",{originalErrorMessage:h.message})}if(o.status!==200)throw Jt.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(h){throw Jt.create("fetch-parse-error",{originalErrorMessage:h.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=Number(l[1])*1e3,c=Date.now();return{token:a.attestationToken,expireTimeMillis:c+u,issuedAtTimeMillis:c}}function mW(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${GE}/projects/${n}/apps/${r}:${lW}?key=${i}`,body:{recaptcha_token:e}}}function yW(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${GE}/projects/${n}/apps/${r}:${uW}?key=${i}`,body:{recaptcha_enterprise_token:e}}}function _W(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${GE}/projects/${n}/apps/${r}:${cW}?key=${i}`,body:{debug_token:e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW="firebase-app-check-database",wW=1,yc="firebase-app-check-store",gP="debug-token";let Id=null;function mP(){return Id||(Id=new Promise((t,e)=>{try{const n=indexedDB.open(vW,wW);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Jt.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yc,{keyPath:"compositeKey"})}}}catch(n){e(Jt.create("storage-open",{originalErrorMessage:n.message}))}}),Id)}function EW(t){return _P(vP(t))}function IW(t,e){return yP(vP(t),e)}function TW(t){return yP(gP,t)}function SW(){return _P(gP)}async function yP(t,e){const r=(await mP()).transaction(yc,"readwrite"),s=r.objectStore(yc).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(Jt.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}async function _P(t){const n=(await mP()).transaction(yc,"readonly"),i=n.objectStore(yc).get(t);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(Jt.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function vP(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new qr("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bW(t){if(Nn()){let e;try{e=await EW(t)}catch(n){_c.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}}function Bb(t,e){return Nn()?IW(t,e).catch(n=>{_c.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function CW(){let t;try{t=await SW()}catch{}if(t)return t;{const e=gW();return TW(e).catch(n=>_c.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(){return Dg().enabled}async function EP(){const t=Dg();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function kW(){const t=E2(),e=Dg();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;const n=new We;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(CW())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW={error:"UNKNOWN_ERROR"};function RW(t){return Tg.encodeString(JSON.stringify(t),!1)}async function Wf(t,e=!1){const n=t.app;pP(n);const r=ut(n);let i=r.token,s;if(!i){const l=await r.cachedTokenPromise;l&&zf(l)&&(i=l)}if(!e&&i&&zf(i))return{token:i.token};let o=!1;if(wP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=YE(_W(n,await EP()),t.platformLoggerProvider).then(u=>(r.exchangeTokenPromise=void 0,u)),o=!0);const l=await r.exchangeTokenPromise;return await Bb(n,l),hr(n,Object.assign(Object.assign({},r),{token:l})),{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(l=>(r.exchangeTokenPromise=void 0,l)),o=!0),i=await r.exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?_c.warn(l.message):_c.error(l),s=l}let a;return i?(a={token:i.token},hr(n,Object.assign(Object.assign({},r),{token:i})),await Bb(n,i)):a=PW(s),o&&IP(n,a),a}function XE(t,e,n,r){const{app:i}=t,s=ut(i),o={next:n,error:r,type:e};if(hr(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&zf(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),jb(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>jb(t))}function JE(t,e){const n=ut(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),hr(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function jb(t){const{app:e}=t,n=ut(e);let r=n.tokenRefresher;r||(r=NW(t),hr(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function NW(t){const{app:e}=t;return new dW(async()=>{const n=ut(e);let r;if(n.token?r=await Wf(t,!0):r=await Wf(t),r.error)throw r.error},()=>!0,()=>{const n=ut(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Vb.RETRIAL_MIN_WAIT,Vb.RETRIAL_MAX_WAIT)}function IP(t,e){const n=ut(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function zf(t){return t.expireTimeMillis-Date.now()>0}function PW(t){return{token:RW(AW),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,n){this.app=e,this.platformLoggerProvider=n}_delete(){const{tokenObservers:e}=ut(this.app);for(const n of e)JE(this.app,n.next);return Promise.resolve()}}function xW(t,e){return new OW(t,e)}function DW(t){return{getToken:e=>Wf(t,e),addTokenListener:e=>XE(t,"INTERNAL",e),removeTokenListener:e=>JE(t.app,e)}}const MW="@firebase/app-check",LW="0.5.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW="https://www.google.com/recaptcha/api.js",$W="https://www.google.com/recaptcha/enterprise.js";function UW(t,e){const n=ut(t),r=new We;hr(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const i=TP(t),s=qf(!1);return s?Kf(t,e,s,i,r):jW(()=>{const o=qf(!1);if(!o)throw new Error("no recaptcha");Kf(t,e,o,i,r)}),r.promise}function VW(t,e){const n=ut(t),r=new We;hr(t,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:r}}));const i=TP(t),s=qf(!0);return s?Kf(t,e,s,i,r):qW(()=>{const o=qf(!0);if(!o)throw new Error("no recaptcha");Kf(t,e,o,i,r)}),r.promise}function Kf(t,e,n,r,i){n.ready(()=>{BW(t,e,n,r),i.resolve(n)})}function TP(t){const e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}async function SP(t){pP(t);const n=await ut(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=ut(t).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function BW(t,e,n,r){const i=n.render(r,{sitekey:e,size:"invisible"}),s=ut(t);hr(t,Object.assign(Object.assign({},s),{reCAPTCHAState:Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}))}function jW(t){const e=document.createElement("script");e.src=FW,e.onload=t,document.head.appendChild(e)}function qW(t){const e=document.createElement("script");e.src=$W,e.onload=t,document.head.appendChild(e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e;CP(this._throttleData);const n=await SP(this._app).catch(i=>{throw Jt.create("recaptcha-error")});let r;try{r=await YE(mW(this._app,n),this._platformLoggerProvider)}catch(i){throw i.code==="fetch-status-error"?(this._throttleData=bP(Number((e=i.customData)===null||e===void 0?void 0:e.httpStatus),this._throttleData),Jt.create("throttled",{time:QE(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):i}return this._throttleData=null,r}initialize(e){this._app=e,this._platformLoggerProvider=Do(e,"platform-logger"),UW(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof vc?this._siteKey===e._siteKey:!1}}class Mg{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){var e;CP(this._throttleData);const n=await SP(this._app).catch(i=>{throw Jt.create("recaptcha-error")});let r;try{r=await YE(yW(this._app,n),this._platformLoggerProvider)}catch(i){throw i.code==="fetch-status-error"?(this._throttleData=bP(Number((e=i.customData)===null||e===void 0?void 0:e.httpStatus),this._throttleData),Jt.create("throttled",{time:QE(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):i}return this._throttleData=null,r}initialize(e){this._app=e,this._platformLoggerProvider=Do(e,"platform-logger"),VW(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof Mg?this._siteKey===e._siteKey:!1}}class wc{constructor(e){this._customProviderOptions=e}async getToken(){const e=await this._customProviderOptions.getToken(),n=b2(e.token),r=n!==null&&n<Date.now()&&n>0?n*1e3:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:r})}initialize(e){this._app=e}isEqual(e){return e instanceof wc?this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString():!1}}function bP(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+hW,httpStatus:t};{const n=e?e.backoffCount:0,r=Vf(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function CP(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Jt.create("throttled",{time:QE(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(t=MN(),e){t=S(t);const n=Do(t,"app-check");if(Dg().initialized||kW(),wP()&&EP().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw Jt.create("already-initialized",{appName:t.name})}const r=n.initialize({options:e});return zW(t,e.provider,e.isTokenAutoRefreshEnabled),ut(t).isTokenAutoRefreshEnabled&&XE(r,"INTERNAL",()=>{}),r}function zW(t,e,n){const r=ut(t),i=Object.assign(Object.assign({},r),{activated:!0});i.provider=e,i.cachedTokenPromise=bW(t).then(s=>(s&&zf(s)&&(hr(t,Object.assign(Object.assign({},ut(t)),{token:s})),IP(t,{token:s.token})),s)),i.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,hr(t,i),i.provider.initialize(t)}function KW(t,e){const n=t.app,r=ut(n);r.tokenRefresher&&(e===!0?r.tokenRefresher.start():r.tokenRefresher.stop()),hr(n,Object.assign(Object.assign({},r),{isTokenAutoRefreshEnabled:e}))}async function HW(t,e){const n=await Wf(t,e);if(n.error)throw n.error;return{token:n.token}}function GW(t,e,n,r){let i=()=>{},s=()=>{};return e.next!=null?i=e.next.bind(e):i=e,e.error!=null?s=e.error.bind(e):n&&(s=n),XE(t,"EXTERNAL",i,s),()=>JE(t.app,i)}const QW="app-check",qb="app-check-internal";function YW(){Le(new se(QW,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger");return xW(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(qb).initialize()})),Le(new se(qb,t=>{const e=t.getProvider("app-check").getImmediate();return DW(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ce(MW,LW)}YW();const XW="@firebase/app-check-compat",JW="0.2.3";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZW={["use-before-activation"]:"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."},Ry=new an("appCheck","AppCheck",ZW);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e){this.app=e}activate(e,n){let r;typeof e=="string"?r=new vc(e):e instanceof Mg||e instanceof vc||e instanceof wc?r=e:r=new wc({getToken:e.getToken}),this._delegate=WW(this.app,{provider:r,isTokenAutoRefreshEnabled:n})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw Ry.create("use-before-activation",{appName:this.app.name});KW(this._delegate,e)}getToken(e){if(!this._delegate)throw Ry.create("use-before-activation",{appName:this.app.name});return HW(this._delegate,e)}onTokenChanged(e,n,r){if(!this._delegate)throw Ry.create("use-before-activation",{appName:this.app.name});return GW(this._delegate,e,n)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=t=>{const e=t.getProvider("app-compat").getImmediate();return new ez(e)};function nz(){pt.INTERNAL.registerComponent(new se("appCheck-compat",tz,"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:Mg,ReCaptchaV3Provider:vc,CustomProvider:wc}))}nz();pt.registerVersion(XW,JW);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ZE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const lu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ea={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function kP(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iz=rz,sz=kP,AP=new an("auth","Firebase",kP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=new qr("@firebase/auth");function tf(t,...e){Wb.logLevel<=G.ERROR&&Wb.error(`Auth (${Wr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,...e){throw e0(t,...e)}function At(t,...e){return e0(t,...e)}function RP(t,e,n){const r=Object.assign(Object.assign({},sz()),{[e]:n});return new an("auth","Firebase",r).create(e,{appName:t.name})}function Al(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ot(t,"argument-error"),RP(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function e0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return AP.create(t,...e)}function C(t,e,...n){if(!t)throw e0(e,...n)}function Sr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tf(e),new Error(e)}function dr(t,e){t||Sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Map;function bn(t){dr(t instanceof Function,"Expected a class definition");let e=zb.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zb.set(t,e),e)}function oz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bn);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function t0(){return Kb()==="http:"||Kb()==="https:"}function Kb(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t0()||vh()||"connection"in navigator)?navigator.onLine:!0}function lz(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=Sg()||wh()}get(){return az()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=new Sh(3e4,6e4);function Ge(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gt(t,e,n,r,i={}){return PP(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=xo(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),NP.fetch()(OP(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function PP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},uz),e);try{const i=new hz(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw nf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nf(t,"email-already-in-use",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw RP(t,c,u);Ot(t,c)}}catch(i){if(i instanceof Me)throw i;Ot(t,"network-request-failed")}}async function mi(t,e,n,r,i={}){const s=await gt(t,e,n,r,i);return"mfaPendingCredential"in s&&Ot(t,"multi-factor-auth-required",{_serverResponse:s}),s}function OP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?n0(t.config,i):`${t.config.apiScheme}://${i}`}class hz{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(At(this.auth,"network-request-failed")),cz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=At(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(t,e){return gt(t,"POST","/v1/accounts:delete",e)}async function fz(t,e){return gt(t,"POST","/v1/accounts:update",e)}async function pz(t,e){return gt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gz(t,e=!1){const n=S(t),r=await n.getIdToken(e),i=Lg(r);C(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Vu(Ny(i.auth_time)),issuedAtTime:Vu(Ny(i.iat)),expirationTime:Vu(Ny(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ny(t){return Number(t)*1e3}function Lg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const i=pv(n);return i?JSON.parse(i):(tf("Failed to decode base64 JWT payload"),null)}catch(i){return tf("Caught error parsing JWT payload as JSON",i),null}}function mz(t){const e=Lg(t);return C(e,"internal-error"),C(typeof e.exp!="undefined","internal-error"),C(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Me&&yz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(t){var e;const n=t.auth,r=await t.getIdToken(),i=await hi(t,pz(n,{idToken:r}));C(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?Ez(s.providerUserInfo):[],a=wz(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a==null?void 0:a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xP(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function vz(t){const e=S(t);await Ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wz(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ez(t){return t.map(e=>{var{providerId:n}=e,r=ZE(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iz(t,e){const n=await PP(t,{},async()=>{const r=xo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=OP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",NP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){C(e.idToken,"internal-error"),C(typeof e.idToken!="undefined","internal-error"),C(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):mz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return C(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Iz(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Tc;return r&&(C(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(C(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(C(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tc,this.toJSON())}_performRefresh(){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){C(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class Gs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ZE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xP(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hi(this,this.stsTokenManager.getToken(this.auth,e));return C(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gz(this,e)}reload(){return vz(this)}_assign(e){this!==e&&(C(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Gs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ic(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await hi(this,dz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,p=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:v,emailVerified:w,isAnonymous:O,providerData:A,stsTokenManager:$}=n;C(v&&$,e,"internal-error");const U=Tc.fromJSON(this.name,$);C(typeof v=="string",e,"internal-error"),Ei(h,e.name),Ei(d,e.name),C(typeof w=="boolean",e,"internal-error"),C(typeof O=="boolean",e,"internal-error"),Ei(f,e.name),Ei(m,e.name),Ei(_,e.name),Ei(p,e.name),Ei(g,e.name),Ei(y,e.name);const L=new Gs({uid:v,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:O,photoURL:m,phoneNumber:f,tenantId:_,stsTokenManager:U,createdAt:g,lastLoginAt:y});return A&&Array.isArray(A)&&(L.providerData=A.map(je=>Object.assign({},je))),p&&(L._redirectEventId=p),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new Tc;i.updateFromServerResponse(n);const s=new Gs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ic(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DP.type="NONE";const Qa=DP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t,e,n){return`firebase:${t}:${e}:${n}`}class Pa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Qs(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qs("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pa(bn(Qa),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||bn(Qa);const o=Qs(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=Gs._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Pa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Pa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($P(e))return"Blackberry";if(UP(e))return"Webos";if(r0(e))return"Safari";if((e.includes("chrome/")||LP(e))&&!e.includes("edge/"))return"Chrome";if(bh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function MP(t=ve()){return/firefox\//i.test(t)}function r0(t=ve()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LP(t=ve()){return/crios\//i.test(t)}function FP(t=ve()){return/iemobile/i.test(t)}function bh(t=ve()){return/android/i.test(t)}function $P(t=ve()){return/blackberry/i.test(t)}function UP(t=ve()){return/webos/i.test(t)}function Rl(t=ve()){return/iphone|ipad|ipod/i.test(t)}function Tz(t=ve()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Sz(t=ve()){var e;return Rl(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function bz(){return UE()&&document.documentMode===10}function VP(t=ve()){return Rl(t)||bh(t)||UP(t)||$P(t)||/windows phone/i.test(t)||FP(t)}function Cz(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t,e=[]){let n;switch(t){case"Browser":n=Hb(ve());break;case"Worker":n=`${Hb(ve())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${r}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e,n){this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gb(this),this.idTokenSubscription=new Gb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AP,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),!this._deleted)){if((r=this._popupRedirectResolver)===null||r===void 0?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var n;let r=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=r==null?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===s)&&(o==null?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?(C(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)):this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ic(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?S(e):null;return n&&C(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&C(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(bn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new an("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bn(e)||this._popupRedirectResolver;C(n,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return C(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={["X-Client-Version"]:this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function ct(t){return S(t)}class Gb{constructor(e){this.auth=e,this.observer=null,this.addObserver=RN(n=>this.observer=n)}get next(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Az(t,e,n){const r=ct(t);C(r._canInitEmulator,r,"emulator-config-failed"),C(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n==null?void 0:n.disableWarnings),s=jP(e),{host:o,port:a}=Rz(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Nz()}function jP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rz(t){const e=jP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Qb(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Qb(o)}}}function Qb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Nz(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console!="undefined"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window!="undefined"&&typeof document!="undefined"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,n){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(t,e){return gt(t,"POST","/v1/accounts:resetPassword",Ge(t,e))}async function WP(t,e){return gt(t,"POST","/v1/accounts:update",e)}async function Pz(t,e){return gt(t,"POST","/v1/accounts:update",Ge(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oz(t,e){return mi(t,"POST","/v1/accounts:signInWithPassword",Ge(t,e))}async function Fg(t,e){return gt(t,"POST","/v1/accounts:sendOobCode",Ge(t,e))}async function xz(t,e){return Fg(t,e)}async function Dz(t,e){return Fg(t,e)}async function Mz(t,e){return Fg(t,e)}async function Lz(t,e){return Fg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fz(t,e){return mi(t,"POST","/v1/accounts:signInWithEmailLink",Ge(t,e))}async function $z(t,e){return mi(t,"POST","/v1/accounts:signInWithEmailLink",Ge(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Nl{constructor(e,n,r,i=null){super("password",r);this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Sc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Oz(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Fz(e,{email:this._email,oobCode:this._password});default:Ot(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return WP(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return $z(e,{idToken:n,email:this._email,oobCode:this._password});default:Ot(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function si(t,e){return mi(t,"POST","/v1/accounts:signInWithIdp",Ge(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz="http://localhost";class Mr extends Nl{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){const n=new Mr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ot("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ZE(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Mr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,si(e,n)}buildRequest(){const e={requestUri:Uz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz(t,e){return gt(t,"POST","/v1/accounts:sendVerificationCode",Ge(t,e))}async function Bz(t,e){return mi(t,"POST","/v1/accounts:signInWithPhoneNumber",Ge(t,e))}async function jz(t,e){const n=await mi(t,"POST","/v1/accounts:signInWithPhoneNumber",Ge(t,e));if(n.temporaryProof)throw nf(t,"account-exists-with-different-credential",n);return n}const qz={USER_NOT_FOUND:"user-not-found"};async function Wz(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return mi(t,"POST","/v1/accounts:signInWithPhoneNumber",Ge(t,n),qz)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Nl{constructor(e){super("phone","phone");this.params=e}static _fromVerification(e,n){return new Ys({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ys({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Bz(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return jz(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Wz(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ys({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Kz(t){const e=ma(Su(t)).link,n=e?ma(Su(e)).deep_link_id:null,r=ma(Su(t)).deep_link_id;return(r?ma(Su(r)).link:null)||r||n||e||t}class $g{constructor(e){var n,r,i,s,o,a;const l=ma(Su(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=zz((i=l.mode)!==null&&i!==void 0?i:null);C(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Kz(e);try{return new $g(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.providerId=ys.PROVIDER_ID}static credential(e,n){return Sc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$g.parseLink(n);return C(r,"argument-error"),Sc._fromEmailAndCode(e,r.code,r.tenantId)}}ys.PROVIDER_ID="password";ys.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ys.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends yi{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Oa extends Pl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return C("providerId"in n&&"signInMethod"in n,"argument-error"),Mr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return C(e.idToken||e.accessToken,"argument-error"),Mr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Oa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Oa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Oa(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Pl{constructor(){super("facebook.com")}static credential(e){return Mr._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Pl{constructor(){super("google.com");this.addScope("profile")}static credential(e,n){return Mr._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Pl{constructor(){super("github.com")}static credential(e){return Mr._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz="http://localhost";class Ya extends Nl{constructor(e,n){super(e,e);this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,si(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Ya(r,s)}static _create(e,n){return new Ya(e,n)}buildRequest(){return{requestUri:Hz,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz="saml.";class Hf extends yi{constructor(e){C(e.startsWith(Gz),"argument-error");super(e)}static credentialFromResult(e){return Hf.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Hf.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ya.fromJSON(e);return C(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Ya._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Pl{constructor(){super("twitter.com")}static credential(e,n){return Mr._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e){return mi(t,"POST","/v1/accounts:signUp",Ge(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Gs._fromIdTokenResponse(e,r,i),o=Yb(r);return new Yn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Yb(r);return new Yn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Yb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(t){var e;const n=ct(t);if(await n._initializationPromise,(e=n.currentUser)===null||e===void 0?void 0:e.isAnonymous)return new Yn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await zP(n,{returnSecureToken:!0}),i=await Yn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends Me{constructor(e,n,r,i){var s;super(n.code,n.message);this.operationType=r,this.user=i,Object.setPrototypeOf(this,Gf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Gf(e,n,r,i)}}function KP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Gf._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yz(t,e){const n=S(t);await Ug(!0,n,e);const{providerUserInfo:r}=await fz(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=HP(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function i0(t,e,n=!1){const r=await hi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Yn._forOperation(t,"link",r)}async function Ug(t,e,n){await Ic(e);const r=HP(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";C(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await hi(t,KP(r,i,e,t),n);C(s.idToken,r,"internal-error");const o=Lg(s.idToken);C(o,r,"internal-error");const{sub:a}=o;return C(t.uid===a,r,"user-mismatch"),Yn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ot(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(t,e,n=!1){const r="signIn",i=await KP(t,r,e),s=await Yn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Vg(t,e){return QP(ct(t),e)}async function YP(t,e){const n=S(t);return await Ug(!1,n,e.providerId),i0(n,e)}async function XP(t,e){return GP(S(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xz(t,e){return mi(t,"POST","/v1/accounts:signInWithCustomToken",Ge(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(t,e){const n=ct(t),r=await Xz(n,{token:e,returnSecureToken:!0}),i=await Yn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?s0._fromServerResponse(e,n):Ot(e,"internal-error")}}class s0 extends Bg{constructor(e){super("phone",e);this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new s0(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e,n){var r;C(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),C(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(C(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(C(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zz(t,e,n){const r=S(t),i={requestType:"PASSWORD_RESET",email:e};n&&jg(r,i,n),await Dz(r,i)}async function eK(t,e,n){await qP(S(t),{oobCode:e,newPassword:n})}async function tK(t,e){await Pz(S(t),{oobCode:e})}async function JP(t,e){const n=S(t),r=await qP(n,{oobCode:e}),i=r.requestType;switch(C(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":C(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":C(r.mfaInfo,n,"internal-error");default:C(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Bg._fromServerResponse(ct(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function nK(t,e){const{data:n}=await JP(S(t),e);return n.email}async function rK(t,e,n){const r=ct(t),i=await zP(r,{returnSecureToken:!0,email:e,password:n}),s=await Yn._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function iK(t,e,n){return Vg(S(t),ys.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sK(t,e,n){const r=S(t),i={requestType:"EMAIL_SIGNIN",email:e};C(n.handleCodeInApp,r,"argument-error"),n&&jg(r,i,n),await Mz(r,i)}function oK(t,e){const n=$g.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function aK(t,e,n){const r=S(t),i=ys.credentialWithLink(e,n||Ec());return C(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Vg(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lK(t,e){return gt(t,"POST","/v1/accounts:createAuthUri",Ge(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uK(t,e){const n=t0()?Ec():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await lK(S(t),r);return i||[]}async function cK(t,e){const n=S(t),r=await t.getIdToken(),i={requestType:"VERIFY_EMAIL",idToken:r};e&&jg(n.auth,i,e);const{email:s}=await xz(n.auth,i);s!==t.email&&await t.reload()}async function hK(t,e,n){const r=S(t),i=await t.getIdToken(),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:e};n&&jg(r.auth,s,n);const{email:o}=await Lz(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dK(t,e){return gt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fK(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=S(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await hi(r,dK(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function pK(t,e){return ZP(S(t),e,null)}function gK(t,e){return ZP(S(t),null,e)}async function ZP(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await hi(t,WP(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mK(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=Lg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new xa(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new yK(s,i);case"github.com":return new _K(s,i);case"google.com":return new vK(s,i);case"twitter.com":return new wK(s,i,t.screenName||null);case"custom":case"anonymous":return new xa(s,null);default:return new xa(s,r,i)}}class xa{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class eO extends xa{constructor(e,n,r,i){super(e,n,r);this.username=i}}class yK extends xa{constructor(e,n){super(e,"facebook.com",n)}}class _K extends eO{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class vK extends xa{constructor(e,n){super(e,"google.com",n)}}class wK extends eO{constructor(e,n,r){super(e,"twitter.com",n,r)}}function EK(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:mK(n)}class Vs{constructor(e,n){this.type=e,this.credential=n}static _fromIdtoken(e){return new Vs("enroll",e)}static _fromMfaPendingCredential(e){return new Vs("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e==null?void 0:e.multiFactorSession){if((n=e.multiFactorSession)===null||n===void 0?void 0:n.pendingCredential)return Vs._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)===null||r===void 0?void 0:r.idToken)return Vs._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=ct(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Bg._fromServerResponse(r,a));C(i.mfaPendingCredential,r,"internal-error");const o=Vs._fromMfaPendingCredential(i.mfaPendingCredential);return new o0(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await Yn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return C(n.user,r,"internal-error"),Yn._forOperation(n.user,n.operationType,u);default:Ot(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function IK(t,e){var n;const r=S(t),i=e;return C(e.customData.operationType,r,"argument-error"),C((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),o0._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t,e){return gt(t,"POST","/v2/accounts/mfaEnrollment:start",Ge(t,e))}function SK(t,e){return gt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Ge(t,e))}function bK(t,e){return gt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Ge(t,e))}class a0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Bg._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new a0(e)}async getSession(){return Vs._fromIdtoken(await this.user.getIdToken())}async enroll(e,n){const r=e,i=await this.getSession(),s=await hi(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken(),i=await hi(this.user,bK(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(s){if(s.code!=="auth/user-token-expired")throw s}}}const Py=new WeakMap;function CK(t){const e=S(t);return Py.has(e)||Py.set(e,a0._fromUser(e)),Py.get(e)}const Qf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qf,"1"),this.storage.removeItem(Qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kK(){const t=ve();return r0(t)||Rl(t)}const AK=1e3,RK=10;class nO extends tO{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=kK()&&Cz(),this.fallbackToPolling=VP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,RK):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nO.type="LOCAL";const l0=nO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO extends tO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rO.type="SESSION";const ao=rO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NK(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new qg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o==null?void 0:o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await NK(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Ch("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return window}function OK(t){qe().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(){return typeof qe().WorkerGlobalScope!="undefined"&&typeof qe().importScripts=="function"}async function xK(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MK(){return u0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="firebaseLocalStorageDb",LK=1,Yf="firebaseLocalStorage",sO="fbase_key";class kh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wg(t,e){return t.transaction([Yf],e?"readwrite":"readonly").objectStore(Yf)}function FK(){const t=indexedDB.deleteDatabase(iO);return new kh(t).toPromise()}function wv(){const t=indexedDB.open(iO,LK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yf,{keyPath:sO})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yf)?e(r):(r.close(),await FK(),e(await wv()))})})}async function Xb(t,e,n){const r=Wg(t,!0).put({[sO]:e,value:n});return new kh(r).toPromise()}async function $K(t,e){const n=Wg(t,!1).get(e),r=await new kh(n).toPromise();return r===void 0?null:r.value}function Jb(t,e){const n=Wg(t,!0).delete(e);return new kh(n).toPromise()}const UK=800,VK=3;class oO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return u0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qg._getInstance(MK()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xK(),!this.activeServiceWorker)return;this.sender=new PK(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wv();return await Xb(e,Qf,"1"),await Jb(e,Qf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$K(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Wg(i,!1).getAll();return new kh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oO.type="LOCAL";const bc=oO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BK(t,e){return gt(t,"POST","/v2/accounts/mfaSignIn:start",Ge(t,e))}function jK(t,e){return gt(t,"POST","/v2/accounts/mfaSignIn:finalize",Ge(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qK(t){return(await gt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WK(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function aO(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=At("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",WK().appendChild(r)})}function lO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zK=500,KK=6e4,Td=1e12;class HK{constructor(e){this.auth=e,this.counter=Td,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new GK(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Td;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Td;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Td;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class GK{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;C(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=QK(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},KK)},zK))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function QK(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=lO("rcb"),YK=new Sh(3e4,6e4),XK="https://www.google.com/recaptcha/api.js?";class JK{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qe().grecaptcha}load(e,n=""){return C(ZK(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(qe().grecaptcha):new Promise((r,i)=>{const s=qe().setTimeout(()=>{i(At(e,"network-request-failed"))},YK.get());qe()[Oy]=()=>{qe().clearTimeout(s),delete qe()[Oy];const a=qe().grecaptcha;if(!a){i(At(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const h=l(u,c);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${XK}?${xo({onload:Oy,render:"explicit",hl:n})}`;aO(o).catch(()=>{clearTimeout(s),i(At(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!qe().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function ZK(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class eH{async load(e){return new HK(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="recaptcha",tH={theme:"light",type:"image"};class nH{constructor(e,n=Object.assign({},tH),r){this.parameters=n,this.type=uO,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(r),this.isInvisible=this.parameters.size==="invisible",C(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;C(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new eH:new JK,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{!o||(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){C(!this.parameters.sitekey,this.auth,"argument-error"),C(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),C(typeof document!="undefined",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=qe()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){C(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){C(t0()&&!u0(),this.auth,"internal-error"),await rH(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await qK(this.auth);C(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return C(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function rH(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ys._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function iH(t,e,n){const r=ct(t),i=await zg(r,e,S(n));return new c0(i,s=>Vg(r,s))}async function sH(t,e,n){const r=S(t);await Ug(!1,r,"phone");const i=await zg(r.auth,e,S(n));return new c0(i,s=>YP(r,s))}async function oH(t,e,n){const r=S(t),i=await zg(r.auth,e,S(n));return new c0(i,s=>XP(r,s))}async function zg(t,e,n){var r;const i=await n.verify();try{C(typeof i=="string",t,"argument-error"),C(n.type===uO,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return C(o.type==="enroll",t,"internal-error"),(await TK(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{C(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return C(a,t,"missing-multi-factor-info"),(await BK(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await Vz(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function aH(t,e){await i0(S(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.providerId=ur.PROVIDER_ID,this.auth=ct(e)}verifyPhoneNumber(e,n){return zg(this.auth,e,S(n))}static credential(e,n){return Ys._fromVerification(e,n)}static credentialFromResult(e){const n=e;return ur.credentialFromTaggedObject(n)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ys._fromTokenResponse(n,r):null}}ur.PROVIDER_ID="phone";ur.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t,e){return e?bn(e):(C(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends Nl{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lH(t){return QP(t.auth,new h0(t),t.bypassAuthState)}function uH(t){const{auth:e,user:n}=t;return C(n,e,"internal-error"),GP(n,new h0(t),t.bypassAuthState)}async function cH(t){const{auth:e,user:n}=t;return C(n,e,"internal-error"),i0(n,new h0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lH;case"linkViaPopup":case"linkViaRedirect":return cH;case"reauthViaPopup":case"reauthViaRedirect":return uH;default:Ot(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH=new Sh(2e3,1e4);async function dH(t,e,n){const r=ct(t);Al(t,e,yi);const i=Lo(r,n);return new Zr(r,"signInViaPopup",e,i).executeNotNull()}async function fH(t,e,n){const r=S(t);Al(r.auth,e,yi);const i=Lo(r.auth,n);return new Zr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function pH(t,e,n){const r=S(t);Al(r.auth,e,yi);const i=Lo(r.auth,n);return new Zr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Zr extends cO{constructor(e,n,r,i,s){super(e,n,i,s);this.provider=r,this.authWindow=null,this.pollId=null,Zr.currentPopupAction&&Zr.currentPopupAction.cancel(),Zr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return C(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=Ch();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(At(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0?void 0:r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,hH.get())};e()}}Zr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH="pendingRedirect",rf=new Map;class mH extends cO{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r);this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const r=await yH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yH(t,e){const n=dO(e),r=hO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function d0(t,e){return hO(t)._set(dO(e),"true")}function _H(){rf.clear()}function hO(t){return bn(t._redirectPersistence)}function dO(t){return Qs(gH,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vH(t,e,n){return wH(t,e,n)}async function wH(t,e,n){const r=ct(t);Al(t,e,yi);const i=Lo(r,n);return await d0(i,r),i._openRedirect(r,e,"signInViaRedirect")}function EH(t,e,n){return IH(t,e,n)}async function IH(t,e,n){const r=S(t);Al(r.auth,e,yi);const i=Lo(r.auth,n);await d0(i,r.auth);const s=await fO(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function TH(t,e,n){return SH(t,e,n)}async function SH(t,e,n){const r=S(t);Al(r.auth,e,yi);const i=Lo(r.auth,n);await Ug(!1,r,e.providerId),await d0(i,r.auth);const s=await fO(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function bH(t,e){return await ct(t)._initializationPromise,Kg(t,e,!1)}async function Kg(t,e,n=!1){const r=ct(t),i=Lo(r,e),o=await new mH(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function fO(t){const e=Ch(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH=10*60*1e3;class pO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gO(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(At(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CH&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zb(e))}saveEventToCache(e){this.cachedEventUids.add(Zb(e)),this.lastProcessedEventTime=Date.now()}}function Zb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gO({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gO(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(t,e={}){return gt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RH=/^https?/;async function NH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mO(t);for(const n of e)try{if(PH(n))return}catch{}Ot(t,"unauthorized-domain")}function PH(t){const e=Ec(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RH.test(n))return!1;if(AH.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH=new Sh(3e4,6e4);function eC(){const t=qe().___jsl;if(t==null?void 0:t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xH(t){return new Promise((e,n)=>{var r,i,s;function o(){eC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eC(),n(At(t,"network-request-failed"))},timeout:OH.get()})}if((i=(r=qe().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0?void 0:i.Iframe)e(gapi.iframes.getContext());else if((s=qe().gapi)===null||s===void 0?void 0:s.load)o();else{const a=lO("iframefcb");return qe()[a]=()=>{gapi.load?o():n(At(t,"network-request-failed"))},aO(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw sf=null,e})}let sf=null;function DH(t){return sf=sf||xH(t),sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=new Sh(5e3,15e3),LH="__/auth/iframe",FH="emulator/auth/iframe",$H={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VH(t){const e=t.config;C(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?n0(e,FH):`https://${t.config.authDomain}/${LH}`,r={apiKey:e.apiKey,appName:t.name,v:Wr},i=UH.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xo(r).slice(1)}`}async function BH(t){const e=await DH(t),n=qe().gapi;return C(n,t,"internal-error"),e.open({where:document.body,url:VH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$H,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=At(t,"network-request-failed"),a=qe().setTimeout(()=>{s(o)},MH.get());function l(){qe().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qH=500,WH=600,zH="_blank",KH="http://localhost";class tC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HH(t,e,n,r=qH,i=WH){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},jH),{width:r.toString(),height:i.toString(),top:s,left:o}),u=ve().toLowerCase();n&&(a=LP(u)?zH:n),MP(u)&&(e=e||KH,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,m])=>`${d}${f}=${m},`,"");if(Sz(u)&&a!=="_self")return GH(e||"",a),new tC(null);const h=window.open(e||"",a,c);C(h,t,"popup-blocked");try{h.focus()}catch{}return new tC(h)}function GH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH="__/auth/handler",YH="emulator/auth/handler";function Ev(t,e,n,r,i,s){C(t.config.authDomain,t,"auth-domain-config-required"),C(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wr,eventId:i};if(e instanceof yi){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$f(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(s||{}))o[l]=u}if(e instanceof Pl){const l=e.getScopes().filter(u=>u!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${XH(t)}?${xo(a).slice(1)}`}function XH({config:t}){return t.emulator?n0(t,YH):`https://${t.authDomain}/${QH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="webStorageSupport";class JH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ao,this._completeRedirectFn=Kg}async _openPopup(e,n,r,i){var s;dr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=Ev(e,n,r,Ec(),i);return HH(e,o,Ch())}async _openRedirect(e,n,r,i){return await this._originValidation(e),OK(Ev(e,n,r,Ec(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(dr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BH(e),r=new pO(e);return n.register("authEvent",i=>(C(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xy,{type:xy},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[xy];o!==void 0&&n(!!o),Ot(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VP()||r0()||Rl()}}const ZH=JH;class eG{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Sr("unexpected MultiFactorSessionType")}}}class f0 extends eG{constructor(e){super("phone");this.credential=e}static _fromCredential(e){return new f0(e)}_finalizeEnroll(e,n,r){return SK(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return jK(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class yO{constructor(){}static assertion(e){return f0._fromCredential(e)}}yO.FACTOR_ID="phone";var nC="@firebase/auth",rC="0.19.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var i;e(((i=r)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function rG(t){Le(new se("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),{apiKey:i,authDomain:s}=r.options;return(o=>{C(i&&!i.includes(":"),"invalid-api-key",{appName:o.name}),C(!(s==null?void 0:s.includes(":")),"argument-error",{appName:o.name});const a={apiKey:i,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BP(t)},l=new kz(o,a);return oz(l,n),l})(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Le(new se("auth-internal",e=>{const n=ct(e.getProvider("auth").getImmediate());return(r=>new tG(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ce(nC,rC,nG(t)),ce(nC,rC,"esm2017")}rG("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=2e3;async function sG(t,e,n){var r;const{BuildInfo:i}=lo();dr(e.sessionId,"AuthEvent did not contain a session ID");const s=await cG(e.sessionId),o={};return Rl()?o.ibi=i.packageName:bh()?o.apn=i.packageName:Ot(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Ev(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function oG(t){const{BuildInfo:e}=lo(),n={};Rl()?n.iosBundleId=e.packageName:bh()?n.androidPackageName=e.packageName:Ot(t,"operation-not-supported-in-this-environment"),await mO(t,n)}function aG(t){const{cordova:e}=lo();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,Tz()?"_blank":"_system","location=yes"),n(i)})})}async function lG(t,e,n){const{cordova:r}=lo();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const d=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(At(t,"redirect-cancelled-by-user"))},iG))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),bh()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function uG(t){var e,n,r,i,s,o,a,l,u,c;const h=lo();C(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),C(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)!="undefined",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),C(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),C(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),C(typeof((c=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function cG(t){const e=hG(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function hG(t){if(dr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder!="undefined")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG=20;class fG extends pO{constructor(){super(...arguments);this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function pG(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:yG(),postBody:null,tenantId:t.tenantId,error:At(t,"no-auth-event")}}function gG(t,e){return Iv()._set(Tv(t),e)}async function iC(t){const e=await Iv()._get(Tv(t));return e&&await Iv()._remove(Tv(t)),e}function mG(t,e){var n,r;const i=vG(e);if(i.includes("/__/auth/callback")){const s=of(i),o=s.firebaseError?_G(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?At(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function yG(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<dG;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Iv(){return bn(l0)}function Tv(t){return Qs("authEvent",t.config.apiKey,t.name)}function _G(t){try{return JSON.parse(t)}catch{return null}}function vG(t){const e=of(t),n=e.link?decodeURIComponent(e.link):void 0,r=of(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return of(i).link||i||r||n||t}function of(t){if(!(t==null?void 0:t.includes("?")))return{};const[e,...n]=t.split("?");return ma(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wG=500;class EG{constructor(){this._redirectPersistence=ao,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Kg}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new fG(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Ot(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){uG(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),_H(),await this._originValidation(e);const o=pG(e,r,i);await gG(e,o);const a=await sG(e,o,n),l=await aG(a);return lG(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oG(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=lo(),o=setTimeout(async()=>{await iC(e),n.onEvent(sC())},wG),a=async c=>{clearTimeout(o);const h=await iC(e);let d=null;h&&(c==null?void 0:c.url)&&(d=mG(h,c.url)),n.onEvent(d||sC())};typeof r!="undefined"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;lo().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(h){console.error(h)}}}}const IG=EG;function sC(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:At("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TG(t,e){ct(t)._logFramework(e)}var SG="@firebase/auth-compat",bG="0.2.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CG=1e3;function Xf(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function kG(){return Xf()==="http:"||Xf()==="https:"}function _O(t=ve()){return!!((Xf()==="file:"||Xf()==="ionic:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function AG(){return wh()||$E()}function RG(){return UE()&&(document==null?void 0:document.documentMode)===11}function NG(t=ve()){return/Edge\/\d+/.test(t)}function PG(t=ve()){return RG()||NG(t)}function vO(){try{const t=self.localStorage,e=Ch();if(t)return t.setItem(e,"1"),t.removeItem(e),PG()?Nn():!0}catch{return p0()&&Nn()}return!1}function p0(){return typeof global!="undefined"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dy(){return(kG()||vh()||_O())&&!AG()&&vO()&&!p0()}function wO(){return _O()&&typeof document!="undefined"}async function OG(){return wO()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},CG);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function xG(){return typeof window!="undefined"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In={LOCAL:"local",NONE:"none",SESSION:"session"},uu=C,EO="persistence";function DG(t,e){if(uu(Object.values(In).includes(e),t,"invalid-persistence-type"),wh()){uu(e!==In.SESSION,t,"unsupported-persistence-type");return}if($E()){uu(e===In.NONE,t,"unsupported-persistence-type");return}if(p0()){uu(e===In.NONE||e===In.LOCAL&&Nn(),t,"unsupported-persistence-type");return}uu(e===In.NONE||vO(),t,"unsupported-persistence-type")}async function Sv(t){await t._initializationPromise;const e=IO(),n=Qs(EO,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function MG(t,e){const n=IO();if(!n)return[];const r=Qs(EO,t,e);switch(n.getItem(r)){case In.NONE:return[Qa];case In.LOCAL:return[bc,ao];case In.SESSION:return[ao];default:return[]}}function IO(){var t;try{return((t=xG())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LG=C;class xi{constructor(){this.browserResolver=bn(ZH),this.cordovaResolver=bn(IG),this.underlyingResolver=null,this._redirectPersistence=ao,this._completeRedirectFn=Kg}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return wO()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return LG(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await OG();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){return t.unwrap()}function FG(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $G(t){return SO(t)}function UG(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if(e.code==="auth/multi-factor-auth-required"){const i=e;i.resolver=new VG(t,IK(t,e))}else if(r){const i=SO(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function SO(t){const{_tokenResponse:e}=t instanceof Me?t.customData:t;if(!e)return null;if(!(t instanceof Me)&&"temporaryProof"in e&&"phoneNumber"in e)return ur.credentialFromResult(t);const n=e.providerId;if(!n||n===lu.PASSWORD)return null;let r;switch(n){case lu.GOOGLE:r=yr;break;case lu.FACEBOOK:r=mr;break;case lu.GITHUB:r=_r;break;case lu.TWITTER:r=vr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Ya._create(n,a):Mr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Oa(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Me?r.credentialFromError(t):r.credentialFromResult(t)}function cn(t,e){return e.catch(n=>{throw n instanceof Me&&UG(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:$G(n),additionalUserInfo:EK(n),user:ei.getOrCreate(i)}})}async function bv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>cn(t,n.confirm(r))}}class VG{constructor(e,n){this.resolver=n,this.auth=FG(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return cn(TO(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._delegate=e,this.multiFactor=CK(e)}static getOrCreate(e){return ei.USER_MAP.has(e)||ei.USER_MAP.set(e,new ei(e)),ei.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return cn(this.auth,YP(this._delegate,e))}async linkWithPhoneNumber(e,n){return bv(this.auth,sH(this._delegate,e,n))}async linkWithPopup(e){return cn(this.auth,pH(this._delegate,e,xi))}async linkWithRedirect(e){return await Sv(ct(this.auth)),TH(this._delegate,e,xi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return cn(this.auth,XP(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return bv(this.auth,oH(this._delegate,e,n))}reauthenticateWithPopup(e){return cn(this.auth,fH(this._delegate,e,xi))}async reauthenticateWithRedirect(e){return await Sv(ct(this.auth)),EH(this._delegate,e,xi)}sendEmailVerification(e){return cK(this._delegate,e)}async unlink(e){return await Yz(this._delegate,e),this}updateEmail(e){return pK(this._delegate,e)}updatePassword(e){return gK(this._delegate,e)}updatePhoneNumber(e){return aH(this._delegate,e)}updateProfile(e){return fK(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return hK(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ei.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=C;class Cv{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;cu(r,"invalid-api-key",{appName:e.name}),cu(r,"invalid-api-key",{appName:e.name});const i=typeof window!="undefined"?xi:void 0;this._delegate=n.initialize({options:{persistence:BG(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(iz),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ei.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){Az(this._delegate,e,n)}applyActionCode(e){return tK(this._delegate,e)}checkActionCode(e){return JP(this._delegate,e)}confirmPasswordReset(e,n){return eK(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return cn(this._delegate,rK(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return uK(this._delegate,e)}isSignInWithEmailLink(e){return oK(this._delegate,e)}async getRedirectResult(){cu(Dy(),this._delegate,"operation-not-supported-in-this-environment");const e=await bH(this._delegate,xi);return e?cn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){TG(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=oC(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=oC(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return sK(this._delegate,e,n)}sendPasswordResetEmail(e,n){return Zz(this._delegate,e,n||void 0)}async setPersistence(e){DG(this._delegate,e);let n;switch(e){case In.SESSION:n=ao;break;case In.LOCAL:n=await bn(bc)._isAvailable()?bc:l0;break;case In.NONE:n=Qa;break;default:return Ot("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return cn(this._delegate,Qz(this._delegate))}signInWithCredential(e){return cn(this._delegate,Vg(this._delegate,e))}signInWithCustomToken(e){return cn(this._delegate,Jz(this._delegate,e))}signInWithEmailAndPassword(e,n){return cn(this._delegate,iK(this._delegate,e,n))}signInWithEmailLink(e,n){return cn(this._delegate,aK(this._delegate,e,n))}signInWithPhoneNumber(e,n){return bv(this._delegate,iH(this._delegate,e,n))}async signInWithPopup(e){return cu(Dy(),this._delegate,"operation-not-supported-in-this-environment"),cn(this._delegate,dH(this._delegate,e,xi))}async signInWithRedirect(e){return cu(Dy(),this._delegate,"operation-not-supported-in-this-environment"),await Sv(this._delegate),vH(this._delegate,e,xi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return nK(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Cv.Persistence=In;function oC(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&ei.getOrCreate(o)),error:e,complete:n}}function BG(t,e){const n=MG(t,e);if(typeof self!="undefined"&&!n.includes(bc)&&n.push(bc),typeof window!="undefined")for(const r of[l0,ao])n.includes(r)||n.push(r);return n.includes(Qa)||n.push(Qa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.providerId="phone",this._delegate=new ur(TO(pt.auth()))}static credential(e,n){return ur.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}g0.PHONE_SIGN_IN_METHOD=ur.PHONE_SIGN_IN_METHOD;g0.PROVIDER_ID=ur.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG=C;class qG{constructor(e,n,r=pt.app()){var i;jG((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new nH(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WG="auth-compat";function zG(t){t.INTERNAL.registerComponent(new se(WG,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Cv(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ea.EMAIL_SIGNIN,PASSWORD_RESET:ea.PASSWORD_RESET,RECOVER_EMAIL:ea.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ea.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ea.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ea.VERIFY_EMAIL}},EmailAuthProvider:ys,FacebookAuthProvider:mr,GithubAuthProvider:_r,GoogleAuthProvider:yr,OAuthProvider:Oa,SAMLAuthProvider:Hf,PhoneAuthProvider:g0,PhoneMultiFactorGenerator:yO,RecaptchaVerifier:qG,TwitterAuthProvider:vr,Auth:Cv,AuthCredential:Nl,Error:Me}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(SG,bG)}zG(pt);const aC="@firebase/database",lC="0.12.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bO="";function CO(t){bO=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ze(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:fc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=function(t){try{if(typeof window!="undefined"&&typeof window[t]!="undefined"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KG(e)}}catch{}return new HG},Bs=kO("localStorage"),kv=kO("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new qr("@firebase/database"),AO=function(){let t=1;return function(){return t++}}(),RO=function(t){const e=P2(t),n=new A2;n.update(e);const r=n.digest();return Tg.encodeByteArray(r)},Ah=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ah.apply(null,r):typeof r=="object"?e+=ze(r):e+=r,e+=" "}return e};let Xs=null,uC=!0;const NO=function(t,e){k(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Da.logLevel=G.VERBOSE,Xs=Da.log.bind(Da),e&&kv.set("logging_enabled",!0)):typeof t=="function"?Xs=t:(Xs=null,kv.remove("logging_enabled"))},et=function(...t){if(uC===!0&&(uC=!1,Xs===null&&kv.get("logging_enabled")===!0&&NO(!0)),Xs){const e=Ah.apply(null,t);Xs(e)}},Rh=function(t){return function(...e){et(t,...e)}},Av=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ah(...t);Da.error(e)},Lr=function(...t){const e=`FIREBASE FATAL ERROR: ${Ah(...t)}`;throw Da.error(e),new Error(e)},rn=function(...t){const e="FIREBASE WARNING: "+Ah(...t);Da.warn(e)},GG=function(){typeof window!="undefined"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&rn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Hg=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},QG=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},di="[MIN_NAME]",Fr="[MAX_NAME]",Fo=function(t,e){if(t===e)return 0;if(t===di||e===Fr)return-1;if(e===di||t===Fr)return 1;{const n=Jf(t),r=Jf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},YG=function(t,e){return t===e?0:t<e?-1:1},hu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ze(e))},m0=function(t){if(typeof t!="object"||t===null)return ze(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ze(e[r]),n+=":",n+=m0(t[e[r]]);return n+="}",n},PO=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ht(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const OO=function(t){k(!Hg(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(c.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},XG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JG=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ZG(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const e3=new RegExp("^-?(0*)\\d{1,10}$"),xO=-2147483648,y0=2147483647,Jf=function(t){if(e3.test(t)){const e=Number(t);if(e>=xO&&e<=y0)return e}return null},Ol=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw rn("Exception was thrown by user callback.",n),e},Math.floor(0))}},t3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bu=function(t,e){const n=setTimeout(t,e);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){rn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(et("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rn(e)}}class Ma{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ma.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="5",DO="v",MO="s",LO="r",FO="f",$O=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,UO="ls",i3="p",Rv="ac",VO="websocket",BO="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,i,s=!1,o="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function s3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function qO(t,e,n){k(typeof e=="string","typeof type must == string"),k(typeof n=="object","typeof params must == object");let r;if(e===VO)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===BO)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);s3(t)&&(n.ns=t.namespace);const i=[];return ht(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this.counters_={}}incrementCounter(e,n=1){Pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return g2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My={},Ly={};function v0(t){const e=t.toString();return My[e]||(My[e]=new o3),My[e]}function a3(t,e){const n=t.toString();return Ly[n]||(Ly[n]=e()),Ly[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ol(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="start",u3="close",c3="pLPCommand",h3="pRTLPCB",WO="id",zO="pw",KO="ser",d3="cb",f3="seg",p3="ts",g3="d",m3="dframe",HO=1870,GO=30,y3=HO-GO,_3=25e3,v3=3e4;class ya{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rh(e),this.stats_=v0(n),this.urlFn=l=>(this.appCheckToken&&(l[Rv]=this.appCheckToken),qO(n,BO,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new l3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(v3)),QG(()=>{if(this.isClosed_)return;this.scriptTagHolder=new w0((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===cC)this.id=a,this.password=l;else if(o===u3)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[cC]="t",r[KO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[d3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[DO]=_0,this.transportSessionId&&(r[MO]=this.transportSessionId),this.lastSessionId&&(r[UO]=this.lastSessionId),this.applicationId&&(r[i3]=this.applicationId),this.appCheckToken&&(r[Rv]=this.appCheckToken),typeof location!="undefined"&&location.hostname&&$O.test(location.hostname)&&(r[LO]=FO);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ya.forceAllow_=!0}static forceDisallow(){ya.forceDisallow_=!0}static isAvailable(){return ya.forceAllow_?!0:!ya.forceDisallow_&&typeof document!="undefined"&&document.createElement!=null&&!XG()&&!JG()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ze(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=kN(n),i=PO(r,y3);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[m3]="t",r[WO]=e,r[zO]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ze(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class w0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=AO(),window[c3+this.uniqueCallbackIdentifier]=e,window[h3+this.uniqueCallbackIdentifier]=n,this.myIFrame=w0.createIFrame_();let s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){const a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){et("frame writing exception"),a.stack&&et(a.stack),et(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||et("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[WO]=this.myID,e[zO]=this.myPW,e[KO]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+GO+r.length<=HO;){const o=this.pendingSegs.shift();r=r+"&"+f3+i+"="+o.seg+"&"+p3+i+"="+o.ts+"&"+g3+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(_3)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{et("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3=16384,E3=45e3;let Zf=null;typeof MozWebSocket!="undefined"?Zf=MozWebSocket:typeof WebSocket!="undefined"&&(Zf=WebSocket);class ir{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rh(this.connId),this.stats_=v0(n),this.connURL=ir.connectionURL_(n,o,a,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i){const s={};return s[DO]=_0,typeof location!="undefined"&&location.hostname&&$O.test(location.hostname)&&(s[LO]=FO),n&&(s[MO]=n),r&&(s[UO]=r),i&&(s[Rv]=i),qO(e,VO,s)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bs.set("previous_websocket_failure",!0);try{if(!AN()){const r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Zf(this.connURL,[],r)}}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ir.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator!="undefined"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Zf!==null&&!ir.forceDisallow_}static previouslyFailed(){return Bs.isInMemoryStorage||Bs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Bs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=fc(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(k(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ze(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=PO(n,w3);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(E3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ir.responsesRequiredToBeHealthy=2;ir.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ya,ir]}initTransports_(e){const n=ir&&ir.isAvailable();let r=n&&!ir.previouslyFailed();if(e.webSocketOnly&&(n||rn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ir];else{const i=this.transports_=[];for(const s of E0.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=6e4,T3=5e3,S3=10*1024,b3=100*1024,Fy="t",hC="d",C3="s",dC="r",k3="e",fC="o",pC="a",gC="n",mC="p",A3="h";class R3{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rh("c:"+this.id+":"),this.transportManager_=new E0(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Bu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>b3?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>S3?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Fy in e){const n=e[Fy];n===pC?this.upgradeIfSecondaryHealthy_():n===dC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===fC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=hu("t",e),r=hu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:mC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:pC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:gC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=hu("t",e),r=hu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=hu(Fy,e);if(hC in e){const r=e[hC];if(n===A3)this.onHandshake_(r);else if(n===gC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===C3?this.onConnectionShutdown_(r):n===dC?this.onReset_(r):n===k3?Av("Server Error: "+r):n===fC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Av("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_0!==r&&rn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Bu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(I3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(T3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:mC,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){k(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends YO{constructor(){super(["online"]);this.online_=!0,typeof window!="undefined"&&typeof window.addEventListener!="undefined"&&!Sg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ep}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=32,_C=768;class ae{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ie(){return new ae("")}function Q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function rs(t){return t.pieces_.length-t.pieceNum_}function ue(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ae(t.pieces_,e)}function I0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function N3(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Cc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function XO(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ae(e,0)}function Ie(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ae(n,0)}function Y(t){return t.pieceNum_>=t.pieces_.length}function Zt(t,e){const n=Q(t),r=Q(e);if(n===null)return e;if(n===r)return Zt(ue(t),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function P3(t,e){const n=Cc(t,0),r=Cc(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Fo(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function T0(t,e){if(rs(t)!==rs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Un(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(rs(t)>rs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class O3{constructor(e,n){this.errorPrefix_=n,this.parts_=Cc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=kg(this.parts_[r]);JO(this)}}function x3(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=kg(e),JO(t)}function D3(t){const e=t.parts_.pop();t.byteLength_-=kg(e),t.parts_.length>0&&(t.byteLength_-=1)}function JO(t){if(t.byteLength_>_C)throw new Error(t.errorPrefix_+"has a key path longer than "+_C+" bytes ("+t.byteLength_+").");if(t.parts_.length>yC)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+yC+") or object contains a cycle "+As(t))}function As(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends YO{constructor(){super(["visible"]);let e,n;typeof document!="undefined"&&typeof document.addEventListener!="undefined"&&(typeof document.hidden!="undefined"?(n="visibilitychange",e="hidden"):typeof document.mozHidden!="undefined"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden!="undefined"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden!="undefined"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new S0}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=1e3,M3=60*5*1e3,L3=3*1e3,vC=30*1e3,F3=1.3,$3=3e4,U3="server_kill",wC=3;class oi extends QO{constructor(e,n,r,i,s,o,a,l){super();if(this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=oi.nextPersistentConnectionId_++,this.log_=Rh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=du,this.maxReconnectDelay_=M3,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!AN())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");S0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ep.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(ze(s)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new We,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:o=>{const a=o.d;o.s==="ok"?(this.onDataUpdate_(r.p,a,!1,null),n.resolve(a)):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const o=this.outstandingGets_[s];o===void 0||i!==o||(delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},L3),this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;oi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Pn(e,"w")){const r=ro(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();rn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||k2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vC)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=C2(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ze(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Av("Unrecognized action received from server: "+ze(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$3&&(this.reconnectDelay_=du),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*F3)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+oi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(h){k(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?et("getToken() completed but was canceled"):(et("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new R3(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{rn(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(U3)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&rn(h),l())}}}interrupt(e){et("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){et("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$f(this.interruptReasons_)&&(this.reconnectDelay_=du,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>m0(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new ae(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){et("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wC&&(this.reconnectDelay_=vC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){et("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+bO.replace(/\./g,"-")]=1,Sg()?e["framework.cordova"]=1:wh()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ep.getInstance().currentlyOnline();return $f(this.interruptReasons_)&&e}}oi.nextPersistentConnectionId_=0;oi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new X(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new X(di,e),i=new X(di,n);return this.compare(r,i)!==0}minPost(){return X.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd;class ZO extends Gg{static get __EMPTY_NODE(){return Sd}static set __EMPTY_NODE(e){Sd=e}compare(e,n){return Fo(e.name,n.name)}isDefinedOn(e){throw Cl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return X.MIN}maxPost(){return new X(Fr,Sd)}makePost(e,n){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new X(e,Sd)}toString(){return".key"}}const Rr=new ZO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:Ze.RED,this.left=i!=null?i:fn.EMPTY_NODE,this.right=s!=null?s:fn.EMPTY_NODE}copy(e,n,r,i,s){return new Ze(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return fn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return fn.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ze.RED=!0;Ze.BLACK=!1;class V3{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ze(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class fn{constructor(e,n=fn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new fn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ze.BLACK,null,null))}remove(e){return new fn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ze.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new bd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new bd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new bd(this.root_,null,this.comparator_,!0,e)}}fn.EMPTY_NODE=new V3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(t,e){return Fo(t.name,e.name)}function b0(t,e){return Fo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nv;function j3(t){Nv=t}const ex=function(t){return typeof t=="number"?"number:"+OO(t):"string:"+t},tx=function(t){if(t.isLeafNode()){const e=t.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Pn(e,".sv"),"Priority must be a string or number.")}else k(t===Nv||t.isEmpty(),"priority of unexpected type.");k(t===Nv||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EC;class Ye{constructor(e,n=Ye.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),tx(this.priorityNode_)}static set __childrenNodeConstructor(e){EC=e}static get __childrenNodeConstructor(){return EC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ye(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ye.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Y(e)?this:Q(e)===".priority"?this.priorityNode_:Ye.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ye.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Q(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(k(r!==".priority"||rs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ye.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ex(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=OO(this.value_):e+=this.value_,this.lazyHash_=RO(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ye.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ye.__childrenNodeConstructor?-1:(k(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ye.VALUE_TYPE_ORDER.indexOf(n),s=Ye.VALUE_TYPE_ORDER.indexOf(r);return k(i>=0,"Unknown leaf type: "+n),k(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ye.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nx,rx;function q3(t){nx=t}function W3(t){rx=t}class z3 extends Gg{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Fo(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return X.MIN}maxPost(){return new X(Fr,new Ye("[PRIORITY-POST]",rx))}makePost(e,n){const r=nx(e);return new X(n,new Ye("[PRIORITY-POST]",r))}toString(){return".priority"}}const fe=new z3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=Math.log(2);class H3{constructor(e){const n=s=>parseInt(Math.log(s)/K3,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tp=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let h,d;if(c===0)return null;if(c===1)return h=t[l],d=n?n(h):h,new Ze(d,h.node,Ze.BLACK,null,null);{const f=parseInt(c/2,10)+l,m=i(l,f),_=i(f+1,u);return h=t[f],d=n?n(h):h,new Ze(d,h.node,Ze.BLACK,m,_)}},s=function(l){let u=null,c=null,h=t.length;const d=function(m,_){const p=h-m,g=h;h-=m;const y=i(p+1,g),v=t[p],w=n?n(v):v;f(new Ze(w,v.node,_,null,y))},f=function(m){u?(u.left=m,u=m):(c=m,u=m)};for(let m=0;m<l.count;++m){const _=l.nextBitIsOne(),p=Math.pow(2,l.count-(m+1));_?d(p,Ze.BLACK):(d(p,Ze.BLACK),d(p,Ze.RED))}return c},o=new H3(t.length),a=s(o);return new fn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $y;const ta={};class ti{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return k(ta&&fe,"ChildrenNode.ts has not been loaded"),$y=$y||new ti({".priority":ta},{".priority":fe}),$y}get(e){const n=ro(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof fn?n:null}hasIndex(e){return Pn(this.indexSet_,e.toString())}addIndex(e,n){k(e!==Rr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(X.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=tp(r,e.getCompare()):a=ta;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new ti(c,u)}addToIndexes(e,n){const r=Uf(this.indexes_,(i,s)=>{const o=ro(this.indexSet_,s);if(k(o,"Missing index implementation for "+s),i===ta)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(X.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),tp(a,o.getCompare())}else return ta;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new X(e.name,a))),l.insert(e,e.node)}});return new ti(r,this.indexSet_)}removeFromIndexes(e,n){const r=Uf(this.indexes_,i=>{if(i===ta)return i;{const s=n.get(e.name);return s?i.remove(new X(e.name,s)):i}});return new ti(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu;class V{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&tx(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fu||(fu=new V(new fn(b0),null,ti.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fu}updatePriority(e){return this.children_.isEmpty()?this:new V(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?fu:n}}getChild(e){const n=Q(e);return n===null?this:this.getImmediateChild(n).getChild(ue(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(k(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new X(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?fu:this.priorityNode_;return new V(i,o,s)}}updateChild(e,n){const r=Q(e);if(r===null)return n;{k(Q(e)!==".priority"||rs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ue(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(fe,(o,a)=>{n[o]=a.val(e),r++,s&&V.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ex(this.getPriority().val())+":"),this.forEachChild(fe,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":RO(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new X(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new X(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new X(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,X.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,X.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Nh?-1:0}withIndex(e){if(e===Rr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new V(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Rr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(fe),i=n.getIterator(fe);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Rr?null:this.indexMap_.get(e.toString())}}V.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class G3 extends V{constructor(){super(new fn(b0),V.EMPTY_NODE,ti.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return V.EMPTY_NODE}isEmpty(){return!1}}const Nh=new G3;Object.defineProperties(X,{MIN:{value:new X(di,V.EMPTY_NODE)},MAX:{value:new X(Fr,Nh)}});ZO.__EMPTY_NODE=V.EMPTY_NODE;Ye.__childrenNodeConstructor=V;j3(Nh);W3(Nh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=!0;function be(t,e=null){if(t===null)return V.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ye(n,be(e))}if(!(t instanceof Array)&&Q3){const n=[];let r=!1;if(ht(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=be(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new X(o,l)))}}),n.length===0)return V.EMPTY_NODE;const s=tp(n,B3,o=>o.name,b0);if(r){const o=tp(n,fe.getCompare());return new V(s,be(e),new ti({".priority":o},{".priority":fe}))}else return new V(s,be(e),ti.Default)}else{let n=V.EMPTY_NODE;return ht(t,(r,i)=>{if(Pn(t,r)&&r.substring(0,1)!=="."){const s=be(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(be(e))}}q3(be);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0 extends Gg{constructor(e){super();this.indexPath_=e,k(!Y(e)&&Q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Fo(e.name,n.name):s}makePost(e,n){const r=be(e),i=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new X(n,i)}maxPost(){const e=V.EMPTY_NODE.updateChild(this.indexPath_,Nh);return new X(Fr,e)}toString(){return Cc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3 extends Gg{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Fo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return X.MIN}maxPost(){return X.MAX}makePost(e,n){const r=be(e);return new X(n,r)}toString(){return".value"}}const k0=new Y3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Pv="-",ix="z",sx=786,X3=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Xa.charAt(n%64),n=Math.floor(n/64);k(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Xa.charAt(e[i]);return k(o.length===20,"nextPushId: Length should be 20."),o}}(),IC=function(t){if(t===""+y0)return Pv;const e=Jf(t);if(e!=null)return""+(e+1);const n=new Array(t.length);for(let o=0;o<n.length;o++)n[o]=t.charAt(o);if(n.length<sx)return n.push(Pv),n.join("");let r=n.length-1;for(;r>=0&&n[r]===ix;)r--;if(r===-1)return Fr;const i=n[r],s=Xa.charAt(Xa.indexOf(i)+1);return n[r]=s,n.slice(0,r+1).join("")},TC=function(t){if(t===""+xO)return di;const e=Jf(t);if(e!=null)return""+(e-1);const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=t.charAt(r);return n[n.length-1]===Pv?n.length===1?""+y0:(delete n[n.length-1],n.join("")):(n[n.length-1]=Xa.charAt(Xa.indexOf(n[n.length-1])-1),n.join("")+ix.repeat(sx-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){return{type:"value",snapshotNode:t}}function Ja(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function kc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ac(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function J3(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(kc(n,a)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ja(n,r)):o.trackChildChange(Ac(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(fe,(i,s)=>{n.hasChild(i)||r.trackChildChange(kc(i,s))}),n.isLeafNode()||n.forEachChild(fe,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ac(i,s,o))}else r.trackChildChange(Ja(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?V.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.indexedFilter_=new A0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rc.getStartPost_(e),this.endPost_=Rc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,n,r,i,s,o){return this.matches(new X(n,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=V.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(V.EMPTY_NODE);const s=this;return n.forEachChild(fe,(o,a)=>{s.matches(new X(o,a))||(i=i.updateImmediateChild(o,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.rangedFilter_=new Rc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new X(n,r))||(r=V.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=V.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:l=this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(a.name,a.node),o++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(V.EMPTY_NODE);let s,o,a,l;if(this.reverse_){l=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const h=this.index_.getCompare();a=(d,f)=>h(f,d)}else l=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let u=0,c=!1;for(;l.hasNext();){const h=l.getNext();!c&&a(s,h)<=0&&(c=!0),c&&u<this.limit_&&a(h,o)<=0?u++:i=i.updateImmediateChild(h.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;k(a.numChildren()===this.limit_,"");const l=new X(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,l);if(c&&!r.isEmpty()&&f>=0)return s!=null&&s.trackChildChange(Ac(n,r,h)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(kc(n,h));const _=a.updateImmediateChild(n,V.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(Ja(d.name,d.node)),_.updateImmediateChild(d.name,d.node)):_}}else return r.isEmpty()?e:c&&o(u,l)>=0?(s!=null&&(s.trackChildChange(kc(u.name,u.node)),s.trackChildChange(Ja(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,V.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fe}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:di}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fe}copy(){const e=new Qg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function e4(t){return t.loadsAllData()?new A0(t.getIndex()):t.hasLimit()?new Z3(t):new Rc(t)}function t4(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function n4(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Ov(t,e,n){const r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function r4(t,e,n){let r;if(t.index_===Rr)typeof e=="string"&&(e=IC(e)),r=Ov(t,e,n);else{let i;n==null?i=Fr:i=IC(n),r=Ov(t,e,i)}return r.startAfterSet_=!0,r}function xv(t,e,n){const r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function i4(t,e,n){let r,i;return t.index_===Rr?(typeof e=="string"&&(e=TC(e)),i=xv(t,e,n)):(n==null?r=di:r=TC(n),i=xv(t,e,r)),i.endBeforeSet_=!0,i}function Yg(t,e){const n=t.copy();return n.index_=e,n}function SC(t){const e={};if(t.isDefault())return e;let n;return t.index_===fe?n="$priority":t.index_===k0?n="$value":t.index_===Rr?n="$key":(k(t.index_ instanceof C0,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ze(n),t.startSet_&&(e.startAt=ze(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+ze(t.indexStartName_))),t.endSet_&&(e.endAt=ze(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+ze(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function bC(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==fe&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends QO{constructor(e,n,r,i){super();this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Rh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=np.getListenId_(e,r),a={};this.listens_[o]=a;const l=SC(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let h=c;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(s,h,!1,r),ro(this.listens_,o)===a){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=np.getListenId_(e,n);delete this.listens_[r]}get(e){const n=SC(e._queryParams),r=e._path.toString(),i=new We;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+xo(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=fc(a.responseText)}catch{rn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&rn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(){return{value:null,children:new Map}}function xl(t,e,n){if(Y(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Q(e);t.children.has(r)||t.children.set(r,rp());const i=t.children.get(r);e=ue(e),xl(i,e,n)}}function Dv(t,e){if(Y(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(fe,(r,i)=>{xl(t,new ae(r),i)}),Dv(t,e)}}else if(t.children.size>0){const n=Q(e);return e=ue(e),t.children.has(n)&&Dv(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function Mv(t,e,n){t.value!==null?n(e,t.value):o4(t,(r,i)=>{const s=new ae(e.toString()+"/"+r);Mv(i,s,n)})}function o4(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ht(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=10*1e3,l4=30*1e3,u4=5*60*1e3;class c4{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new a4(e);const r=CC+(l4-CC)*Math.random();Bu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ht(e,(i,s)=>{s>0&&Pn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Bu(this.reportStats_.bind(this),Math.floor(Math.random()*2*u4))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ar||(ar={}));function R0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function N0(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function P0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ar.ACK_USER_WRITE,this.source=R0()}operationForChild(e){if(Y(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ae(e));return new ip(ie(),n,this.revert)}}else return k(Q(this.path)===e,"operationForChild called for unrelated child."),new ip(ue(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.source=e,this.path=n,this.type=ar.LISTEN_COMPLETE}operationForChild(e){return Y(this.path)?new Nc(this.source,ie()):new Nc(this.source,ue(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ar.OVERWRITE}operationForChild(e){return Y(this.path)?new uo(this.source,ie(),this.snap.getImmediateChild(e)):new uo(this.source,ue(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ar.MERGE}operationForChild(e){if(Y(this.path)){const n=this.children.subtree(new ae(e));return n.isEmpty()?null:n.value?new uo(this.source,ie(),n.value):new Za(this.source,ie(),n)}else return k(Q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Za(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Y(e))return this.isFullyInitialized()&&!this.filtered_;const n=Q(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function d4(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(J3(o.childName,o.snapshotNode))}),pu(t,i,"child_removed",e,r,n),pu(t,i,"child_added",e,r,n),pu(t,i,"child_moved",s,r,n),pu(t,i,"child_changed",e,r,n),pu(t,i,"value",e,r,n),i}function pu(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>p4(t,a,l)),o.forEach(a=>{const l=f4(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function f4(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function p4(t,e,n){if(e.childName==null||n.childName==null)throw Cl("Should only compare child_ events.");const r=new X(e.childName,e.snapshotNode),i=new X(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t,e){return{eventCache:t,serverCache:e}}function ju(t,e,n,r){return Xg(new is(e,n,r),t.serverCache)}function ax(t,e,n,r){return Xg(t.eventCache,new is(e,n,r))}function sp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function co(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uy;const g4=()=>(Uy||(Uy=new fn(YG)),Uy);class de{constructor(e,n=g4()){this.value=e,this.children=n}static fromObject(e){let n=new de(null);return ht(e,(r,i)=>{n=n.set(new ae(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ie(),value:this.value};if(Y(e))return null;{const r=Q(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ue(e),n);return s!=null?{path:Ie(new ae(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Y(e))return this;{const n=Q(e),r=this.children.get(n);return r!==null?r.subtree(ue(e)):new de(null)}}set(e,n){if(Y(e))return new de(n,this.children);{const r=Q(e),s=(this.children.get(r)||new de(null)).set(ue(e),n),o=this.children.insert(r,s);return new de(this.value,o)}}remove(e){if(Y(e))return this.children.isEmpty()?new de(null):new de(null,this.children);{const n=Q(e),r=this.children.get(n);if(r){const i=r.remove(ue(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new de(null):new de(this.value,s)}else return this}}get(e){if(Y(e))return this.value;{const n=Q(e),r=this.children.get(n);return r?r.get(ue(e)):null}}setTree(e,n){if(Y(e))return n;{const r=Q(e),s=(this.children.get(r)||new de(null)).setTree(ue(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new de(this.value,o)}}fold(e){return this.fold_(ie(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ie(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ie(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Y(e))return null;{const s=Q(e),o=this.children.get(s);return o?o.findOnPath_(ue(e),Ie(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ie(),n)}foreachOnPath_(e,n,r){if(Y(e))return this;{this.value&&r(n,this.value);const i=Q(e),s=this.children.get(i);return s?s.foreachOnPath_(ue(e),Ie(n,i),r):new de(null)}}foreach(e){this.foreach_(ie(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ie(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.writeTree_=e}static empty(){return new cr(new de(null))}}function qu(t,e,n){if(Y(e))return new cr(new de(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Zt(i,e);return s=s.updateChild(o,n),new cr(t.writeTree_.set(i,s))}else{const i=new de(n),s=t.writeTree_.setTree(e,i);return new cr(s)}}}function Lv(t,e,n){let r=t;return ht(n,(i,s)=>{r=qu(r,Ie(e,i),s)}),r}function kC(t,e){if(Y(e))return cr.empty();{const n=t.writeTree_.setTree(e,new de(null));return new cr(n)}}function Fv(t,e){return $o(t,e)!=null}function $o(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Zt(n.path,e)):null}function AC(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(fe,(r,i)=>{e.push(new X(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new X(r,i.value))}),e}function qi(t,e){if(Y(e))return t;{const n=$o(t,e);return n!=null?new cr(new de(n)):new cr(t.writeTree_.subtree(e))}}function $v(t){return t.writeTree_.isEmpty()}function el(t,e){return lx(ie(),t.writeTree_,e)}function lx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(k(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=lx(Ie(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ie(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t,e){return dx(e,t)}function m4(t,e,n,r,i){k(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=qu(t.visibleWrites,e,n)),t.lastWriteId=r}function y4(t,e,n,r){k(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Lv(t.visibleWrites,e,n),t.lastWriteId=r}function _4(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function v4(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);k(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&w4(a,r.path)?i=!1:Un(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return E4(t),!0;if(r.snap)t.visibleWrites=kC(t.visibleWrites,r.path);else{const a=r.children;ht(a,l=>{t.visibleWrites=kC(t.visibleWrites,Ie(r.path,l))})}return!0}else return!1}function w4(t,e){if(t.snap)return Un(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Un(Ie(t.path,n),e))return!0;return!1}function E4(t){t.visibleWrites=ux(t.allWrites,I4,ie()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function I4(t){return t.visible}function ux(t,e,n){let r=cr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Un(n,o)?(a=Zt(n,o),r=qu(r,a,s.snap)):Un(o,n)&&(a=Zt(o,n),r=qu(r,ie(),s.snap.getChild(a)));else if(s.children){if(Un(n,o))a=Zt(n,o),r=Lv(r,a,s.children);else if(Un(o,n))if(a=Zt(o,n),Y(a))r=Lv(r,ie(),s.children);else{const l=ro(s.children,Q(a));if(l){const u=l.getChild(ue(a));r=qu(r,ie(),u)}}}else throw Cl("WriteRecord should have .snap or .children")}}return r}function cx(t,e,n,r,i){if(!r&&!i){const s=$o(t.visibleWrites,e);if(s!=null)return s;{const o=qi(t.visibleWrites,e);if($v(o))return n;if(n==null&&!Fv(o,ie()))return null;{const a=n||V.EMPTY_NODE;return el(o,a)}}}else{const s=qi(t.visibleWrites,e);if(!i&&$v(s))return n;if(!i&&n==null&&!Fv(s,ie()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Un(u.path,e)||Un(e,u.path))},a=ux(t.allWrites,o,e),l=n||V.EMPTY_NODE;return el(a,l)}}}function T4(t,e,n){let r=V.EMPTY_NODE;const i=$o(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(fe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=qi(t.visibleWrites,e);return n.forEachChild(fe,(o,a)=>{const l=el(qi(s,new ae(o)),a);r=r.updateImmediateChild(o,l)}),AC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=qi(t.visibleWrites,e);return AC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function S4(t,e,n,r,i){k(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ie(e,n);if(Fv(t.visibleWrites,s))return null;{const o=qi(t.visibleWrites,s);return $v(o)?i.getChild(n):el(o,i.getChild(n))}}function b4(t,e,n,r){const i=Ie(e,n),s=$o(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=qi(t.visibleWrites,i);return el(o,r.getNode().getImmediateChild(n))}else return null}function C4(t,e){return $o(t.visibleWrites,e)}function k4(t,e,n,r,i,s,o){let a;const l=qi(t.visibleWrites,e),u=$o(l,ie());if(u!=null)a=u;else if(n!=null)a=el(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const c=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&c.length<i;)h(f,r)!==0&&c.push(f),f=d.getNext();return c}else return[]}function A4(){return{visibleWrites:cr.empty(),allWrites:[],lastWriteId:-1}}function op(t,e,n,r){return cx(t.writeTree,t.treePath,e,n,r)}function O0(t,e){return T4(t.writeTree,t.treePath,e)}function RC(t,e,n,r){return S4(t.writeTree,t.treePath,e,n,r)}function ap(t,e){return C4(t.writeTree,Ie(t.treePath,e))}function R4(t,e,n,r,i,s){return k4(t.writeTree,t.treePath,e,n,r,i,s)}function x0(t,e,n){return b4(t.writeTree,t.treePath,e,n)}function hx(t,e){return dx(Ie(t.treePath,e),t.writeTree)}function dx(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;k(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),k(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Ac(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,kc(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ja(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ac(r,e.snapshotNode,i.oldSnap));else throw Cl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const fx=new P4;class D0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new is(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return x0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:co(this.viewCache_),s=R4(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){return{filter:t}}function x4(t,e){k(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function D4(t,e,n,r,i){const s=new N4;let o,a;if(n.type===ar.OVERWRITE){const u=n;u.source.fromUser?o=Uv(t,e,u.path,u.snap,r,i,s):(k(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Y(u.path),o=lp(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===ar.MERGE){const u=n;u.source.fromUser?o=L4(t,e,u.path,u.children,r,i,s):(k(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Vv(t,e,u.path,u.children,r,i,a,s))}else if(n.type===ar.ACK_USER_WRITE){const u=n;u.revert?o=U4(t,e,u.path,r,i,s):o=F4(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===ar.LISTEN_COMPLETE)o=$4(t,e,n.path,r,s);else throw Cl("Unknown operation type: "+n.type);const l=s.getChanges();return M4(e,o,l),{viewCache:o,changes:l}}function M4(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=sp(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ox(sp(e)))}}function px(t,e,n,r,i,s){const o=e.eventCache;if(ap(r,n)!=null)return e;{let a,l;if(Y(n))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=co(e),c=u instanceof V?u:V.EMPTY_NODE,h=O0(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const u=op(r,co(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=Q(n);if(u===".priority"){k(rs(n)===1,"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const h=RC(r,n,c,l);h!=null?a=t.filter.updatePriority(c,h):a=o.getNode()}else{const c=ue(n);let h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const d=RC(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(u).updateChild(c,d):h=o.getNode().getImmediateChild(u)}else h=x0(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,c,i,s):a=o.getNode()}}return ju(e,a,o.isFullyInitialized()||Y(n),t.filter.filtersNodes())}}function lp(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(Y(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),f,null)}else{const f=Q(n);if(!l.isCompleteForPath(n)&&rs(n)>1)return e;const m=ue(n),p=l.getNode().getImmediateChild(f).updateChild(m,r);f===".priority"?u=c.updatePriority(l.getNode(),p):u=c.updateChild(l.getNode(),f,p,m,fx,null)}const h=ax(e,u,l.isFullyInitialized()||Y(n),c.filtersNodes()),d=new D0(i,h,s);return px(t,h,n,i,d,a)}function Uv(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new D0(i,e,s);if(Y(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ju(e,u,!0,t.filter.filtersNodes());else{const h=Q(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=ju(e,u,a.isFullyInitialized(),a.isFiltered());else{const d=ue(n),f=a.getNode().getImmediateChild(h);let m;if(Y(d))m=r;else{const _=c.getCompleteChild(h);_!=null?I0(d)===".priority"&&_.getChild(XO(d)).isEmpty()?m=_:m=_.updateChild(d,r):m=V.EMPTY_NODE}if(f.equals(m))l=e;else{const _=t.filter.updateChild(a.getNode(),h,m,d,c,o);l=ju(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function NC(t,e){return t.eventCache.isCompleteForChild(e)}function L4(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=Ie(n,l);NC(e,Q(c))&&(a=Uv(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=Ie(n,l);NC(e,Q(c))||(a=Uv(t,a,c,u,i,s,o))}),a}function PC(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Vv(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Y(n)?u=r:u=new de(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((h,d)=>{if(c.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),m=PC(t,f,d);l=lp(t,l,new ae(h),m,i,s,o,a)}}),u.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===void 0;if(!c.hasChild(h)&&!f){const m=e.serverCache.getNode().getImmediateChild(h),_=PC(t,m,d);l=lp(t,l,new ae(h),_,i,s,o,a)}}),l}function F4(t,e,n,r,i,s,o){if(ap(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Y(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return lp(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Y(n)){let u=new de(null);return l.getNode().forEachChild(Rr,(c,h)=>{u=u.set(new ae(c),h)}),Vv(t,e,n,u,i,s,a,o)}else return e}else{let u=new de(null);return r.foreach((c,h)=>{const d=Ie(n,c);l.isCompleteForPath(d)&&(u=u.set(c,l.getNode().getChild(d)))}),Vv(t,e,n,u,i,s,a,o)}}function $4(t,e,n,r,i){const s=e.serverCache,o=ax(e,s.getNode(),s.isFullyInitialized()||Y(n),s.isFiltered());return px(t,o,n,r,fx,i)}function U4(t,e,n,r,i,s){let o;if(ap(r,n)!=null)return e;{const a=new D0(r,e,i),l=e.eventCache.getNode();let u;if(Y(n)||Q(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=op(r,co(e));else{const h=e.serverCache.getNode();k(h instanceof V,"serverChildren would be complete if leaf node"),c=O0(r,h)}c=c,u=t.filter.updateFullNode(l,c,s)}else{const c=Q(n);let h=x0(r,c,e.serverCache);h==null&&e.serverCache.isCompleteForChild(c)&&(h=l.getImmediateChild(c)),h!=null?u=t.filter.updateChild(l,c,h,ue(n),a,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,V.EMPTY_NODE,ue(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=op(r,co(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||ap(r,ie())!=null,ju(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new A0(r.getIndex()),s=e4(r);this.processor_=O4(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(V.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(V.EMPTY_NODE,a.getNode(),null),c=new is(l,o.isFullyInitialized(),i.filtersNodes()),h=new is(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Xg(h,c),this.eventGenerator_=new h4(this.query_)}get query(){return this.query_}}function B4(t){return t.viewCache_.serverCache.getNode()}function j4(t){return sp(t.viewCache_)}function q4(t,e){const n=co(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Y(e)&&!n.getImmediateChild(Q(e)).isEmpty())?n.getChild(e):null}function OC(t){return t.eventRegistrations_.length===0}function W4(t,e){t.eventRegistrations_.push(e)}function xC(t,e,n){const r=[];if(n){k(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function DC(t,e,n,r){e.type===ar.MERGE&&e.source.queryId!==null&&(k(co(t.viewCache_),"We should always have a full cache before handling merges"),k(sp(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=D4(t.processor_,i,e,n,r);return x4(t.processor_,s.viewCache),k(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,gx(t,s.changes,s.viewCache.eventCache.getNode(),null)}function z4(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(fe,(s,o)=>{r.push(Ja(s,o))}),n.isFullyInitialized()&&r.push(ox(n.getNode())),gx(t,r,n.getNode(),e)}function gx(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return d4(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up;class mx{constructor(){this.views=new Map}}function K4(t){k(!up,"__referenceConstructor has already been defined"),up=t}function H4(){return k(up,"Reference.ts has not been loaded"),up}function G4(t){return t.views.size===0}function M0(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return k(s!=null,"SyncTree gave us an op for an invalid query."),DC(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(DC(o,e,n,r));return s}}function yx(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=op(n,i?r:null),l=!1;a?l=!0:r instanceof V?(a=O0(n,r),l=!1):(a=V.EMPTY_NODE,l=!1);const u=Xg(new is(a,l,!1),new is(r,i,!1));return new V4(e,u)}return o}function Q4(t,e,n,r,i,s){const o=yx(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),W4(o,n),z4(o,n)}function Y4(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=ss(t);if(i==="default")for(const[l,u]of t.views.entries())o=o.concat(xC(u,n,r)),OC(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(xC(l,n,r)),OC(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!ss(t)&&s.push(new(H4())(e._repo,e._path)),{removed:s,events:o}}function _x(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Wi(t,e){let n=null;for(const r of t.views.values())n=n||q4(r,e);return n}function vx(t,e){if(e._queryParams.loadsAllData())return Zg(t);{const r=e._queryIdentifier;return t.views.get(r)}}function wx(t,e){return vx(t,e)!=null}function ss(t){return Zg(t)!=null}function Zg(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cp;function X4(t){k(!cp,"__referenceConstructor has already been defined"),cp=t}function J4(){return k(cp,"Reference.ts has not been loaded"),cp}let Z4=1;class MC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new de(null),this.pendingWriteTree_=A4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function L0(t,e,n,r,i){return m4(t.pendingWriteTree_,e,n,r,i),i?Dl(t,new uo(R0(),e,n)):[]}function e6(t,e,n,r){y4(t.pendingWriteTree_,e,n,r);const i=de.fromObject(n);return Dl(t,new Za(R0(),e,i))}function Di(t,e,n=!1){const r=_4(t.pendingWriteTree_,e);if(v4(t.pendingWriteTree_,e)){let s=new de(null);return r.snap!=null?s=s.set(ie(),!0):ht(r.children,o=>{s=s.set(new ae(o),!0)}),Dl(t,new ip(r.path,s,n))}else return[]}function Ph(t,e,n){return Dl(t,new uo(N0(),e,n))}function t6(t,e,n){const r=de.fromObject(n);return Dl(t,new Za(N0(),e,r))}function n6(t,e){return Dl(t,new Nc(N0(),e))}function r6(t,e,n){const r=F0(t,n);if(r){const i=$0(r),s=i.path,o=i.queryId,a=Zt(s,e),l=new Nc(P0(o),a);return U0(t,s,l)}else return[]}function Bv(t,e,n,r){const i=e._path,s=t.syncPointTree_.get(i);let o=[];if(s&&(e._queryIdentifier==="default"||wx(s,e))){const a=Y4(s,e,n,r);G4(s)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=a.removed;o=a.events;const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(i,(h,d)=>ss(d));if(u&&!c){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const d=a6(h);for(let f=0;f<d.length;++f){const m=d[f],_=m.query,p=Tx(t,m);t.listenProvider_.startListening(Wu(_),hp(t,_),p.hashFn,p.onComplete)}}}!c&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Wu(e),null):l.forEach(h=>{const d=t.queryToTagMap.get(tm(h));t.listenProvider_.stopListening(Wu(h),d)})),l6(t,l)}return o}function i6(t,e,n,r){const i=F0(t,r);if(i!=null){const s=$0(i),o=s.path,a=s.queryId,l=Zt(o,e),u=new uo(P0(a),l,n);return U0(t,o,u)}else return[]}function s6(t,e,n,r){const i=F0(t,r);if(i){const s=$0(i),o=s.path,a=s.queryId,l=Zt(o,e),u=de.fromObject(n),c=new Za(P0(a),l,u);return U0(t,o,c)}else return[]}function LC(t,e,n){const r=e._path;let i=null,s=!1;t.syncPointTree_.foreachOnPath(r,(h,d)=>{const f=Zt(h,r);i=i||Wi(d,f),s=s||ss(d)});let o=t.syncPointTree_.get(r);o?(s=s||ss(o),i=i||Wi(o,ie())):(o=new mx,t.syncPointTree_=t.syncPointTree_.set(r,o));let a;i!=null?a=!0:(a=!1,i=V.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((d,f)=>{const m=Wi(f,ie());m&&(i=i.updateImmediateChild(d,m))}));const l=wx(o,e);if(!l&&!e._queryParams.loadsAllData()){const h=tm(e);k(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const d=u6();t.queryToTagMap.set(h,d),t.tagToQueryMap.set(d,h)}const u=Jg(t.pendingWriteTree_,r);let c=Q4(o,e,n,u,i,a);if(!l&&!s){const h=vx(o,e);c=c.concat(c6(t,e,h))}return c}function em(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Zt(o,e),u=Wi(a,l);if(u)return u});return cx(i,e,s,n,!0)}function o6(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,c)=>{const h=Zt(u,n);r=r||Wi(c,h)});let i=t.syncPointTree_.get(n);i?r=r||Wi(i,ie()):(i=new mx,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new is(r,!0,!1):null,a=Jg(t.pendingWriteTree_,e._path),l=yx(i,e,a,s?o.getNode():V.EMPTY_NODE,s);return j4(l)}function Dl(t,e){return Ex(e,t.syncPointTree_,null,Jg(t.pendingWriteTree_,ie()))}function Ex(t,e,n,r){if(Y(t.path))return Ix(t,e,n,r);{const i=e.get(ie());n==null&&i!=null&&(n=Wi(i,ie()));let s=[];const o=Q(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=hx(r,o);s=s.concat(Ex(a,l,u,c))}return i&&(s=s.concat(M0(i,t,r,n))),s}}function Ix(t,e,n,r){const i=e.get(ie());n==null&&i!=null&&(n=Wi(i,ie()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=hx(r,o),c=t.operationForChild(o);c&&(s=s.concat(Ix(c,a,l,u)))}),i&&(s=s.concat(M0(i,t,r,n))),s}function Tx(t,e){const n=e.query,r=hp(t,n);return{hashFn:()=>(B4(e)||V.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?r6(t,n._path,r):n6(t,n._path);{const s=ZG(i,n);return Bv(t,n,null,s)}}}}function hp(t,e){const n=tm(e);return t.queryToTagMap.get(n)}function tm(t){return t._path.toString()+"$"+t._queryIdentifier}function F0(t,e){return t.tagToQueryMap.get(e)}function $0(t){const e=t.indexOf("$");return k(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ae(t.substr(0,e))}}function U0(t,e,n){const r=t.syncPointTree_.get(e);k(r,"Missing sync point for query tag that we're tracking");const i=Jg(t.pendingWriteTree_,e);return M0(r,n,i,null)}function a6(t){return t.fold((e,n,r)=>{if(n&&ss(n))return[Zg(n)];{let i=[];return n&&(i=_x(n)),ht(r,(s,o)=>{i=i.concat(o)}),i}})}function Wu(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(J4())(t._repo,t._path):t}function l6(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=tm(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function u6(){return Z4++}function c6(t,e,n){const r=e._path,i=hp(t,e),s=Tx(t,n),o=t.listenProvider_.startListening(Wu(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)k(!ss(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,c,h)=>{if(!Y(u)&&c&&ss(c))return[Zg(c).query];{let d=[];return c&&(d=d.concat(_x(c).map(f=>f.query))),ht(h,(f,m)=>{d=d.concat(m)}),d}});for(let u=0;u<l.length;++u){const c=l[u];t.listenProvider_.stopListening(Wu(c),hp(t,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new V0(n)}node(){return this.node_}}class B0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ie(this.path_,e);return new B0(this.syncTree_,n)}node(){return em(this.syncTree_,this.path_)}}const h6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},FC=function(t,e,n){if(!t||typeof t!="object")return t;if(k(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return d6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return f6(t[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},d6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:k(!1,"Unexpected server value: "+t)}},f6=function(t,e,n){t.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&k(!1,"Unexpected increment value: "+r);const i=e.node();if(k(i!==null&&typeof i!="undefined","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Sx=function(t,e,n,r){return q0(e,new B0(n,t),r)},j0=function(t,e,n){return q0(t,new V0(e),n)};function q0(t,e,n){const r=t.getPriority().val(),i=FC(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=FC(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ye(a,be(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ye(i))),o.forEachChild(fe,(a,l)=>{const u=q0(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function nm(t,e){let n=e instanceof ae?e:new ae(e),r=t,i=Q(n);for(;i!==null;){const s=ro(r.node.children,i)||{children:{},childCount:0};r=new W0(i,r,s),n=ue(n),i=Q(n)}return r}function Uo(t){return t.node.value}function z0(t,e){t.node.value=e,jv(t)}function bx(t){return t.node.childCount>0}function p6(t){return Uo(t)===void 0&&!bx(t)}function rm(t,e){ht(t.node.children,(n,r)=>{e(new W0(n,t,r))})}function Cx(t,e,n,r){n&&!r&&e(t),rm(t,i=>{Cx(i,e,!0,r)}),n&&r&&e(t)}function g6(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Oh(t){return new ae(t.parent===null?t.name:Oh(t.parent)+"/"+t.name)}function jv(t){t.parent!==null&&m6(t.parent,t.name,t)}function m6(t,e,n){const r=p6(n),i=Pn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,jv(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,jv(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=/[\[\].#$\/\u0000-\u001F\u007F]/,_6=/[\[\].#$\u0000-\u001F\u007F]/,Vy=10*1024*1024,im=function(t){return typeof t=="string"&&t.length!==0&&!y6.test(t)},kx=function(t){return typeof t=="string"&&t.length!==0&&!_6.test(t)},v6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kx(t)},Pc=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Hg(t)||t&&typeof t=="object"&&Pn(t,".sv")},$r=function(t,e,n,r){r&&e===void 0||xh(yn(t,"value"),e,n)},xh=function(t,e,n){const r=n instanceof ae?new O3(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+As(r));if(typeof e=="function")throw new Error(t+"contains a function "+As(r)+" with contents = "+e.toString());if(Hg(e))throw new Error(t+"contains "+e.toString()+" "+As(r));if(typeof e=="string"&&e.length>Vy/3&&kg(e)>Vy)throw new Error(t+"contains a string greater than "+Vy+" utf8 bytes "+As(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ht(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!im(o)))throw new Error(t+" contains an invalid key ("+o+") "+As(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);x3(r,o),xh(t,a,r),D3(r)}),i&&s)throw new Error(t+' contains ".value" child '+As(r)+" in addition to actual children.")}},w6=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Cc(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!im(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(P3);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Un(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Ax=function(t,e,n,r){if(r&&e===void 0)return;const i=yn(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ht(e,(o,a)=>{const l=new ae(o);if(xh(i,a,Ie(n,l)),I0(l)===".priority"&&!Pc(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),w6(i,s)},K0=function(t,e,n){if(!(n&&e===void 0)){if(Hg(e))throw new Error(yn(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pc(e))throw new Error(yn(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Dh=function(t,e,n,r){if(!(r&&n===void 0)&&!im(n))throw new Error(yn(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Oc=function(t,e,n,r){if(!(r&&n===void 0)&&!kx(n))throw new Error(yn(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},E6=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Oc(t,e,n,r)},Vn=function(t,e){if(Q(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Rx=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!im(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!v6(n))throw new Error(yn(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sm(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!T0(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function H0(t,e,n){sm(t,n),Nx(t,r=>T0(r,e))}function Xn(t,e,n){sm(t,n),Nx(t,r=>Un(r,e)||Un(e,r))}function Nx(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(T6(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function T6(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Xs&&et("event: "+n.toString()),Ol(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="repo_interrupt",S6=25;class b6{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new I6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rp(),this.transactionQueueTree_=new W0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function C6(t,e,n){if(t.stats_=v0(t.repoInfo_),t.forceRestClient_||t3())t.server_=new np(t.repoInfo_,(r,i,s,o)=>{$C(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>UC(t,!0),0);else{if(typeof n!="undefined"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ze(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new oi(t.repoInfo_,e,(r,i,s,o)=>{$C(t,r,i,s,o)},r=>{UC(t,r)},r=>{k6(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=a3(t.repoInfo_,()=>new c4(t.stats_,t.server_)),t.infoData_=new s4,t.infoSyncTree_=new MC({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Ph(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),G0(t,"connected",!1),t.serverSyncTree_=new MC({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Xn(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Ox(t){const n=t.infoData_.getNode(new ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Mh(t){return h6({timestamp:Ox(t)})}function $C(t,e,n,r,i){t.dataUpdateCount++;const s=new ae(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Uf(n,u=>be(u));o=s6(t.serverSyncTree_,s,l,i)}else{const l=be(n);o=i6(t.serverSyncTree_,s,l,i)}else if(r){const l=Uf(n,u=>be(u));o=t6(t.serverSyncTree_,s,l)}else{const l=be(n);o=Ph(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=tl(t,s)),Xn(t.eventQueue_,a,o)}function UC(t,e){G0(t,"connected",e),e===!1&&N6(t)}function k6(t,e){ht(e,(n,r)=>{G0(t,n,r)})}function G0(t,e,n){const r=new ae("/.info/"+e),i=be(n);t.infoData_.updateSnapshot(r,i);const s=Ph(t.infoSyncTree_,r,i);Xn(t.eventQueue_,r,s)}function om(t){return t.nextWriteId_++}function A6(t,e){const n=o6(t.serverSyncTree_,e);return n!=null?Promise.resolve(n):t.server_.get(e).then(r=>{const i=be(r).withIndex(e._queryParams.getIndex()),s=Ph(t.serverSyncTree_,e._path,i);return H0(t.eventQueue_,e._path,s),Promise.resolve(i)},r=>(Ml(t,"get for query "+ze(e)+" failed: "+r),Promise.reject(new Error(r))))}function Q0(t,e,n,r,i){Ml(t,"set",{path:e.toString(),value:n,priority:r});const s=Mh(t),o=be(n,r),a=em(t.serverSyncTree_,e),l=j0(o,a,s),u=om(t),c=L0(t.serverSyncTree_,e,l,u,!0);sm(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(d,f)=>{const m=d==="ok";m||rn("set at "+e+" failed: "+d);const _=Di(t.serverSyncTree_,u,!m);Xn(t.eventQueue_,e,_),os(t,i,d,f)});const h=X0(t,e);tl(t,h),Xn(t.eventQueue_,h,[])}function R6(t,e,n,r){Ml(t,"update",{path:e.toString(),value:n});let i=!0;const s=Mh(t),o={};if(ht(n,(a,l)=>{i=!1,o[a]=Sx(Ie(e,a),be(l),t.serverSyncTree_,s)}),i)et("update() called with empty data.  Don't do anything."),os(t,r,"ok",void 0);else{const a=om(t),l=e6(t.serverSyncTree_,e,o,a);sm(t.eventQueue_,l),t.server_.merge(e.toString(),n,(u,c)=>{const h=u==="ok";h||rn("update at "+e+" failed: "+u);const d=Di(t.serverSyncTree_,a,!h),f=d.length>0?tl(t,e):e;Xn(t.eventQueue_,f,d),os(t,r,u,c)}),ht(n,u=>{const c=X0(t,Ie(e,u));tl(t,c)}),Xn(t.eventQueue_,e,[])}}function N6(t){Ml(t,"onDisconnectEvents");const e=Mh(t),n=rp();Mv(t.onDisconnect_,ie(),(i,s)=>{const o=Sx(i,s,t.serverSyncTree_,e);xl(n,i,o)});let r=[];Mv(n,ie(),(i,s)=>{r=r.concat(Ph(t.serverSyncTree_,i,s));const o=X0(t,i);tl(t,o)}),t.onDisconnect_=rp(),Xn(t.eventQueue_,ie(),r)}function P6(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&Dv(t.onDisconnect_,e),os(t,n,r,i)})}function VC(t,e,n,r){const i=be(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{s==="ok"&&xl(t.onDisconnect_,e,i),os(t,r,s,o)})}function O6(t,e,n,r,i){const s=be(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{o==="ok"&&xl(t.onDisconnect_,e,s),os(t,i,o,a)})}function x6(t,e,n,r){if($f(n)){et("onDisconnect().update() called with empty data.  Don't do anything."),os(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&ht(n,(o,a)=>{const l=be(a);xl(t.onDisconnect_,Ie(e,o),l)}),os(t,r,i,s)})}function D6(t,e,n){let r;Q(e._path)===".info"?r=LC(t.infoSyncTree_,e,n):r=LC(t.serverSyncTree_,e,n),H0(t.eventQueue_,e._path,r)}function qv(t,e,n){let r;Q(e._path)===".info"?r=Bv(t.infoSyncTree_,e,n):r=Bv(t.serverSyncTree_,e,n),H0(t.eventQueue_,e._path,r)}function xx(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Px)}function M6(t){t.persistentConnection_&&t.persistentConnection_.resume(Px)}function Ml(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),et(n,...e)}function os(t,e,n,r){e&&Ol(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function L6(t,e,n,r,i,s){Ml(t,"transaction on "+e);const o={path:e,update:n,onComplete:r,status:null,order:AO(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Y0(t,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{xh("transaction failed: Data returned ",l,o.path),o.status=0;const u=nm(t.transactionQueueTree_,e),c=Uo(u)||[];c.push(o),z0(u,c);let h;typeof l=="object"&&l!==null&&Pn(l,".priority")?(h=ro(l,".priority"),k(Pc(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(em(t.serverSyncTree_,e)||V.EMPTY_NODE).getPriority().val();const d=Mh(t),f=be(l,h),m=j0(f,a,d);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=m,o.currentWriteId=om(t);const _=L0(t.serverSyncTree_,e,m,o.currentWriteId,o.applyLocally);Xn(t.eventQueue_,e,_),am(t,t.transactionQueueTree_)}}function Y0(t,e,n){return em(t.serverSyncTree_,e,n)||V.EMPTY_NODE}function am(t,e=t.transactionQueueTree_){if(e||lm(t,e),Uo(e)){const n=Mx(t,e);k(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&F6(t,Oh(e),n)}else bx(e)&&rm(e,n=>{am(t,n)})}function F6(t,e,n){const r=n.map(u=>u.currentWriteId),i=Y0(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];k(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const h=Zt(e,c.path);s=s.updateChild(h,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{Ml(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,c=c.concat(Di(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();lm(t,nm(t.transactionQueueTree_,e)),am(t,t.transactionQueueTree_),Xn(t.eventQueue_,e,c);for(let d=0;d<h.length;d++)Ol(h[d])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{rn("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}tl(t,e)}},o)}function tl(t,e){const n=Dx(t,e),r=Oh(n),i=Mx(t,n);return $6(t,i,r),r}function $6(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Zt(n,l.path);let c=!1,h;if(k(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,h=l.abortReason,i=i.concat(Di(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=S6)c=!0,h="maxretry",i=i.concat(Di(t.serverSyncTree_,l.currentWriteId,!0));else{const d=Y0(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){xh("transaction failed: Data returned ",f,l.path);let m=be(f);typeof f=="object"&&f!=null&&Pn(f,".priority")||(m=m.updatePriority(d.getPriority()));const p=l.currentWriteId,g=Mh(t),y=j0(m,d,g);l.currentOutputSnapshotRaw=m,l.currentOutputSnapshotResolved=y,l.currentWriteId=om(t),o.splice(o.indexOf(p),1),i=i.concat(L0(t.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally)),i=i.concat(Di(t.serverSyncTree_,p,!0))}else c=!0,h="nodata",i=i.concat(Di(t.serverSyncTree_,l.currentWriteId,!0))}Xn(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}lm(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ol(r[a]);am(t,t.transactionQueueTree_)}function Dx(t,e){let n,r=t.transactionQueueTree_;for(n=Q(e);n!==null&&Uo(r)===void 0;)r=nm(r,n),e=ue(e),n=Q(e);return r}function Mx(t,e){const n=[];return Lx(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Lx(t,e,n){const r=Uo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);rm(e,i=>{Lx(t,i,n)})}function lm(t,e){const n=Uo(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,z0(e,n.length>0?n:void 0)}rm(e,r=>{lm(t,r)})}function X0(t,e){const n=Oh(Dx(t,e)),r=nm(t.transactionQueueTree_,e);return g6(r,i=>{By(t,i)}),By(t,r),Cx(r,i=>{By(t,i)}),n}function By(t,e){const n=Uo(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(k(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(k(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Di(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?z0(e,void 0):n.length=s+1,Xn(t.eventQueue_,Oh(e),i);for(let o=0;o<r.length;o++)Ol(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function V6(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):rn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Wv=function(t,e){const n=B6(t),r=n.namespace;n.domain==="firebase.com"&&Lr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||GG();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new jO(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new ae(n.pathString)}},B6=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(c,h)),c<h&&(i=U6(t.substring(c,h)));const d=V6(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ze(this.snapshot.exportVal())}}class $x{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new We;return P6(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Vn("OnDisconnect.remove",this._path);const e=new We;return VC(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Vn("OnDisconnect.set",this._path),$r("OnDisconnect.set",e,this._path,!1);const n=new We;return VC(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Vn("OnDisconnect.setWithPriority",this._path),$r("OnDisconnect.setWithPriority",e,this._path,!1),K0("OnDisconnect.setWithPriority",n,!1);const r=new We;return O6(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Vn("OnDisconnect.update",this._path),Ax("OnDisconnect.update",e,this._path,!1);const n=new We;return x6(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Y(this._path)?null:I0(this._path)}get ref(){return new er(this._repo,this._path)}get _queryIdentifier(){const e=bC(this._queryParams),n=m0(e);return n==="{}"?"default":n}get _queryObject(){return bC(this._queryParams)}isEqual(e){if(e=S(e),!(e instanceof vn))return!1;const n=this._repo===e._repo,r=T0(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+N3(this._path)}}function um(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function _s(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Rr){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==di)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Fr)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===fe){if(e!=null&&!Pc(e)||n!=null&&!Pc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(k(t.getIndex()instanceof C0||t.getIndex()===k0,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cm(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class er extends vn{constructor(e,n){super(e,n,new Qg,!1)}get parent(){const e=XO(this._path);return e===null?null:new er(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ho{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ae(e),r=fo(this.ref,e);return new ho(this._node.getChild(n),r,fe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new ho(i,fo(this.ref,r),fe)))}hasChild(e){const n=new ae(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vx(t,e){return t=S(t),t._checkNotDeleted("ref"),e!==void 0?fo(t._root,e):t._root}function BC(t,e){t=S(t),t._checkNotDeleted("refFromURL");const n=Wv(e,t._repo.repoInfo_.nodeAdmin);Rx("refFromURL",n);const r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Lr("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Vx(t,n.path.toString())}function fo(t,e){return t=S(t),Q(t._path)===null?E6("child","path",e,!1):Oc("child","path",e,!1),new er(t._repo,Ie(t._path,e))}function q6(t,e){t=S(t),Vn("push",t._path),$r("push",e,t._path,!0);const n=Ox(t._repo),r=X3(n),i=fo(t,r),s=fo(t,r);let o;return e!=null?o=J0(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function W6(t){return Vn("remove",t._path),J0(t,null)}function J0(t,e){t=S(t),Vn("set",t._path),$r("set",e,t._path,!1);const n=new We;return Q0(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function z6(t,e){t=S(t),Vn("setPriority",t._path),K0("setPriority",e,!1);const n=new We;return Q0(t._repo,Ie(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function K6(t,e,n){if(Vn("setWithPriority",t._path),$r("setWithPriority",e,t._path,!1),K0("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";const r=new We;return Q0(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function H6(t,e){Ax("update",e,t._path,!1);const n=new We;return R6(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function G6(t){return t=S(t),A6(t._repo,t).then(e=>new ho(e,new er(t._repo,t._path),t._queryParams.getIndex()))}class hm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Fx("value",this,new ho(e.snapshotNode,new er(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $x(this,e,n):null}matches(e){return e instanceof hm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class dm{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $x(this,e,n):null}createEvent(e,n){k(e.childName!=null,"Child events should have a childName.");const r=fo(new er(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Fx(e.type,this,new ho(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof dm?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function Lh(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,u=(c,h)=>{qv(t._repo,t,a),l(c,h)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new Ux(n,s||void 0),a=e==="value"?new hm(o):new dm(e,o);return D6(t._repo,t,a),()=>qv(t._repo,t,a)}function zv(t,e,n,r){return Lh(t,"value",e,n,r)}function jC(t,e,n,r){return Lh(t,"child_added",e,n,r)}function qC(t,e,n,r){return Lh(t,"child_changed",e,n,r)}function WC(t,e,n,r){return Lh(t,"child_moved",e,n,r)}function zC(t,e,n,r){return Lh(t,"child_removed",e,n,r)}function KC(t,e,n){let r=null;const i=n?new Ux(n):null;e==="value"?r=new hm(i):e&&(r=new dm(e,i)),qv(t._repo,t,r)}class gr{}class Bx extends gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){$r("endAt",this._value,e._path,!0);const n=xv(e._queryParams,this._value,this._key);if(cm(n),_s(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vn(e._repo,e._path,n,e._orderByCalled)}}function Q6(t,e){return Dh("endAt","key",e,!0),new Bx(t,e)}class Y6 extends gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){$r("endBefore",this._value,e._path,!1);const n=i4(e._queryParams,this._value,this._key);if(cm(n),_s(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vn(e._repo,e._path,n,e._orderByCalled)}}function X6(t,e){return Dh("endBefore","key",e,!0),new Y6(t,e)}class jx extends gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){$r("startAt",this._value,e._path,!0);const n=Ov(e._queryParams,this._value,this._key);if(cm(n),_s(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vn(e._repo,e._path,n,e._orderByCalled)}}function J6(t=null,e){return Dh("startAt","key",e,!0),new jx(t,e)}class Z6 extends gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){$r("startAfter",this._value,e._path,!1);const n=r4(e._queryParams,this._value,this._key);if(cm(n),_s(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vn(e._repo,e._path,n,e._orderByCalled)}}function e5(t,e){return Dh("startAfter","key",e,!0),new Z6(t,e)}class t5 extends gr{constructor(e){super();this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vn(e._repo,e._path,t4(e._queryParams,this._limit),e._orderByCalled)}}function n5(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new t5(t)}class r5 extends gr{constructor(e){super();this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vn(e._repo,e._path,n4(e._queryParams,this._limit),e._orderByCalled)}}function i5(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new r5(t)}class s5 extends gr{constructor(e){super();this._path=e}_apply(e){um(e,"orderByChild");const n=new ae(this._path);if(Y(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new C0(n),i=Yg(e._queryParams,r);return _s(i),new vn(e._repo,e._path,i,!0)}}function o5(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Oc("orderByChild","path",t,!1),new s5(t)}class a5 extends gr{_apply(e){um(e,"orderByKey");const n=Yg(e._queryParams,Rr);return _s(n),new vn(e._repo,e._path,n,!0)}}function l5(){return new a5}class u5 extends gr{_apply(e){um(e,"orderByPriority");const n=Yg(e._queryParams,fe);return _s(n),new vn(e._repo,e._path,n,!0)}}function c5(){return new u5}class h5 extends gr{_apply(e){um(e,"orderByValue");const n=Yg(e._queryParams,k0);return _s(n),new vn(e._repo,e._path,n,!0)}}function d5(){return new h5}class f5 extends gr{constructor(e,n){super();this._value=e,this._key=n}_apply(e){if($r("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Bx(this._value,this._key)._apply(new jx(this._value,this._key)._apply(e))}}function p5(t,e){return Dh("equalTo","key",e,!0),new f5(t,e)}function nr(t,...e){let n=S(t);for(const r of e)n=r._apply(n);return n}K4(er);X4(er);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5="FIREBASE_DATABASE_EMULATOR_HOST",Kv={};let m5=!1;function y5(t,e,n,r){t.repoInfo_=new jO(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}function qx(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),et("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Wv(s,i),a=o.repoInfo,l,u;typeof process!="undefined"&&(u=process.env[g5]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=Wv(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new Ma(Ma.OWNER):new r3(t.name,t.options,e);Rx("Invalid Firebase Database URL",o),Y(o.path)||Lr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=v5(a,t,c,new n3(t.name,n));return new w5(h,t)}function _5(t,e){const n=Kv[e];(!n||n[t.key]!==t)&&Lr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),xx(t),delete n[t.key]}function v5(t,e,n,r){let i=Kv[e.name];i||(i={},Kv[e.name]=i);let s=i[t.toURLString()];return s&&Lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new b6(t,m5,n,r),i[t.toURLString()]=s,s}class w5{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(C6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new er(this._repo,ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Lr("Cannot call "+e+" on a deleted database.")}}function E5(t,e,n,r={}){t=S(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Lr("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ma(Ma.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:FE(r.mockUserToken,t.app.options.projectId);s=new Ma(o)}y5(i,e,n,s)}function I5(t){t=S(t),t._checkNotDeleted("goOffline"),xx(t._repo)}function T5(t){t=S(t),t._checkNotDeleted("goOnline"),M6(t._repo)}function S5(t,e){NO(t,e)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t){CO(Wr),Le(new se("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return qx(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ce(aC,lC,t),ce(aC,lC,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5={".sv":"timestamp"};function k5(){return C5}function A5(t){return{".sv":{increment:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function N5(t,e,n){var r;if(t=S(t),Vn("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const i=(r=n==null?void 0:n.applyLocally)!==null&&r!==void 0?r:!0,s=new We,o=(l,u,c)=>{let h=null;l?s.reject(l):(h=new ho(c,new er(t._repo,t._path),fe),s.resolve(new R5(u,h)))},a=zv(t,()=>{});return L6(t._repo,t._path,e,o,a,i),s.promise}oi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};oi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};b5();const P5="@firebase/database-compat",O5="0.1.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=new qr("@firebase/database-compat"),Wx=function(t){const e="FIREBASE WARNING: "+t;x5.warn(e)};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(yn(t,e)+"must be a boolean.")},M5=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(yn(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this._delegate=e}cancel(e){B("OnDisconnect.cancel",0,1,arguments.length),Je("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){B("OnDisconnect.remove",0,1,arguments.length),Je("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){B("OnDisconnect.set",1,2,arguments.length),Je("OnDisconnect.set","onComplete",n,!0);const r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){B("OnDisconnect.setWithPriority",2,3,arguments.length),Je("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,n){if(B("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Wx("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Je("OnDisconnect.update","onComplete",n,!0);const r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return B("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n){this._database=e,this._delegate=n}val(){return B("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return B("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return B("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return B("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return B("DataSnapshot.child",0,1,arguments.length),e=String(e),Oc("DataSnapshot.child","path",e,!1),new zi(this._database,this._delegate.child(e))}hasChild(e){return B("DataSnapshot.hasChild",1,1,arguments.length),Oc("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return B("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return B("DataSnapshot.forEach",1,1,arguments.length),Je("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new zi(this._database,n)))}hasChildren(){return B("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return B("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return B("DataSnapshot.ref",0,0,arguments.length),new Sn(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class wt{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var s;B("Query.on",2,4,arguments.length),Je("Query.on","callback",n,!1);const o=wt.getCancelAndContextArgs_("Query.on",r,i),a=(u,c)=>{n.call(o.context,new zi(this.database,u),c)};a.userCallback=n,a.context=o.context;const l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(e){case"value":return zv(this._delegate,a,l),n;case"child_added":return jC(this._delegate,a,l),n;case"child_removed":return zC(this._delegate,a,l),n;case"child_changed":return qC(this._delegate,a,l),n;case"child_moved":return WC(this._delegate,a,l),n;default:throw new Error(yn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(B("Query.off",0,3,arguments.length),M5("Query.off",e,!0),Je("Query.off","callback",n,!0),Ab("Query.off","context",r,!0),n){const i=()=>{};i.userCallback=n,i.context=r,KC(this._delegate,e,i)}else KC(this._delegate,e)}get(){return G6(this._delegate).then(e=>new zi(this.database,e))}once(e,n,r,i){B("Query.once",1,4,arguments.length),Je("Query.once","callback",n,!0);const s=wt.getCancelAndContextArgs_("Query.once",r,i),o=new We,a=(u,c)=>{const h=new zi(this.database,u);n&&n.call(s.context,h,c),o.resolve(h)};a.userCallback=n,a.context=s.context;const l=u=>{s.cancel&&s.cancel.call(s.context,u),o.reject(u)};switch(e){case"value":zv(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":jC(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":zC(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":qC(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":WC(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(yn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return B("Query.limitToFirst",1,1,arguments.length),new wt(this.database,nr(this._delegate,n5(e)))}limitToLast(e){return B("Query.limitToLast",1,1,arguments.length),new wt(this.database,nr(this._delegate,i5(e)))}orderByChild(e){return B("Query.orderByChild",1,1,arguments.length),new wt(this.database,nr(this._delegate,o5(e)))}orderByKey(){return B("Query.orderByKey",0,0,arguments.length),new wt(this.database,nr(this._delegate,l5()))}orderByPriority(){return B("Query.orderByPriority",0,0,arguments.length),new wt(this.database,nr(this._delegate,c5()))}orderByValue(){return B("Query.orderByValue",0,0,arguments.length),new wt(this.database,nr(this._delegate,d5()))}startAt(e=null,n){return B("Query.startAt",0,2,arguments.length),new wt(this.database,nr(this._delegate,J6(e,n)))}startAfter(e=null,n){return B("Query.startAfter",0,2,arguments.length),new wt(this.database,nr(this._delegate,e5(e,n)))}endAt(e=null,n){return B("Query.endAt",0,2,arguments.length),new wt(this.database,nr(this._delegate,Q6(e,n)))}endBefore(e=null,n){return B("Query.endBefore",0,2,arguments.length),new wt(this.database,nr(this._delegate,X6(e,n)))}equalTo(e,n){return B("Query.equalTo",1,2,arguments.length),new wt(this.database,nr(this._delegate,p5(e,n)))}toString(){return B("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return B("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(B("Query.isEqual",1,1,arguments.length),!(e instanceof wt)){const n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){const i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,Je(e,"cancel",i.cancel,!0),i.context=r,Ab(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(yn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Sn(this.database,new er(this._delegate._repo,this._delegate._path))}}class Sn extends wt{constructor(e,n){super(e,new vn(n._repo,n._path,new Qg,!1));this.database=e,this._delegate=n}getKey(){return B("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return B("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new Sn(this.database,fo(this._delegate,e))}getParent(){B("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Sn(this.database,e):null}getRoot(){return B("Reference.root",0,0,arguments.length),new Sn(this.database,this._delegate.root)}set(e,n){B("Reference.set",1,2,arguments.length),Je("Reference.set","onComplete",n,!0);const r=J0(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(B("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,Wx("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vn("Reference.update",this._delegate._path),Je("Reference.update","onComplete",n,!0);const r=H6(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){B("Reference.setWithPriority",2,3,arguments.length),Je("Reference.setWithPriority","onComplete",r,!0);const i=K6(this._delegate,e,n);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){B("Reference.remove",0,1,arguments.length),Je("Reference.remove","onComplete",e,!0);const n=W6(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){B("Reference.transaction",1,3,arguments.length),Je("Reference.transaction","transactionUpdate",e,!1),Je("Reference.transaction","onComplete",n,!0),D5("Reference.transaction","applyLocally",r,!0);const i=N5(this._delegate,e,{applyLocally:r}).then(s=>new F5(s.committed,new zi(this.database,s.snapshot)));return n&&i.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),i}setPriority(e,n){B("Reference.setPriority",1,2,arguments.length),Je("Reference.setPriority","onComplete",n,!0);const r=z6(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){B("Reference.push",0,2,arguments.length),Je("Reference.push","onComplete",n,!0);const r=q6(this._delegate,e),i=r.then(o=>new Sn(this.database,o));n&&i.then(()=>n(null),o=>n(o));const s=new Sn(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Vn("Reference.onDisconnect",this._delegate._path),new L5(new j6(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,n,r={}){E5(this._delegate,e,n,r)}ref(e){if(B("database.ref",0,1,arguments.length),e instanceof Sn){const n=BC(this._delegate,e.toString());return new Sn(this,n)}else{const n=Vx(this._delegate,e);return new Sn(this,n)}}refFromURL(e){B("database.refFromURL",1,1,arguments.length);const r=BC(this._delegate,e);return new Sn(this,r)}goOffline(){return B("database.goOffline",0,0,arguments.length),I5(this._delegate)}goOnline(){return B("database.goOnline",0,0,arguments.length),T5(this._delegate)}}xc.ServerValue={TIMESTAMP:k5(),increment:t=>A5(t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5({app:t,url:e,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){CO(n);const o=new NN("auth-internal",new PN("database-standalone"));return o.setComponent(new se("auth-internal",()=>r,"PRIVATE")),{instance:new xc(qx(t,o,void 0,e,s),t),namespace:i}}var U5=Object.freeze({__proto__:null,initStandalone:$5});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=xc.ServerValue;function B5(t){t.INTERNAL.registerComponent(new se("database-compat",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new xc(i,r)},"PUBLIC").setServiceProps({Reference:Sn,Query:wt,Database:xc,DataSnapshot:zi,enableLogging:S5,INTERNAL:U5,ServerValue:V5}).setMultipleInstances(!0)),t.registerVersion(P5,O5)}B5(pt);var j5=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},D,Z0=Z0||{},K=j5||self;function dp(){}function Hv(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Fh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function q5(t){return Object.prototype.hasOwnProperty.call(t,jy)&&t[jy]||(t[jy]=++W5)}var jy="closure_uid_"+(1e9*Math.random()>>>0),W5=0;function z5(t,e,n){return t.call.apply(t.bind,arguments)}function K5(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Rt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Rt=z5:Rt=K5,Rt.apply(null,arguments)}function Cd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function xt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function vs(){this.s=this.s,this.o=this.o}var H5=0,G5={};vs.prototype.s=!1;vs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),H5!=0)){var t=q5(this);delete G5[t]}};vs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zx=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Kx=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Q5(t){e:{var e=VQ;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function HC(t){return Array.prototype.concat.apply([],arguments)}function eI(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function fp(t){return/^[\s\xa0]*$/.test(t)}var GC=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Yt(t,e){return t.indexOf(e)!=-1}function qy(t,e){return t<e?-1:t>e?1:0}var Xt;e:{var QC=K.navigator;if(QC){var YC=QC.userAgent;if(YC){Xt=YC;break e}}Xt=""}function tI(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Hx(t){const e={};for(const n in t)e[n]=t[n];return e}var XC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gx(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<XC.length;s++)n=XC[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function nI(t){return nI[" "](t),t}nI[" "]=dp;function Y5(t){var e=Z5;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var X5=Yt(Xt,"Opera"),nl=Yt(Xt,"Trident")||Yt(Xt,"MSIE"),Qx=Yt(Xt,"Edge"),Gv=Qx||nl,Yx=Yt(Xt,"Gecko")&&!(Yt(Xt.toLowerCase(),"webkit")&&!Yt(Xt,"Edge"))&&!(Yt(Xt,"Trident")||Yt(Xt,"MSIE"))&&!Yt(Xt,"Edge"),J5=Yt(Xt.toLowerCase(),"webkit")&&!Yt(Xt,"Edge");function Xx(){var t=K.document;return t?t.documentMode:void 0}var pp;e:{var Wy="",zy=function(){var t=Xt;if(Yx)return/rv:([^\);]+)(\)|;)/.exec(t);if(Qx)return/Edge\/([\d\.]+)/.exec(t);if(nl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(J5)return/WebKit\/(\S+)/.exec(t);if(X5)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(zy&&(Wy=zy?zy[1]:""),nl){var Ky=Xx();if(Ky!=null&&Ky>parseFloat(Wy)){pp=String(Ky);break e}}pp=Wy}var Z5={};function eQ(){return Y5(function(){let t=0;const e=GC(String(pp)).split("."),n=GC("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=qy(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||qy(i[2].length==0,s[2].length==0)||qy(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var Qv;if(K.document&&nl){var JC=Xx();Qv=JC||parseInt(pp,10)||void 0}else Qv=void 0;var tQ=Qv,nQ=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{K.addEventListener("test",dp,e),K.removeEventListener("test",dp,e)}catch{}return t}();function qt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};function Dc(t,e){if(qt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Yx){e:{try{nI(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:rQ[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Dc.Z.h.call(this)}}xt(Dc,qt);var rQ={2:"touch",3:"pen",4:"mouse"};Dc.prototype.h=function(){Dc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var $h="closure_listenable_"+(1e6*Math.random()|0),iQ=0;function sQ(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++iQ,this.ca=this.fa=!1}function fm(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function pm(t){this.src=t,this.g={},this.h=0}pm.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Xv(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new sQ(e,this.src,s,!!r,i),e.fa=n,t.push(e)),e};function Yv(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=zx(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(fm(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Xv(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}var rI="closure_lm_"+(1e6*Math.random()|0),Hy={};function Jx(t,e,n,r,i){if(r&&r.once)return eD(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Jx(t,e[s],n,r,i);return null}return n=oI(n),t&&t[$h]?t.N(e,n,Fh(r)?!!r.capture:!!r,i):Zx(t,e,n,!1,r,i)}function Zx(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Fh(i)?!!i.capture:!!i,a=sI(t);if(a||(t[rI]=a=new pm(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=oQ(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nQ||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nD(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function oQ(){function t(n){return e.call(t.src,t.listener,n)}var e=aQ;return t}function eD(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)eD(t,e[s],n,r,i);return null}return n=oI(n),t&&t[$h]?t.O(e,n,Fh(r)?!!r.capture:!!r,i):Zx(t,e,n,!0,r,i)}function tD(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)tD(t,e[s],n,r,i);else r=Fh(r)?!!r.capture:!!r,n=oI(n),t&&t[$h]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Xv(s,n,r,i),-1<n&&(fm(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=sI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Xv(e,n,r,i)),(n=-1<t?e[t]:null)&&iI(n))}function iI(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[$h])Yv(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nD(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sI(e))?(Yv(n,t),n.h==0&&(n.src=null,e[rI]=null)):fm(t)}}}function nD(t){return t in Hy?Hy[t]:Hy[t]="on"+t}function aQ(t,e){if(t.ca)t=!0;else{e=new Dc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&iI(t),t=n.call(r,e)}return t}function sI(t){return t=t[rI],t instanceof pm?t:null}var Gy="__closure_events_fn_"+(1e9*Math.random()>>>0);function oI(t){return typeof t=="function"?t:(t[Gy]||(t[Gy]=function(e){return t.handleEvent(e)}),t[Gy])}function dt(){vs.call(this),this.i=new pm(this),this.P=this,this.I=null}xt(dt,vs);dt.prototype[$h]=!0;dt.prototype.removeEventListener=function(t,e,n,r){tD(this,t,e,n,r)};function Nt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new qt(e,t);else if(e instanceof qt)e.target=e.target||t;else{var i=e;e=new qt(r,t),Gx(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=kd(o,r,!0,e)&&i}if(o=e.g=t,i=kd(o,r,!0,e)&&i,i=kd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=kd(o,r,!1,e)&&i}dt.prototype.M=function(){if(dt.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)fm(n[r]);delete t.g[e],t.h--}}this.I=null};dt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};dt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function kd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Yv(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var aI=K.JSON.stringify;function lQ(){var t=iD;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class uQ{constructor(){this.h=this.g=null}add(e,n){const r=rD.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var rD=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new cQ,t=>t.reset());class cQ{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function hQ(t){K.setTimeout(()=>{throw t},0)}function lI(t,e){Jv||dQ(),Zv||(Jv(),Zv=!0),iD.add(t,e)}var Jv;function dQ(){var t=K.Promise.resolve(void 0);Jv=function(){t.then(fQ)}}var Zv=!1,iD=new uQ;function fQ(){for(var t;t=lQ();){try{t.h.call(t.g)}catch(n){hQ(n)}var e=rD;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Zv=!1}function gm(t,e){dt.call(this),this.h=t||1,this.g=e||K,this.j=Rt(this.kb,this),this.l=Date.now()}xt(gm,dt);D=gm.prototype;D.da=!1;D.S=null;D.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nt(this,"tick"),this.da&&(uI(this),this.start()))}};D.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function uI(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}D.M=function(){gm.Z.M.call(this),uI(this),delete this.g};function cI(t,e,n){if(typeof t=="function")n&&(t=Rt(t,n));else if(t&&typeof t.handleEvent=="function")t=Rt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:K.setTimeout(t,e||0)}function sD(t){t.g=cI(()=>{t.g=null,t.i&&(t.i=!1,sD(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class pQ extends vs{constructor(e,n){super();this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sD(this)}M(){super.M(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mc(t){vs.call(this),this.h=t,this.g={}}xt(Mc,vs);var ZC=[];function oD(t,e,n,r){Array.isArray(n)||(n&&(ZC[0]=n.toString()),n=ZC);for(var i=0;i<n.length;i++){var s=Jx(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function aD(t){tI(t.g,function(e,n){this.g.hasOwnProperty(n)&&iI(e)},t),t.g={}}Mc.prototype.M=function(){Mc.Z.M.call(this),aD(this)};Mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function mm(){this.g=!0}mm.prototype.Aa=function(){this.g=!1};function gQ(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function mQ(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function _a(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+_Q(t,n)+(r?" "+r:"")})}function yQ(t,e){t.info(function(){return"TIMEOUT: "+e})}mm.prototype.info=function(){};function _Q(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return aI(n)}catch{return e}}var Vo={},ek=null;function ym(){return ek=ek||new dt}Vo.Ma="serverreachability";function lD(t){qt.call(this,Vo.Ma,t)}xt(lD,qt);function Lc(t){const e=ym();Nt(e,new lD(e,t))}Vo.STAT_EVENT="statevent";function uD(t,e){qt.call(this,Vo.STAT_EVENT,t),this.stat=e}xt(uD,qt);function en(t){const e=ym();Nt(e,new uD(e,t))}Vo.Na="timingevent";function cD(t,e){qt.call(this,Vo.Na,t),this.size=e}xt(cD,qt);function Uh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){t()},e)}var _m={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},hD={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hI(){}hI.prototype.h=null;function tk(t){return t.h||(t.h=t.i())}function dD(){}var Vh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dI(){qt.call(this,"d")}xt(dI,qt);function fI(){qt.call(this,"c")}xt(fI,qt);var ew;function vm(){}xt(vm,hI);vm.prototype.g=function(){return new XMLHttpRequest};vm.prototype.i=function(){return{}};ew=new vm;function Bh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Mc(this),this.P=vQ,t=Gv?125:void 0,this.W=new gm(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fD}function fD(){this.i=null,this.g="",this.h=!1}var vQ=45e3,tw={},gp={};D=Bh.prototype;D.setTimeout=function(t){this.P=t};function nw(t,e,n){t.K=1,t.v=Em(fi(e)),t.s=n,t.U=!0,pD(t,null)}function pD(t,e){t.F=Date.now(),jh(t),t.A=fi(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),ED(n.h,"t",r),t.C=0,n=t.l.H,t.h=new fD,t.g=BD(t.l,n?e:null,!t.s),0<t.O&&(t.L=new pQ(Rt(t.Ia,t,t.g),t.O)),oD(t.V,t.g,"readystatechange",t.gb),e=t.H?Hx(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Lc(1),gQ(t.j,t.u,t.A,t.m,t.X,t.s)}D.gb=function(t){t=t.target;const e=this.L;e&&ni(t)==3?e.l():this.Ia(t)};D.Ia=function(t){try{if(t==this.g)e:{const c=ni(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>c)&&(c!=3||Gv||this.g&&(this.h.h||this.g.ga()||sk(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?Lc(3):Lc(2)),wm(this);var n=this.g.ba();this.N=n;t:if(gD(this)){var r=sk(this.g);t="";var i=r.length,s=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){js(this),zu(this);var o="";break t}this.h.i=new K.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,mQ(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fp(a)){var u=a;break t}}u=null}if(n=u)_a(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,rw(this,n);else{this.i=!1,this.o=3,en(12),js(this),zu(this);break e}}this.U?(mD(this,c,o),Gv&&this.i&&c==3&&(oD(this.V,this.W,"tick",this.fb),this.W.start())):(_a(this.j,this.m,o,null),rw(this,o)),c==4&&js(this),this.i&&!this.I&&(c==4?FD(this.l,this):(this.i=!1,jh(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,en(12)):(this.o=0,en(13)),js(this),zu(this)}}}catch{}finally{}};function gD(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function mD(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=wQ(t,n),i==gp){e==4&&(t.o=4,en(14),r=!1),_a(t.j,t.m,null,"[Incomplete Response]");break}else if(i==tw){t.o=4,en(15),_a(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else _a(t.j,t.m,i,null),rw(t,i);gD(t)&&i!=gp&&i!=tw&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,en(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),II(e),e.L=!0,en(11))):(_a(t.j,t.m,n,"[Invalid Chunked Response]"),js(t),zu(t))}D.fb=function(){if(this.g){var t=ni(this.g),e=this.g.ga();this.C<e.length&&(wm(this),mD(this,t,e),this.i&&t!=4&&jh(this))}};function wQ(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?gp:(n=Number(e.substring(n,r)),isNaN(n)?tw:(r+=1,r+n>e.length?gp:(e=e.substr(r,n),t.C=r+n,e)))}D.cancel=function(){this.I=!0,js(this)};function jh(t){t.Y=Date.now()+t.P,yD(t,t.P)}function yD(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Uh(Rt(t.eb,t),e)}function wm(t){t.B&&(K.clearTimeout(t.B),t.B=null)}D.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(yQ(this.j,this.A),this.K!=2&&(Lc(3),en(17)),js(this),this.o=2,zu(this)):yD(this,this.Y-t)};function zu(t){t.l.G==0||t.I||FD(t.l,t)}function js(t){wm(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,uI(t.W),aD(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function rw(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||iw(n.i,t))){if(n.I=t.N,!t.J&&iw(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0)e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)vp(n),Sm(n);else break e;EI(n),en(18)}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=Uh(Rt(n.ab,n),6e3));if(1>=SD(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else qs(n,11)}else if((t.J||n.g==t)&&vp(n),!fp(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.U=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.J=u[1],n.la=u[2];const c=u[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const h=u[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;!s.g&&(Yt(m,"spdy")||Yt(m,"quic")||Yt(m,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(mI(s,s.h),s.h=null))}if(r.D){const _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.sa=_,Ee(r.F,r.D,_))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var o=t;if(r.oa=VD(r,r.H?r.la:null,r.W),o.J){bD(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(wm(a),jh(a)),r.g=o}else MD(r);0<n.l.length&&bm(n)}else u[0]!="stop"&&u[0]!="close"||qs(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?qs(n,7):wI(n):u[0]!="noop"&&n.j&&n.j.wa(u),n.A=0)}}Lc(4)}catch{}}function EQ(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Hv(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function pI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Hv(t)||typeof t=="string")Kx(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(Hv(t)||typeof t=="string"){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=EQ(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Ll(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ll)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}D=Ll.prototype;D.R=function(){gI(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};D.T=function(){return gI(this),this.g.concat()};function gI(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];po(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)r=t.g[e],po(i,r)||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}D.get=function(t,e){return po(this.h,t)?this.h[t]:e};D.set=function(t,e){po(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};D.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};function po(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var _D=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function IQ(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function go(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof go){this.g=e!==void 0?e:t.g,mp(this,t.j),this.s=t.s,yp(this,t.i),_p(this,t.m),this.l=t.l,e=t.h;var n=new Fc;n.i=e.i,e.g&&(n.g=new Ll(e.g),n.h=e.h),nk(this,n),this.o=t.o}else t&&(n=String(t).match(_D))?(this.g=!!e,mp(this,n[1]||"",!0),this.s=Ku(n[2]||""),yp(this,n[3]||"",!0),_p(this,n[4]),this.l=Ku(n[5]||"",!0),nk(this,n[6]||"",!0),this.o=Ku(n[7]||"")):(this.g=!!e,this.h=new Fc(null,this.g))}go.prototype.toString=function(){var t=[],e=this.j;e&&t.push(bu(e,rk,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(bu(e,rk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(bu(n,n.charAt(0)=="/"?kQ:CQ,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",bu(n,RQ)),t.join("")};function fi(t){return new go(t)}function mp(t,e,n){t.j=n?Ku(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function yp(t,e,n){t.i=n?Ku(e,!0):e}function _p(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function nk(t,e,n){e instanceof Fc?(t.h=e,NQ(t.h,t.g)):(n||(e=bu(e,AQ)),t.h=new Fc(e,t.g))}function Ee(t,e,n){t.h.set(e,n)}function Em(t){return Ee(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function TQ(t){return t instanceof go?fi(t):new go(t,void 0)}function SQ(t,e,n,r){var i=new go(null,void 0);return t&&mp(i,t),e&&yp(i,e),n&&_p(i,n),r&&(i.l=r),i}function Ku(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function bu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,bQ),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bQ(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var rk=/[#\/\?@]/g,CQ=/[#\?:]/g,kQ=/[#\?]/g,AQ=/[#\?@]/g,RQ=/#/g;function Fc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ws(t){t.g||(t.g=new Ll,t.h=0,t.i&&IQ(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}D=Fc.prototype;D.add=function(t,e){ws(this),this.i=null,t=Fl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function vD(t,e){ws(t),e=Fl(t,e),po(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,po(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&gI(t)))}function wD(t,e){return ws(t),e=Fl(t,e),po(t.g.h,e)}D.forEach=function(t,e){ws(this),this.g.forEach(function(n,r){Kx(n,function(i){t.call(e,i,r,this)},this)},this)};D.T=function(){ws(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n};D.R=function(t){ws(this);var e=[];if(typeof t=="string")wD(this,t)&&(e=HC(e,this.g.get(Fl(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=HC(e,t[n])}return e};D.set=function(t,e){return ws(this),this.i=null,t=Fl(this,t),wD(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};D.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function ED(t,e,n){vD(t,e),0<n.length&&(t.i=null,t.g.set(Fl(t,e),eI(n)),t.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;r[s]!==""&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};function Fl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function NQ(t,e){e&&!t.j&&(ws(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(vD(this,r),ED(this,i,n))},t)),t.j=e}var PQ=class{constructor(t,e){this.h=t,this.g=e}};function ID(t){this.l=t||OQ,K.PerformanceNavigationTiming?(t=K.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(K.g&&K.g.Ea&&K.g.Ea()&&K.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var OQ=10;function TD(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function SD(t){return t.h?1:t.g?t.g.size:0}function iw(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function mI(t,e){t.g?t.g.add(e):t.h=e}function bD(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}ID.prototype.cancel=function(){if(this.i=CD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function CD(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return eI(t.i)}function yI(){}yI.prototype.stringify=function(t){return K.JSON.stringify(t,void 0)};yI.prototype.parse=function(t){return K.JSON.parse(t,void 0)};function xQ(){this.g=new yI}function DQ(t,e,n){const r=n||"";try{pI(t,function(i,s){let o=i;Fh(i)&&(o=aI(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function MQ(t,e){const n=new mm;if(K.Image){const r=new Image;r.onload=Cd(Ad,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Cd(Ad,n,r,"TestLoadImage: error",!1,e),r.onabort=Cd(Ad,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cd(Ad,n,r,"TestLoadImage: timeout",!1,e),K.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ad(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function qh(t){this.l=t.$b||null,this.j=t.ib||!1}xt(qh,hI);qh.prototype.g=function(){return new Im(this.l,this.j)};qh.prototype.i=function(t){return function(){return t}}({});function Im(t,e){dt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=_I,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xt(Im,dt);var _I=0;D=Im.prototype;D.open=function(t,e){if(this.readyState!=_I)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,$c(this)};D.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||K).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wh(this)),this.readyState=_I};D.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,$c(this)),this.g&&(this.readyState=3,$c(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof K.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kD(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function kD(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}D.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Wh(this):$c(this),this.readyState==3&&kD(this)}};D.Ua=function(t){this.g&&(this.response=this.responseText=t,Wh(this))};D.Ta=function(t){this.g&&(this.response=t,Wh(this))};D.ha=function(){this.g&&Wh(this)};function Wh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,$c(t)}D.setRequestHeader=function(t,e){this.v.append(t,e)};D.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function $c(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Im.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var LQ=K.JSON.parse;function Be(t){dt.call(this),this.headers=new Ll,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=AD,this.K=this.L=!1}xt(Be,dt);var AD="",FQ=/^https?$/i,$Q=["POST","PUT"];D=Be.prototype;D.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ew.g(),this.C=this.u?tk(this.u):tk(ew),this.g.onreadystatechange=Rt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){ik(this,s);return}t=n||"";const i=new Ll(this.headers);r&&pI(r,function(s,o){i.set(o,s)}),r=Q5(i.T()),n=K.FormData&&t instanceof K.FormData,!(0<=zx($Q,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{PD(this),0<this.B&&((this.K=UQ(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rt(this.pa,this)):this.A=cI(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){ik(this,s)}};function UQ(t){return nl&&eQ()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function VQ(t){return t.toLowerCase()=="content-type"}D.pa=function(){typeof Z0!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nt(this,"timeout"),this.abort(8))};function ik(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,RD(t),Tm(t)}function RD(t){t.D||(t.D=!0,Nt(t,"complete"),Nt(t,"error"))}D.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Nt(this,"complete"),Nt(this,"abort"),Tm(this))};D.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tm(this,!0)),Be.Z.M.call(this)};D.Fa=function(){this.s||(this.F||this.v||this.l?ND(this):this.cb())};D.cb=function(){ND(this)};function ND(t){if(t.h&&typeof Z0!="undefined"&&(!t.C[1]||ni(t)!=4||t.ba()!=2)){if(t.v&&ni(t)==4)cI(t.Fa,0,t);else if(Nt(t,"readystatechange"),ni(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(_D)[1]||null;if(!i&&K.self&&K.self.location){var s=K.self.location.protocol;i=s.substr(0,s.length-1)}r=!FQ.test(i?i.toLowerCase():"")}n=r}if(n)Nt(t,"complete"),Nt(t,"success");else{t.m=6;try{var o=2<ni(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",RD(t)}}finally{Tm(t)}}}}function Tm(t,e){if(t.g){PD(t);const n=t.g,r=t.C[0]?dp:null;t.g=null,t.C=null,e||Nt(t,"ready");try{n.onreadystatechange=r}catch{}}}function PD(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(K.clearTimeout(t.A),t.A=null)}function ni(t){return t.g?t.g.readyState:0}D.ba=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}};D.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),LQ(e)}};function sk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case AD:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}D.Da=function(){return this.m};D.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function BQ(t){let e="";return tI(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function vI(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=BQ(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ee(t,e,n))}function gu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function OD(t){this.za=0,this.l=[],this.h=new mm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gu("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gu("baseRetryDelayMs",5e3,t),this.$a=gu("retryDelaySeedMs",1e4,t),this.Ya=gu("forwardChannelMaxRetries",2,t),this.ra=gu("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new ID(t&&t.concurrentRequestLimit),this.Ca=new xQ,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}D=OD.prototype;D.ma=8;D.G=1;function wI(t){if(xD(t),t.G==3){var e=t.V++,n=fi(t.F);Ee(n,"SID",t.J),Ee(n,"RID",e),Ee(n,"TYPE","terminate"),zh(t,n),e=new Bh(t,t.h,e,void 0),e.K=2,e.v=Em(fi(n)),n=!1,K.navigator&&K.navigator.sendBeacon&&(n=K.navigator.sendBeacon(e.v.toString(),"")),!n&&K.Image&&(new Image().src=e.v,n=!0),n||(e.g=BD(e.l,null),e.g.ea(e.v)),e.F=Date.now(),jh(e)}UD(t)}D.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Sm(t){t.g&&(II(t),t.g.cancel(),t.g=null)}function xD(t){Sm(t),t.u&&(K.clearTimeout(t.u),t.u=null),vp(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&K.clearTimeout(t.m),t.m=null)}function Qy(t,e){t.l.push(new PQ(t.Za++,e)),t.G==3&&bm(t)}function bm(t){TD(t.i)||t.m||(t.m=!0,lI(t.Ha,t),t.C=0)}function jQ(t,e){return SD(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Uh(Rt(t.Ha,t,e),$D(t,t.C)),t.C++,!0)}D.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new Bh(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=Hx(s),Gx(s,this.P)):s=this.P),this.o===null&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=DD(this,i,e),n=fi(this.F),Ee(n,"RID",t),Ee(n,"CVER",22),this.D&&Ee(n,"X-HTTP-Session-Id",this.D),zh(this,n),this.o&&s&&vI(n,this.o,s),mI(this.i,i),this.Ra&&Ee(n,"TYPE","init"),this.ja?(Ee(n,"$req",e),Ee(n,"SID","null"),i.$=!0,nw(i,n,null)):nw(i,n,e),this.G=2}}else this.G==3&&(t?ok(this,t):this.l.length==0||TD(this.i)||ok(this))};function ok(t,e){var n;e?n=e.m:n=t.V++;const r=fi(t.F);Ee(r,"SID",t.J),Ee(r,"RID",n),Ee(r,"AID",t.U),zh(t,r),t.o&&t.s&&vI(r,t.o,t.s),n=new Bh(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=DD(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),mI(t.i,n),nw(n,r,e)}function zh(t,e){t.j&&pI({},function(n,r){Ee(e,r,n)})}function DD(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Rt(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].h;const c=i[l].g;if(u-=s,0>u)s=Math.max(0,i[l].h-100),a=!1;else try{DQ(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function MD(t){t.g||t.u||(t.Y=1,lI(t.Ga,t),t.A=0)}function EI(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Uh(Rt(t.Ga,t),$D(t,t.A)),t.A++,!0)}D.Ga=function(){if(this.u=null,LD(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Uh(Rt(this.bb,this),t)}};D.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,en(10),Sm(this),LD(this))};function II(t){t.B!=null&&(K.clearTimeout(t.B),t.B=null)}function LD(t){t.g=new Bh(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=fi(t.oa);Ee(e,"RID","rpc"),Ee(e,"SID",t.J),Ee(e,"CI",t.N?"0":"1"),Ee(e,"AID",t.U),zh(t,e),Ee(e,"TYPE","xmlhttp"),t.o&&t.s&&vI(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Em(fi(e)),n.s=null,n.U=!0,pD(n,t)}D.ab=function(){this.v!=null&&(this.v=null,Sm(this),EI(this),en(19))};function vp(t){t.v!=null&&(K.clearTimeout(t.v),t.v=null)}function FD(t,e){var n=null;if(t.g==e){vp(t),II(t),t.g=null;var r=2}else if(iw(t.i,e))n=e.D,bD(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=ym(),Nt(r,new cD(r,n,e,i)),bm(t)}else MD(t);else if(i=e.o,i==3||i==0&&0<t.I||!(r==1&&jQ(t,e)||r==2&&EI(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:qs(t,5);break;case 4:qs(t,10);break;case 3:qs(t,6);break;default:qs(t,2)}}}function $D(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function qs(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=Rt(t.jb,t);n||(n=new go("//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||mp(n,"https"),Em(n)),MQ(n.toString(),r)}else en(2);t.G=0,t.j&&t.j.va(e),UD(t),xD(t)}D.jb=function(t){t?(this.h.info("Successfully pinged google.com"),en(2)):(this.h.info("Failed to ping google.com"),en(1))};function UD(t){t.G=0,t.I=-1,t.j&&((CD(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,eI(t.l),t.l.length=0),t.j.ua())}function VD(t,e,n){let r=TQ(n);if(r.i!="")e&&yp(r,e+"."+r.i),_p(r,r.m);else{const i=K.location;r=SQ(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&tI(t.aa,function(i,s){Ee(r,s,i)}),e=t.D,n=t.sa,e&&n&&Ee(r,e,n),Ee(r,"VER",t.ma),zh(t,r),r}function BD(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Be(new qh({ib:!0})):new Be(t.qa),e.L=t.H,e}function jD(){}D=jD.prototype;D.xa=function(){};D.wa=function(){};D.va=function(){};D.ua=function(){};D.Oa=function(){};function wp(){if(nl&&!(10<=Number(tQ)))throw Error("Environmental error: no available transport.")}wp.prototype.g=function(t,e){return new On(t,e)};function On(t,e){dt.call(this),this.g=new OD(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!fp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fp(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new $l(this)}xt(On,dt);On.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),lI(Rt(t.hb,t,e))),en(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=VD(t,null,t.W),bm(t)};On.prototype.close=function(){wI(this.g)};On.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Qy(this.g,e)}else this.v?(e={},e.__data__=aI(t),Qy(this.g,e)):Qy(this.g,t)};On.prototype.M=function(){this.g.j=null,delete this.j,wI(this.g),delete this.g,On.Z.M.call(this)};function qD(t){dI.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}xt(qD,dI);function WD(){fI.call(this),this.status=1}xt(WD,fI);function $l(t){this.g=t}xt($l,jD);$l.prototype.xa=function(){Nt(this.g,"a")};$l.prototype.wa=function(t){Nt(this.g,new qD(t))};$l.prototype.va=function(t){Nt(this.g,new WD(t))};$l.prototype.ua=function(){Nt(this.g,"b")};wp.prototype.createWebChannel=wp.prototype.g;On.prototype.send=On.prototype.u;On.prototype.open=On.prototype.m;On.prototype.close=On.prototype.close;_m.NO_ERROR=0;_m.TIMEOUT=8;_m.HTTP_ERROR=6;hD.COMPLETE="complete";dD.EventType=Vh;Vh.OPEN="a";Vh.CLOSE="b";Vh.ERROR="c";Vh.MESSAGE="d";dt.prototype.listen=dt.prototype.N;Be.prototype.listenOnce=Be.prototype.O;Be.prototype.getLastError=Be.prototype.La;Be.prototype.getLastErrorCode=Be.prototype.Da;Be.prototype.getStatus=Be.prototype.ba;Be.prototype.getResponseJson=Be.prototype.Qa;Be.prototype.getResponseText=Be.prototype.ga;Be.prototype.send=Be.prototype.ea;var qQ=function(){return new wp},WQ=function(){return ym()},Yy=_m,zQ=hD,KQ=Vo,ak={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},HQ=qh,Rd=dD,GQ=Be;const lk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul="9.6.7";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new qr("@firebase/firestore");function sw(){return as.logLevel}function QQ(t){as.setLogLevel(t)}function b(t,...e){if(as.logLevel<=G.DEBUG){const n=e.map(TI);as.debug(`Firestore (${Ul}): ${t}`,...n)}}function Ue(t,...e){if(as.logLevel<=G.ERROR){const n=e.map(TI);as.error(`Firestore (${Ul}): ${t}`,...n)}}function Uc(t,...e){if(as.logLevel<=G.WARN){const n=e.map(TI);as.warn(`Firestore (${Ul}): ${t}`,...n)}}function TI(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(t="Unexpected state"){const e=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: `+t;throw Ue(e),new Error(e)}function q(t,e){t||F()}function YQ(t,e){t||F()}function N(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends Me{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class JQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZQ{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new it;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new it,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new it)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(q(typeof r.accessToken=="string"),new zD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return q(e===null||typeof e=="string"),new Tt(e)}}class e8{constructor(e,n,r){this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class t8{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new e8(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r8{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{s.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,b("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(q(typeof n.token=="string"),this.p=n.token,new n8(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.I(r),this.T=r=>n.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.A=-1;class KD{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=i8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Z(t,e){return t<e?-1:t>e?1:0}function rl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function HD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new T(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new T(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new T(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new st(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r){n===void 0?n=0:n>e.length&&F(),r===void 0?r=e.length-n:r>e.length-n&&F(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class re extends Vc{construct(e,n,r){return new re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new re(n)}static emptyPath(){return new re([])}}const s8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends Vc{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return s8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new T(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new T(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new T(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new T(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.fields=e,e.sort(nt.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(){return typeof atob!="undefined"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new He(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new He(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}He.EMPTY_BYTE_STRING=new He("");const a8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(t){if(q(!!t),typeof t=="string"){let e=0;const n=a8.exec(t);if(q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mo(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function QD(t){const e=t.mapValue.fields.__previous_value__;return SI(e)?QD(e):e}function Bc(t){const e=ls(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,n,r,i,s,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class yo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(t){return t==null}function jc(t){return t===0&&1/t==-1/0}function YD(t){return typeof t=="number"&&Number.isInteger(t)&&!jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(e){this.path=e}static fromPath(e){return new x(re.fromString(e))}static fromName(e){return new x(re.fromString(e).popFirst(5))}static empty(){return new x(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x(new re(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function _o(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?SI(t)?4:10:F()}function fr(t,e){if(t===e)return!0;const n=_o(t);if(n!==_o(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bc(t).isEqual(Bc(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ls(r.timestampValue),o=ls(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return mo(r.bytesValue).isEqual(mo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ae(r.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(r.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ae(r.integerValue)===Ae(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Ae(r.doubleValue),o=Ae(i.doubleValue);return s===o?jc(s)===jc(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return rl(t.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(uk(s)!==uk(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!fr(s[a],o[a])))return!1;return!0}(t,e);default:return F()}}function qc(t,e){return(t.values||[]).find(n=>fr(n,e))!==void 0}function sl(t,e){if(t===e)return 0;const n=_o(t),r=_o(e);if(n!==r)return Z(n,r);switch(n){case 0:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Ae(i.integerValue||i.doubleValue),a=Ae(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return ck(t.timestampValue,e.timestampValue);case 4:return ck(Bc(t),Bc(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(i,s){const o=mo(i),a=mo(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Z(o[l],a[l]);if(u!==0)return u}return Z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Z(Ae(i.latitude),Ae(s.latitude));return o!==0?o:Z(Ae(i.longitude),Ae(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=sl(o[l],a[l]);if(u)return u}return Z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){const o=i.fields||{},a=Object.keys(o),l=s.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=Z(a[c],u[c]);if(h!==0)return h;const d=sl(o[a[c]],l[u[c]]);if(d!==0)return d}return Z(a.length,u.length)}(t.mapValue,e.mapValue);default:throw F()}}function ck(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);const n=ls(t),r=ls(e),i=Z(n.seconds,r.seconds);return i!==0?i:Z(n.nanos,r.nanos)}function La(t){return ow(t)}function ow(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ls(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?mo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,x.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=ow(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${ow(r.fields[a])}`;return s+"}"}(t.mapValue):F();var e,n}function Ep(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function aw(t){return!!t&&"integerValue"in t}function Cm(t){return!!t&&"arrayValue"in t}function hk(t){return!!t&&"nullValue"in t}function dk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function af(t){return!!t&&"mapValue"in t}function Hu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Hu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hu(t.arrayValue.values[n]);return e}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Hu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];af(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Bo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ut(Hu(this.value))}}function XD(t){const e=[];return Bo(t.fields,(n,r)=>{const i=new nt([n]);if(af(r)){const s=XD(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new il(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n,r,i,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ce(e,0,j.min(),j.min(),Ut.empty(),0)}static newFoundDocument(e,n,r){return new Ce(e,1,n,j.min(),r,0)}static newNoDocument(e,n){return new Ce(e,2,n,j.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new Ce(e,3,n,j.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ce&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ce(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class JD{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}JD.UNKNOWN_ID=-1;class c8{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ip{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ip(0,km.min())}}class km{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new km(j.min(),x.empty(),-1)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.P=null}}function fk(t,e=null,n=[],r=[],i=null,s=null,o=null){return new h8(t,e,n,r,i,s,o)}function Kh(t){const e=N(t);if(e.P===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+La(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),jo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>La(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>La(r)).join(",")),e.P=n}return e.P}function d8(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${La(r.value)}`;var r}).join(", ")}]`),jo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>La(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>La(n)).join(",")),`Target(${e})`}function Am(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!w8(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!fr(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gk(t.startAt,e.startAt)&&gk(t.endAt,e.endAt)}function Tp(t){return x.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class tn extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.v(e,n,r):new f8(e,n,r):n==="array-contains"?new m8(e,r):n==="in"?new y8(e,r):n==="not-in"?new _8(e,r):n==="array-contains-any"?new v8(e,r):new tn(e,n,r)}static v(e,n,r){return n==="in"?new p8(e,r):new g8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.V(sl(n,this.value)):n!==null&&_o(this.value)===_o(n)&&this.V(sl(n,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return F()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class f8 extends tn{constructor(e,n,r){super(e,n,r),this.key=x.fromName(r.referenceValue)}matches(e){const n=x.comparator(e.key,this.key);return this.V(n)}}class p8 extends tn{constructor(e,n){super(e,"in",n),this.keys=ZD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class g8 extends tn{constructor(e,n){super(e,"not-in",n),this.keys=ZD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ZD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>x.fromName(r.referenceValue))}class m8 extends tn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cm(n)&&qc(n.arrayValue,this.value)}}class y8 extends tn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qc(this.value.arrayValue,n)}}class _8 extends tn{constructor(e,n){super(e,"not-in",n)}matches(e){if(qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qc(this.value.arrayValue,n)}}class v8 extends tn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qc(this.value.arrayValue,r))}}class ol{constructor(e,n){this.position=e,this.inclusive=n}}class Fa{constructor(e,n="asc"){this.field=e,this.dir=n}}function w8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function pk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=x.comparator(x.fromName(o.referenceValue),n.key):r=sl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function gk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.D=null,this.C=null,this.startAt,this.endAt}}function eM(t,e,n,r,i,s,o,a){return new _i(t,e,n,r,i,s,o,a)}function Vl(t){return new _i(t)}function lf(t){return!jo(t.limit)&&t.limitType==="F"}function Sp(t){return!jo(t.limit)&&t.limitType==="L"}function bI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function CI(t){for(const e of t.filters)if(e.S())return e.field;return null}function kI(t){return t.collectionGroup!==null}function al(t){const e=N(t);if(e.D===null){e.D=[];const n=CI(e),r=bI(e);if(n!==null&&r===null)n.isKeyField()||e.D.push(new Fa(n)),e.D.push(new Fa(nt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Fa(nt.keyField(),s))}}}return e.D}function Jn(t){const e=N(t);if(!e.C)if(e.limitType==="F")e.C=fk(e.path,e.collectionGroup,al(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of al(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Fa(s.field,o))}const r=e.endAt?new ol(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new ol(e.startAt.position,!e.startAt.inclusive):null;e.C=fk(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.C}function tM(t,e,n){return new _i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hh(t,e){return Am(Jn(t),Jn(e))&&t.limitType===e.limitType}function nM(t){return`${Kh(Jn(t))}|lt:${t.limitType}`}function lw(t){return`Query(target=${d8(Jn(t))}; limitType=${t.limitType})`}function AI(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):x.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=pk(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,al(n),r)||n.endAt&&!function(i,s,o){const a=pk(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,al(n),r))}(t,e)}function rM(t){return(e,n)=>{let r=!1;for(const i of al(t)){const s=E8(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function E8(t,e,n){const r=t.field.isKeyField()?x.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),l=o.data.field(i);return a!==null&&l!==null?sl(a,l):F()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return F()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function sM(t){return{integerValue:""+t}}function oM(t,e){return YD(e)?sM(e):iM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this._=void 0}}function I8(t,e,n){return t instanceof ll?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof vo?lM(t,e):t instanceof wo?uM(t,e):function(r,i){const s=aM(r,i),o=mk(s)+mk(r.k);return aw(s)&&aw(r.k)?sM(o):iM(r.O,o)}(t,e)}function T8(t,e,n){return t instanceof vo?lM(t,e):t instanceof wo?uM(t,e):n}function aM(t,e){return t instanceof ul?aw(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class ll extends Rm{}class vo extends Rm{constructor(e){super(),this.elements=e}}function lM(t,e){const n=cM(e);for(const r of t.elements)n.some(i=>fr(i,r))||n.push(r);return{arrayValue:{values:n}}}class wo extends Rm{constructor(e){super(),this.elements=e}}function uM(t,e){let n=cM(e);for(const r of t.elements)n=n.filter(i=>!fr(i,r));return{arrayValue:{values:n}}}class ul extends Rm{constructor(e,n){super(),this.O=e,this.k=n}}function mk(t){return Ae(t.integerValue||t.doubleValue)}function cM(t){return Cm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.field=e,this.transform=n}}function S8(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof vo&&r instanceof vo||n instanceof wo&&r instanceof wo?rl(n.elements,r.elements,fr):n instanceof ul&&r instanceof ul?fr(n.k,r.k):n instanceof ll&&r instanceof ll}(t.transform,e.transform)}class b8{constructor(e,n){this.version=e,this.transformResults=n}}class Ve{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ve}static exists(e){return new Ve(void 0,e)}static updateTime(e){return new Ve(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nm{}function C8(t,e,n){t instanceof Qh?function(r,i,s){const o=r.value.clone(),a=vk(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof qo?function(r,i,s){if(!uf(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=vk(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(hM(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function uw(t,e,n){t instanceof Qh?function(r,i,s){if(!uf(r.precondition,i))return;const o=r.value.clone(),a=wk(r.fieldTransforms,s,i);o.setAll(a),i.convertToFoundDocument(_k(i),o).setHasLocalMutations()}(t,e,n):t instanceof qo?function(r,i,s){if(!uf(r.precondition,i))return;const o=wk(r.fieldTransforms,s,i),a=i.data;a.setAll(hM(r)),a.setAll(o),i.convertToFoundDocument(_k(i),a).setHasLocalMutations()}(t,e,n):function(r,i){uf(r.precondition,i)&&i.convertToNoDocument(j.min())}(t,e)}function k8(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=aM(r.transform,i||null);s!=null&&(n==null&&(n=Ut.empty()),n.set(r.field,s))}return n||null}function yk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&rl(n,r,(i,s)=>S8(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function _k(t){return t.isFoundDocument()?t.version:j.min()}class Qh extends Nm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}}class qo extends Nm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function hM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vk(t,e,n){const r=new Map;q(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,T8(o,a,n[i]))}return r}function wk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,I8(s,o,e))}return r}class Yh extends Nm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class RI extends Nm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ee;function dM(t){switch(t){default:return F();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function fM(t){if(t===void 0)return Ue("GRPC error has no .code"),E.UNKNOWN;switch(t){case $e.OK:return E.OK;case $e.CANCELLED:return E.CANCELLED;case $e.UNKNOWN:return E.UNKNOWN;case $e.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case $e.INTERNAL:return E.INTERNAL;case $e.UNAVAILABLE:return E.UNAVAILABLE;case $e.UNAUTHENTICATED:return E.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case $e.NOT_FOUND:return E.NOT_FOUND;case $e.ALREADY_EXISTS:return E.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return E.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case $e.ABORTED:return E.ABORTED;case $e.OUT_OF_RANGE:return E.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return E.UNIMPLEMENTED;case $e.DATA_LOSS:return E.DATA_LOSS;default:return F()}}(ee=$e||($e={}))[ee.OK=0]="OK",ee[ee.CANCELLED=1]="CANCELLED",ee[ee.UNKNOWN=2]="UNKNOWN",ee[ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ee[ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ee[ee.NOT_FOUND=5]="NOT_FOUND",ee[ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",ee[ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",ee[ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",ee[ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ee[ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ee[ee.ABORTED=10]="ABORTED",ee[ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",ee[ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",ee[ee.INTERNAL=13]="INTERNAL",ee[ee.UNAVAILABLE=14]="UNAVAILABLE",ee[ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nd(this.root,e,this.comparator,!0)}}class Nd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:St.RED,this.left=i!=null?i:St.EMPTY,this.right=s!=null?s:St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new St(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return St.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();const e=this.left.check();if(e!==this.right.check())throw F();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(t,e,n,r,i){return this}insert(t,e,n){return new St(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ek(this.data.getIterator())}getIteratorFrom(e){return new Ek(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Te)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Te(this.comparator);return n.data=e,n}}class Ek{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function na(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=new Fe(x.comparator);function Hn(){return R8}const N8=new Fe(x.comparator);function cw(){return N8}const P8=new Fe(x.comparator),O8=new Te(x.comparator);function oe(...t){let e=O8;for(const n of t)e=e.add(n);return e}const x8=new Te(Z);function Pm(){return x8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,n)),new Xh(j.min(),r,Pm(),Hn(),oe())}}class Jh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Jh(He.EMPTY_BYTE_STRING,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i){this.M=e,this.removedTargetIds=n,this.key=r,this.$=i}}class pM{constructor(e,n){this.targetId=e,this.F=n}}class gM{constructor(e,n,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ik{constructor(){this.B=0,this.L=Sk(),this.U=He.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return this.B!==0}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=oe(),n=oe(),r=oe();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:F()}}),new Jh(this.U,this.q,e,n,r)}J(){this.K=!1,this.L=Sk()}Y(e,n){this.K=!0,this.L=this.L.insert(e,n)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class D8{constructor(e){this.nt=e,this.st=new Map,this.it=Hn(),this.rt=Tk(),this.ot=new Te(Z)}ct(e){for(const n of e.M)e.$&&e.$.isFoundDocument()?this.ut(n,e.$):this.at(n,e.key,e.$);for(const n of e.removedTargetIds)this.at(n,e.key,e.$)}ht(e){this.forEachTarget(e,n=>{const r=this.lt(n);switch(e.state){case 0:this.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(n);break;case 3:this.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(n)&&(this.dt(n),r.W(e.resumeToken));break;default:F()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.st.forEach((r,i)=>{this.ft(i)&&n(i)})}_t(e){const n=e.targetId,r=e.F.count,i=this.wt(n);if(i){const s=i.target;if(Tp(s))if(r===0){const o=new x(s.path);this.at(n,o,Ce.newNoDocument(o,j.min()))}else q(r===1);else this.gt(n)!==r&&(this.dt(n),this.ot=this.ot.add(n))}}yt(e){const n=new Map;this.st.forEach((s,o)=>{const a=this.wt(o);if(a){if(s.current&&Tp(a.target)){const l=new x(a.target.path);this.it.get(l)!==null||this.It(o,l)||this.at(o,l,Ce.newNoDocument(l,e))}s.j&&(n.set(o,s.H()),s.J())}});let r=oe();this.rt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.wt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.it.forEach((s,o)=>o.setReadTime(e));const i=new Xh(e,n,this.ot,this.it,r);return this.it=Hn(),this.rt=Tk(),this.ot=new Te(Z),i}ut(e,n){if(!this.ft(e))return;const r=this.It(e,n.key)?2:0;this.lt(e).Y(n.key,r),this.it=this.it.insert(n.key,n),this.rt=this.rt.insert(n.key,this.Et(n.key).add(e))}at(e,n,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,n)?i.Y(n,1):i.X(n),this.rt=this.rt.insert(n,this.Et(n).delete(e)),r&&(this.it=this.it.insert(n,r))}removeTarget(e){this.st.delete(e)}gt(e){const n=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let n=this.st.get(e);return n||(n=new Ik,this.st.set(e,n)),n}Et(e){let n=this.rt.get(e);return n||(n=new Te(Z),this.rt=this.rt.insert(e,n)),n}ft(e){const n=this.wt(e)!==null;return n||b("WatchChangeAggregator","Detected inactive target",e),n}wt(e){const n=this.st.get(e);return n&&n.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new Ik),this.nt.getRemoteKeysForTarget(e).forEach(n=>{this.at(e,n,null)})}It(e,n){return this.nt.getRemoteKeysForTarget(e).has(n)}}function Tk(){return new Fe(x.comparator)}function Sk(){return new Fe(x.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),L8=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class F8{constructor(e,n){this.databaseId=e,this.N=n}}function Wc(t,e){return t.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mM(t,e){return t.N?e.toBase64():e.toUint8Array()}function $8(t,e){return Wc(t,e.toTimestamp())}function ot(t){return q(!!t),j.fromTimestamp(function(e){const n=ls(e);return new st(n.seconds,n.nanos)}(t))}function NI(t,e){return function(n){return new re(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function yM(t){const e=re.fromString(t);return q(bM(e)),e}function zc(t,e){return NI(t.databaseId,e.path)}function Nr(t,e){const n=yM(e);if(n.get(1)!==t.databaseId.projectId)throw new T(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new T(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new x(vM(n))}function hw(t,e){return NI(t.databaseId,e)}function _M(t){const e=yM(t);return e.length===4?re.emptyPath():vM(e)}function Kc(t){return new re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vM(t){return q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function bk(t,e,n){return{name:zc(t,e),fields:n.value.mapValue.fields}}function wM(t,e,n){const r=Nr(t,e.name),i=ot(e.updateTime),s=new Ut({mapValue:{fields:e.fields}}),o=Ce.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function U8(t,e){return"found"in e?function(n,r){q(!!r.found),r.found.name,r.found.updateTime;const i=Nr(n,r.found.name),s=ot(r.found.updateTime),o=new Ut({mapValue:{fields:r.found.fields}});return Ce.newFoundDocument(i,s,o)}(t,e):"missing"in e?function(n,r){q(!!r.missing),q(!!r.readTime);const i=Nr(n,r.missing),s=ot(r.readTime);return Ce.newNoDocument(i,s)}(t,e):F()}function V8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:F()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.N?(q(u===void 0||typeof u=="string"),He.fromBase64String(u||"")):(q(u===void 0||u instanceof Uint8Array),He.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?E.UNKNOWN:fM(l.code);return new T(u,l.message||"")}(o);n=new gM(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nr(t,r.document.name),s=ot(r.document.updateTime),o=new Ut({mapValue:{fields:r.document.fields}}),a=Ce.newFoundDocument(i,s,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new cf(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Nr(t,r.document),s=r.readTime?ot(r.readTime):j.min(),o=Ce.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Nr(t,r.document),s=r.removedTargetIds||[];n=new cf([],s,i,null)}else{if(!("filter"in e))return F();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new A8(i),o=r.targetId;n=new pM(o,s)}}return n}function Hc(t,e){let n;if(e instanceof Qh)n={update:bk(t,e.key,e.value)};else if(e instanceof Yh)n={delete:zc(t,e.key)};else if(e instanceof qo)n={update:bk(t,e.key,e.data),updateMask:H8(e.fieldMask)};else{if(!(e instanceof RI))return F();n={verify:zc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof ll)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof vo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof wo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ul)return{fieldPath:s.field.canonicalString(),increment:o.k};throw F()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:$8(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:F()}(t,e.precondition)),n}function dw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Ve.updateTime(ot(i.updateTime)):i.exists!==void 0?Ve.exists(i.exists):Ve.none()}(e.currentDocument):Ve.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,o){let a=null;if("setToServerValue"in o)q(o.setToServerValue==="REQUEST_TIME"),a=new ll;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new vo(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new wo(u)}else"increment"in o?a=new ul(s,o.increment):F();const l=nt.fromServerFormat(o.fieldPath);return new Gh(l,a)}(t,i)):[];if(e.update){e.update.name;const i=Nr(t,e.update.name),s=new Ut({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new il(l.map(u=>nt.fromServerFormat(u)))}(e.updateMask);return new qo(i,s,o,n,r)}return new Qh(i,s,n,r)}if(e.delete){const i=Nr(t,e.delete);return new Yh(i,n)}if(e.verify){const i=Nr(t,e.verify);return new RI(i,n)}return F()}function B8(t,e){return t&&t.length>0?(q(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?ot(r.updateTime):ot(i);return s.isEqual(j.min())&&(s=ot(i)),new b8(s,r.transformResults||[])}(n,e))):[]}function EM(t,e){return{documents:[hw(t,e.path)]}}function IM(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=hw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hw(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(dk(h.value))return{unaryFilter:{field:ra(h.field),op:"IS_NAN"}};if(hk(h.value))return{unaryFilter:{field:ra(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(dk(h.value))return{unaryFilter:{field:ra(h.field),op:"IS_NOT_NAN"}};if(hk(h.value))return{unaryFilter:{field:ra(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ra(h.field),op:W8(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:ra(c.field),direction:q8(c.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(l,u){return l.N||jo(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function TM(t){let e=_M(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){q(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=SM(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Fa(va(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,jo(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,d=c.values||[];return new ol(d,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,d=c.values||[];return new ol(d,h)}(n.endAt)),eM(e,i,o,s,a,"F",l,u)}function j8(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return F()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function SM(t){return t?t.unaryFilter!==void 0?[K8(t)]:t.fieldFilter!==void 0?[z8(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>SM(e)).reduce((e,n)=>e.concat(n)):F():[]}function q8(t){return M8[t]}function W8(t){return L8[t]}function ra(t){return{fieldPath:t.canonicalString()}}function va(t){return nt.fromServerFormat(t.fieldPath)}function z8(t){return tn.create(va(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(t.fieldFilter.op),t.fieldFilter.value)}function K8(t){switch(t.unaryFilter.op){case"IS_NAN":const e=va(t.unaryFilter.field);return tn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=va(t.unaryFilter.field);return tn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=va(t.unaryFilter.field);return tn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=va(t.unaryFilter.field);return tn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return F()}}function H8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ck(e)),e=G8(t.get(n),e);return Ck(e)}function G8(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Ck(t){return t+""}function br(t){const e=t.length;if(q(e>=2),e===2)return q(t.charAt(0)===""&&t.charAt(1)===""),re.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&F(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:F()}s=o+2}return new re(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,n){this.seconds=e,this.nanoseconds=n}}class En{constructor(e,n,r){this.ownerId=e,this.allowTabSynchronization=n,this.leaseTimestampMs=r}}En.store="owner",En.key="owner";class Ki{constructor(e,n,r){this.userId=e,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}}Ki.store="mutationQueues",Ki.keyPath="userId";class me{constructor(e,n,r,i,s){this.userId=e,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=s}}me.store="mutations",me.keyPath="batchId",me.userMutationsIndex="userMutationsIndex",me.userMutationsKeyPath=["userId","batchId"];class $t{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,n){return[e,rt(n)]}static key(e,n,r){return[e,rt(n),r]}}$t.store="documentMutations",$t.PLACEHOLDER=new $t;class Y8{constructor(e,n){this.path=e,this.readTime=n}}class X8{constructor(e,n){this.path=e,this.version=n}}class ke{constructor(e,n,r,i,s,o){this.unknownDocument=e,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=s,this.parentPath=o}}ke.store="remoteDocuments",ke.readTimeIndex="readTimeIndex",ke.readTimeIndexPath="readTime",ke.collectionReadTimeIndex="collectionReadTimeIndex",ke.collectionReadTimeIndexPath=["parentPath","readTime"];class Cr{constructor(e){this.byteSize=e}}Cr.store="remoteDocumentGlobal",Cr.key="remoteDocumentGlobalKey";class pn{constructor(e,n,r,i,s,o,a){this.targetId=e,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=o,this.query=a}}pn.store="targets",pn.keyPath="targetId",pn.queryTargetsIndexName="queryTargetsIndex",pn.queryTargetsKeyPath=["canonicalId","targetId"];class Ct{constructor(e,n,r){this.targetId=e,this.path=n,this.sequenceNumber=r}}Ct.store="targetDocuments",Ct.keyPath=["targetId","path"],Ct.documentTargetsIndex="documentTargetsIndex",Ct.documentTargetsKeyPath=["path","targetId"];class Tn{constructor(e,n,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Tn.key="targetGlobalKey",Tn.store="targetGlobal";class Js{constructor(e,n){this.collectionId=e,this.parent=n}}Js.store="collectionParents",Js.keyPath=["collectionId","parent"];class ai{constructor(e,n,r,i){this.clientId=e,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}}ai.store="clientMetadata",ai.keyPath="clientId";class cl{constructor(e,n,r){this.bundleId=e,this.createTime=n,this.version=r}}cl.store="bundles",cl.keyPath="bundleId";class hl{constructor(e,n,r){this.name=e,this.readTime=n,this.bundledQuery=r}}hl.store="namedQueries",hl.keyPath="name";class kn{constructor(e,n,r){this.indexId=e,this.collectionGroup=n,this.fields=r}}kn.store="indexConfiguration",kn.keyPath="indexId",kn.collectionGroupIndex="collectionGroupIndex",kn.collectionGroupIndexPath="collectionGroup";class Bn{constructor(e,n,r,i,s,o){this.indexId=e,this.uid=n,this.sequenceNumber=r,this.readTime=i,this.documentKey=s,this.largestBatchId=o}}Bn.store="indexState",Bn.keyPath=["indexId","uid"],Bn.sequenceNumberIndex="sequenceNumberIndex",Bn.sequenceNumberIndexPath=["uid","sequenceNumber"];class jn{constructor(e,n,r,i,s){this.indexId=e,this.uid=n,this.arrayValue=r,this.directionalValue=i,this.documentKey=s}}jn.store="indexEntries",jn.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],jn.documentKeyIndex="documentKeyIndex",jn.documentKeyIndexPath=["indexId","uid","documentKey"];class tt{constructor(e,n,r,i,s,o){this.userId=e,this.collectionPath=n,this.documentId=r,this.collectionGroup=i,this.largestBatchId=s,this.overlayMutation=o}}tt.store="documentOverlays",tt.keyPath=["userId","collectionPath","documentId"],tt.collectionPathOverlayIndex="collectionPathOverlayIndex",tt.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],tt.collectionGroupOverlayIndex="collectionGroupOverlayIndex",tt.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const CM=[Ki.store,me.store,$t.store,ke.store,pn.store,En.store,Tn.store,Ct.store,ai.store,Cr.store,Js.store,cl.store,hl.store],kM=[...CM,tt.store],J8=[...kM,kn.store,Bn.store,jn.store];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new I((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof I?n:I.resolve(n)}catch(n){return I.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):I.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):I.reject(n)}static resolve(e){return new I((n,r)=>{n(e)})}static reject(e){return new I((n,r)=>{r(e)})}static waitFor(e){return new I((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=I.resolve(!1);for(const r of e)n=n.next(i=>i?I.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.At=new it,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{n.error?this.At.reject(new Gu(e,n.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=PI(r.target.error);this.At.reject(new Gu(e,i))}}static open(e,n,r,i){try{return new Om(n,e.transaction(i,r))}catch(s){throw new Gu(n,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(b("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new eY(n)}}class lr{constructor(e,n,r){this.name=e,this.version=n,this.bt=r,lr.vt(ve())===12.2&&Ue("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return b("SimpleDb","Removing database:",e),Ps(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!Nn())return!1;if(lr.St())return!0;const e=ve(),n=lr.vt(e),r=0<n&&n<10,i=lr.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return typeof process!="undefined"&&((e=process.env)===null||e===void 0?void 0:e.Ct)==="YES"}static Nt(e,n){return e.store(n)}static vt(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async xt(e){return this.db||(b("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Gu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new T(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new T(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Gu(e,o))},i.onupgradeneeded=s=>{b("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.bt.kt(o,i.transaction,s.oldVersion,this.version).next(()=>{b("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.Ot&&(this.db.onversionchange=n=>this.Ot(n)),this.db}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.xt(e);const a=Om.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.Pt(),u)).catch(u=>(a.abort(u),I.reject(u))).toPromise();return l.catch(()=>{}),await a.Rt,l}catch(a){const l=a.name!=="FirebaseError"&&o<3;if(b("SimpleDb","Transaction failed with error:",a.message,"Retrying:",l),this.close(),!l)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Z8{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return Ps(this.$t.delete())}}class Gu extends T{constructor(e,n){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Wo(t){return t.name==="IndexedDbTransactionError"}class eY{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(b("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(b("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ps(r)}add(e){return b("SimpleDb","ADD",this.store.name,e,e),Ps(this.store.add(e))}get(e){return Ps(this.store.get(e)).next(n=>(n===void 0&&(n=null),b("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return b("SimpleDb","DELETE",this.store.name,e),Ps(this.store.delete(e))}count(){return b("SimpleDb","COUNT",this.store.name),Ps(this.store.count())}qt(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.Kt(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new I((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}Gt(e,n){b("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(s,o,a)=>a.delete())}Qt(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.Kt(i,n)}Wt(e){const n=this.cursor({});return new I((r,i)=>{n.onerror=s=>{const o=PI(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}Kt(e,n){const r=[];return new I((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Z8(a),u=n(a.primaryKey,a.value,l);if(u instanceof I){const c=u.catch(h=>(l.done(),I.reject(h)));r.push(c)}l.isDone?i():l.Lt===null?a.continue():a.continue(l.Lt)}}).next(()=>I.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ps(t){return new I((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=PI(r.target.error);n(i)}})}let kk=!1;function PI(t){const e=lr.vt(ve());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kk||(kk=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak extends RM{constructor(e,n){super(),this.zt=e,this.currentSequenceNumber=n}}function mt(t,e){const n=N(t);return lr.Nt(n.zt,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&C8(s,e,r[i])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&uw(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&uw(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const r=e.get(n.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(j.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(n,r)=>yk(n,r))&&rl(this.baseMutations,e.baseMutations,(n,r)=>yk(n,r))}}class xI{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){q(e.mutations.length===r.length);let i=P8;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new xI(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r,i,s=j.min(),o=j.min(),a=He.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.Ht=e}}function PM(t,e){let n;if(e.document)n=wM(t.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=x.fromSegments(e.noDocument.path),i=Io(e.noDocument.readTime);n=Ce.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return F();{const r=x.fromSegments(e.unknownDocument.path),i=Io(e.unknownDocument.version);n=Ce.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(LI(e.readTime)),n}function Rk(t,e){const n=MI(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i=function(o,a){return{name:zc(o,a.key),fields:a.data.value.mapValue.fields,updateTime:Wc(o,a.version.toTimestamp())}}(t.Ht,e),s=e.hasCommittedMutations;return new ke(null,null,i,s,n,r)}if(e.isNoDocument()){const i=e.key.path.toArray(),s=Eo(e.version),o=e.hasCommittedMutations;return new ke(null,new Y8(i,s),null,o,n,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),s=Eo(e.version);return new ke(new X8(i,s),null,null,!0,n,r)}return F()}function MI(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function LI(t){const e=new st(t[0],t[1]);return j.fromTimestamp(e)}function Eo(t){const e=t.toTimestamp();return new Q8(e.seconds,e.nanoseconds)}function Io(t){const e=new st(t.seconds,t.nanoseconds);return j.fromTimestamp(e)}function la(t,e){const n=(e.baseMutations||[]).map(s=>dw(t.Ht,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>dw(t.Ht,s)),i=st.fromMillis(e.localWriteTimeMs);return new OI(e.batchId,i,n,r)}function Cu(t){const e=Io(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Io(t.lastLimboFreeSnapshotVersion):j.min();let r;var i;return t.query.documents!==void 0?(q((i=t.query).documents.length===1),r=Jn(Vl(_M(i.documents[0])))):r=function(s){return Jn(TM(s))}(t.query),new Hi(r,t.targetId,0,t.lastListenSequenceNumber,e,n,He.fromBase64String(t.resumeToken))}function OM(t,e){const n=Eo(e.snapshotVersion),r=Eo(e.lastLimboFreeSnapshotVersion);let i;i=Tp(e.target)?EM(t.Ht,e.target):IM(t.Ht,e.target);const s=e.resumeToken.toBase64();return new pn(e.targetId,Kh(e.target),n,s,e.sequenceNumber,r,i)}function FI(t){const e=TM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tM(e,e.limit,"L"):e}function Xy(t,e){return new DI(e.largestBatchId,dw(t.Ht,e.overlayMutation))}function Nk(t,e){const n=e.path.lastSegment();return[t,rt(e.path.popLast()),n]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{getBundleMetadata(e,n){return Pk(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Io(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return Pk(e).put({bundleId:(r=n).id,createTime:Eo(ot(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return Ok(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:FI(i.bundledQuery),readTime:Io(i.readTime)};var i})}saveNamedQuery(e,n){return Ok(e).put(function(r){return{name:r.name,readTime:Eo(ot(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Pk(t){return mt(t,cl.store)}function Ok(t){return mt(t,hl.store)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.O=e,this.userId=n}static Jt(e,n){const r=n.uid||"";return new $I(e,r)}getOverlay(e,n){return mu(e).get(Nk(this.userId,n)).next(r=>r?Xy(this.O,r):null)}saveOverlays(e,n,r){const i=[];return r.forEach(s=>{const o=new DI(n,s);i.push(this.Yt(e,o))}),I.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(rt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(mu(e).Gt(tt.collectionPathOverlayIndex,a))}),I.waitFor(s)}getOverlaysForCollection(e,n,r){const i=new Map,s=rt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return mu(e).qt(tt.collectionPathOverlayIndex,o).next(a=>{for(const l of a){const u=Xy(this.O,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=new Map;let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return mu(e).Qt({index:tt.collectionGroupOverlayIndex,range:a},(l,u,c)=>{const h=Xy(this.O,u);s.size<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>s)}Yt(e,n){return mu(e).put(function(r,i,s){const[o,a,l]=Nk(i,s.mutation.key);return new tt(i,a,l,s.mutation.key.getCollectionGroup(),s.largestBatchId,Hc(r.Ht,s.mutation))}(this.O,this.userId,n))}}function mu(t){return mt(t,tt.store)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){}Xt(e,n){this.Zt(e,n),n.te()}Zt(e,n){if("nullValue"in e)this.ee(n,5);else if("booleanValue"in e)this.ee(n,10),n.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(n,15),n.ne(Ae(e.integerValue));else if("doubleValue"in e){const r=Ae(e.doubleValue);isNaN(r)?this.ee(n,13):(this.ee(n,15),jc(r)?n.ne(0):n.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(n,20),typeof r=="string"?n.se(r):(n.se(`${r.seconds||""}`),n.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,n),this.re(n);else if("bytesValue"in e)this.ee(n,30),n.oe(mo(e.bytesValue)),this.re(n);else if("referenceValue"in e)this.ce(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(n,45),n.ne(r.latitude||0),n.ne(r.longitude||0)}else"mapValue"in e?fr(e,u8)?this.ee(n,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,n),this.re(n)):"arrayValue"in e?(this.ae(e.arrayValue,n),this.re(n)):F()}ie(e,n){this.ee(n,25),this.he(e,n)}he(e,n){n.se(e)}ue(e,n){const r=e.fields||{};this.ee(n,55);for(const i of Object.keys(r))this.ie(i,n),this.Zt(r[i],n)}ae(e,n){const r=e.values||[];this.ee(n,50);for(const i of r)this.Zt(i,n)}ce(e,n){this.ee(n,37),x.fromName(e).path.forEach(r=>{this.ee(n,60),this.he(r,n)})}ee(e,n){e.ne(n)}re(e){e.ne(2)}}bp.le=new bp;function nY(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function xk(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=nY(255&n[i]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}class rY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.de(r.value),r=n.next();this._e()}we(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.me(r.value),r=n.next();this.ge()}ye(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=n.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=n.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const n=this.Ee(e),r=xk(n);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Ae(e){const n=this.Ee(e),r=xk(n);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}de(e){const n=255&e;n===0?(this.Pe(0),this.Pe(255)):n===255?(this.Pe(255),this.Pe(0)):this.Pe(n)}me(e){const n=255&e;n===0?(this.ve(0),this.ve(255)):n===255?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class iY{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class sY{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class Dk{constructor(){this.Se=new rY,this.De=new iY(this.Se),this.Ce=new sY(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return e===0?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}}function Zy(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=x.comparator(t.documentKey,e.documentKey),n!==0?n:(n=Mk(t.arrayValue,e.arrayValue),n!==0?n:Mk(t.directionalValue,e.directionalValue)))}function Mk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(){this.xe=new UI}addToCollectionParentIndex(e,n){return this.xe.add(n),I.resolve()}getCollectionParents(e,n){return I.resolve(this.xe.getEntries(n))}addFieldIndex(e,n){return I.resolve()}deleteFieldIndex(e,n){return I.resolve()}getDocumentsMatchingTarget(e,n,r){return I.resolve(oe())}getFieldIndex(e,n){return I.resolve(null)}getFieldIndexes(e,n){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}updateCollectionGroup(e,n,r){return I.resolve()}updateIndexEntries(e,n){return I.resolve()}}class UI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Te(re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Te(re.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{constructor(e){this.user=e,this.ke=new UI,this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.ke.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.ke.add(n)});const s={collectionId:r,parent:rt(i)};return Lk(e).put(s)}return I.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[HD(n),""],!1,!0);return Lk(e).qt(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(br(o.parent))}return r})}addFieldIndex(e,n){const r=Od(e),i=function(s){return new kn(s.indexId,s.collectionGroup,s.fields.map(o=>[o.fieldPath.canonicalString(),o.kind]))}(n);return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,n){const r=Od(e),i=xd(e),s=Pd(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n,r){return I.resolve(oe())}getFieldIndex(e,n){return I.resolve(null)}Oe(e,n){const r=new Dk;for(const i of function(s){return s.fields.filter(o=>o.kind!==2)}(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ne(i.kind);bp.le.Xt(s,o)}return r.Ve()}Me(e){const n=new Dk;return bp.le.Xt(e,n.Ne(0)),n.Ve()}getFieldIndexes(e,n){const r=Od(e),i=xd(e);return(n?r.qt(kn.collectionGroupIndex,IDBKeyRange.bound(n,n)):r.qt()).next(s=>{const o=[];return I.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,c){const h=c?new Ip(c.sequenceNumber,new km(Io(c.readTime),new x(br(c.documentKey)),c.largestBatchId)):Ip.empty(),d=u.fields.map(([f,m])=>new c8(nt.fromServerFormat(f),m));return new JD(u.indexId,u.collectionGroup,d,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Od(e),s=xd(e);return this.$e(e).next(o=>i.qt(kn.collectionGroupIndex,IDBKeyRange.bound(n,n)).next(a=>I.forEach(a,l=>s.put(function(u,c,h,d){return new Bn(u,c.uid||"",h,Eo(d.readTime),rt(d.documentKey.path),d.largestBatchId)}(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return I.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?I.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),I.forEach(a,l=>this.Fe(e,i,l).next(u=>{const c=this.Be(s,l);return u.isEqual(c)?I.resolve():this.Le(e,s,u,c)}))))})}Ue(e,n,r){return Pd(e).put(new jn(r.indexId,this.uid,r.arrayValue,r.directionalValue,rt(n.key.path)))}qe(e,n,r){return Pd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,rt(n.key.path)])}Fe(e,n,r){const i=Pd(e);let s=new Te(Zy);return i.Qt({index:jn.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,rt(n.path)])},(o,a)=>{s=s.add(new Jy(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Be(e,n){let r=new Te(Zy);const i=this.Oe(n,e);if(i==null)return r;const s=function(o){return o.fields.find(a=>a.kind===2)}(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Cm(o))for(const a of o.arrayValue.values||[])r=r.add(new Jy(n.indexId,e.key,this.Me(a),i))}else r=r.add(new Jy(n.indexId,e.key,new Uint8Array,i));return r}Le(e,n,r,i){b("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(o,a,l,u,c){const h=o.getIterator(),d=a.getIterator();let f=na(h),m=na(d);for(;f||m;){let _=!1,p=!1;if(f&&m){const g=l(f,m);g<0?p=!0:g>0&&(_=!0)}else f!=null?p=!0:_=!0;_?(u(m),m=na(d)):p?(c(f),f=na(h)):(f=na(h),m=na(d))}}(r,i,Zy,o=>{s.push(this.Ue(e,n,o))},o=>{s.push(this.qe(e,n,o))}),I.waitFor(s)}$e(e){let n=1;return xd(e).Qt({index:Bn.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}}function Lk(t){return mt(t,Js.store)}function Pd(t){return mt(t,jn.store)}function Od(t){return mt(t,kn.store)}function xd(t){return mt(t,Bn.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t,e,n){const r=t.store(me.store),i=t.store($t.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Qt({range:o},(c,h,d)=>(a++,d.delete()));s.push(l.next(()=>{q(a===1)}));const u=[];for(const c of n.mutations){const h=$t.key(e,c.key.path,n.batchId);s.push(i.delete(h)),u.push(c.key)}return I.waitFor(s).next(()=>u)}function Cp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw F();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(41943040,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class VI{constructor(e,n,r,i){this.userId=e,this.O=n,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,n,r,i){q(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new VI(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).Qt({index:me.userMutationsIndex,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ua(e),o=Ii(e);return o.add({}).next(a=>{q(typeof a=="number");const l=new OI(a,n,r,i),u=function(d,f,m){const _=m.baseMutations.map(g=>Hc(d.Ht,g)),p=m.mutations.map(g=>Hc(d.Ht,g));return new me(f,m.batchId,m.localWriteTime.toMillis(),_,p)}(this.O,this.userId,l),c=[];let h=new Te((d,f)=>Z(d.canonicalString(),f.canonicalString()));for(const d of i){const f=$t.key(this.userId,d.key.path,a);h=h.add(d.key.path.popLast()),c.push(o.put(u)),c.push(s.put(f,$t.PLACEHOLDER))}return h.forEach(d=>{c.push(this.indexManager.addToCollectionParentIndex(e,d))}),e.addOnCommittedListener(()=>{this.Ke[a]=l.keys()}),I.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return Ii(e).get(n).next(r=>r?(q(r.userId===this.userId),la(this.O,r)):null)}Ge(e,n){return this.Ke[n]?I.resolve(this.Ke[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Ke[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ii(e).Qt({index:me.userMutationsIndex,range:i},(o,a,l)=>{a.userId===this.userId&&(q(a.batchId>=r),s=la(this.O,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ii(e).Qt({index:me.userMutationsIndex,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ii(e).qt(me.userMutationsIndex,n).next(r=>r.map(i=>la(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=$t.prefixForPath(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ua(e).Qt({range:i},(o,a,l)=>{const[u,c,h]=o,d=br(c);if(u===this.userId&&n.path.isEqual(d))return Ii(e).get(h).next(f=>{if(!f)throw F();q(f.userId===this.userId),s.push(la(this.O,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Te(Z);const i=[];return n.forEach(s=>{const o=$t.prefixForPath(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ua(e).Qt({range:a},(u,c,h)=>{const[d,f,m]=u,_=br(f);d===this.userId&&s.path.isEqual(_)?r=r.add(m):h.done()});i.push(l)}),I.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=$t.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Te(Z);return ua(e).Qt({range:o},(l,u,c)=>{const[h,d,f]=l,m=br(d);h===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):c.done()}).next(()=>this.je(e,a))}je(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ii(e).get(s).next(o=>{if(o===null)throw F();q(o.userId===this.userId),r.push(la(this.O,o))}))}),I.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return xM(e.zt,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Qe(n.batchId)}),I.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return I.resolve();const r=IDBKeyRange.lowerBound($t.prefixForUser(this.userId)),i=[];return ua(e).Qt({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=br(s[1]);i.push(l)}else a.done()}).next(()=>{q(i.length===0)})})}containsKey(e,n){return DM(e,this.userId,n)}We(e){return MM(e).get(this.userId).next(n=>n||new Ki(this.userId,-1,""))}}function DM(t,e,n){const r=$t.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ua(t).Qt({range:s,jt:!0},(a,l,u)=>{const[c,h,d]=a;c===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function Ii(t){return mt(t,me.store)}function ua(t){return mt(t,$t.store)}function MM(t){return mt(t,Ki.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new To(0)}static Je(){return new To(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(e,n){this.referenceDelegate=e,this.O=n}allocateTargetId(e){return this.Ye(e).next(n=>{const r=new To(n.highestTargetId);return n.highestTargetId=r.next(),this.Xe(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(n=>j.fromTimestamp(new st(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Xe(e,i)))}addTargetData(e,n){return this.Ze(e,n).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(n,r),this.Xe(e,r))))}updateTargetData(e,n){return this.Ze(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ia(e).delete(n.targetId)).next(()=>this.Ye(e)).next(r=>(q(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ia(e).Qt((o,a)=>{const l=Cu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>I.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ia(e).Qt((r,i)=>{const s=Cu(i);n(s)})}Ye(e){return $k(e).get(Tn.key).next(n=>(q(n!==null),n))}Xe(e,n){return $k(e).put(Tn.key,n)}Ze(e,n){return ia(e).put(OM(this.O,n))}tn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Kh(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ia(e).Qt({range:i,index:pn.queryTargetsIndexName},(o,a,l)=>{const u=Cu(a);Am(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ki(e);return n.forEach(o=>{const a=rt(o.path);i.push(s.put(new Ct(r,a))),i.push(this.referenceDelegate.addReference(e,r,o))}),I.waitFor(i)}removeMatchingKeys(e,n,r){const i=ki(e);return I.forEach(n,s=>{const o=rt(s.path);return I.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ki(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ki(e);let s=oe();return i.Qt({range:r,jt:!0},(o,a,l)=>{const u=br(o[1]),c=new x(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=rt(n.path),i=IDBKeyRange.bound([r],[HD(r)],!1,!0);let s=0;return ki(e).Qt({index:Ct.documentTargetsIndex,jt:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}Tt(e,n){return ia(e).get(n).next(r=>r?Cu(r):null)}}function ia(t){return mt(t,pn.store)}function $k(t){return mt(t,Tn.store)}function ki(t){return mt(t,Ct.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==AM)throw t;b("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk([t,e],[n,r]){const i=Z(t,n);return i===0?Z(e,r):i}class uY{constructor(e){this.en=e,this.buffer=new Te(Uk),this.nn=0}sn(){return++this.nn}rn(e){const n=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Uk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cY{constructor(e,n){this.garbageCollector=e,this.asyncQueue=n,this.on=!1,this.cn=null}start(e){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return this.cn!==null}un(e){const n=this.on?3e5:6e4;b("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,async()=>{this.cn=null,this.on=!0;try{await e.collectGarbage(this.garbageCollector)}catch(r){Wo(r)?b("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await zo(r)}await this.un(e)})}}class hY{constructor(e,n){this.an=e,this.params=n}calculateTargetCount(e,n){return this.an.hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return I.resolve(Cn.A);const r=new uY(n);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.an.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.an.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(b("LruGarbageCollector","Garbage collection skipped; disabled"),I.resolve(Fk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(b("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fk):this.fn(e,n))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(b("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),sw()<=G.DEBUG&&b("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),I.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new hY(r,i)}(this,n)}hn(e){const n=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}dn(e){let n=0;return this.ln(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}ln(e,n){return this._n(e,(r,i)=>n(i))}addReference(e,n,r){return Dd(e,r)}removeReference(e,n,r){return Dd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Dd(e,n)}wn(e,n){return function(r,i){let s=!1;return MM(r).Wt(o=>DM(r,o,i).next(a=>(a&&(s=!0),I.resolve(!a)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this._n(e,(o,a)=>{if(a<=n){const l=this.wn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,j.min()),ki(e).delete([0,rt(o.path)])))});i.push(l)}}).next(()=>I.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Dd(e,n)}_n(e,n){const r=ki(e);let i,s=Cn.A;return r.Qt({index:Ct.documentTargetsIndex},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Cn.A&&n(new x(br(i)),s),s=u,i=l):s=Cn.A}).next(()=>{s!==Cn.A&&n(new x(br(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dd(t,e){return ki(t).put(function(n,r){return new Ct(0,rt(n.path),r)}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={}}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n])}else this.inner[r]=[[e,n]]}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1}forEach(e){Bo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return GD(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(){this.changes=new Bl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ce.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?I.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return bi(e).put(Md(n),r)}removeEntry(e,n){const r=bi(e),i=Md(n);return r.delete(i)}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.mn(e,r)))}getEntry(e,n){return bi(e).get(Md(n)).next(r=>this.gn(n,r))}yn(e,n){return bi(e).get(Md(n)).next(r=>({document:this.gn(n,r),size:Cp(r)}))}getEntries(e,n){let r=Hn();return this.pn(e,n,(i,s)=>{const o=this.gn(i,s);r=r.insert(i,o)}).next(()=>r)}In(e,n){let r=Hn(),i=new Fe(x.comparator);return this.pn(e,n,(s,o)=>{const a=this.gn(s,o);r=r.insert(s,a),i=i.insert(s,Cp(o))}).next(()=>({documents:r,En:i}))}pn(e,n,r){if(n.isEmpty())return I.resolve();const i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),s=n.getIterator();let o=s.getNext();return bi(e).Qt({range:i},(a,l,u)=>{const c=x.fromSegments(a);for(;o&&x.comparator(o,c)<0;)r(o,null),o=s.getNext();o&&o.isEqual(c)&&(r(o,l),o=s.hasNext()?s.getNext():null),o?u.Ut(o.path.toArray()):u.done()}).next(()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null})}getAll(e,n,r){let i=Hn();const s=n.length+1,o={};if(r.isEqual(j.min())){const a=n.toArray();o.range=IDBKeyRange.lowerBound(a)}else{const a=n.toArray(),l=MI(r);o.range=IDBKeyRange.lowerBound([a,l],!0),o.index=ke.collectionReadTimeIndex}return bi(e).Qt(o,(a,l,u)=>{if(a.length!==s)return;const c=this.gn(x.fromSegments(a),l);n.isPrefixOf(c.key.path)?i=i.insert(c.key,c):u.done()}).next(()=>i)}newChangeBuffer(e){return new pY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Vk(e).get(Cr.key).next(n=>(q(!!n),n))}mn(e,n){return Vk(e).put(Cr.key,n)}gn(e,n){if(n){const r=PM(this.O,n);if(!(r.isNoDocument()&&r.version.isEqual(j.min())))return r}return Ce.newInvalidDocument(e)}}class pY extends LM{constructor(e,n){super(),this.Tn=e,this.trackRemovals=n,this.An=new Bl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Te((s,o)=>Z(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.An.get(s);if(o.isValidDocument()){const l=Rk(this.Tn.O,o);i=i.add(s.path.popLast()),r+=Cp(l)-a,n.push(this.Tn.addEntry(e,s,l))}else if(r-=a,this.trackRemovals){const l=Rk(this.Tn.O,o.convertToNoDocument(j.min()));n.push(this.Tn.addEntry(e,s,l))}else n.push(this.Tn.removeEntry(e,s))}),i.forEach(s=>{n.push(this.Tn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Tn.updateMetadata(e,r)),I.waitFor(n)}getFromCache(e,n){return this.Tn.yn(e,n).next(r=>(this.An.set(n,r.size),r.document))}getAllFromCache(e,n){return this.Tn.In(e,n).next(({documents:r,En:i})=>(i.forEach((s,o)=>{this.An.set(s,o)}),r))}}function Vk(t){return mt(t,Cr.store)}function bi(t){return mt(t,ke.store)}function Md(t){return t.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gY{constructor(e){this.O=e}kt(e,n,r,i){const s=new Om("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore(En.store)}(e),function(a){a.createObjectStore(Ki.store,{keyPath:Ki.keyPath}),a.createObjectStore(me.store,{keyPath:me.keyPath,autoIncrement:!0}).createIndex(me.userMutationsIndex,me.userMutationsKeyPath,{unique:!0}),a.createObjectStore($t.store)}(e),Bk(e),function(a){a.createObjectStore(ke.store)}(e));let o=I.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore(Ct.store),a.deleteObjectStore(pn.store),a.deleteObjectStore(Tn.store)}(e),Bk(e)),o=o.next(()=>function(a){const l=a.store(Tn.store),u=new Tn(0,0,j.min().toTimestamp(),0);return l.put(Tn.key,u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store(me.store).qt().next(u=>{a.deleteObjectStore(me.store),a.createObjectStore(me.store,{keyPath:me.keyPath,autoIncrement:!0}).createIndex(me.userMutationsIndex,me.userMutationsKeyPath,{unique:!0});const c=l.store(me.store),h=u.map(d=>c.put(d));return I.waitFor(h)})}(e,s))),o=o.next(()=>{(function(a){a.createObjectStore(ai.store,{keyPath:ai.keyPath})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Rn(s))),r<6&&i>=6&&(o=o.next(()=>(function(a){a.createObjectStore(Cr.store)}(e),this.Pn(s)))),r<7&&i>=7&&(o=o.next(()=>this.bn(s))),r<8&&i>=8&&(o=o.next(()=>this.vn(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e),function(a){const l=a.objectStore(ke.store);l.createIndex(ke.readTimeIndex,ke.readTimeIndexPath,{unique:!1}),l.createIndex(ke.collectionReadTimeIndex,ke.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(o=o.next(()=>this.Vn(s))),r<11&&i>=11&&(o=o.next(()=>{(function(a){a.createObjectStore(cl.store,{keyPath:cl.keyPath})})(e),function(a){a.createObjectStore(hl.store,{keyPath:hl.keyPath})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore(tt.store,{keyPath:tt.keyPath});l.createIndex(tt.collectionPathOverlayIndex,tt.collectionPathOverlayIndexPath,{unique:!1}),l.createIndex(tt.collectionGroupOverlayIndex,tt.collectionGroupOverlayIndexPath,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>{(function(a){a.createObjectStore(kn.store,{keyPath:kn.keyPath,autoIncrement:!0}).createIndex(kn.collectionGroupIndex,kn.collectionGroupIndexPath,{unique:!1}),a.createObjectStore(Bn.store,{keyPath:Bn.keyPath}).createIndex(Bn.sequenceNumberIndex,Bn.sequenceNumberIndexPath,{unique:!1}),a.createObjectStore(jn.store,{keyPath:jn.keyPath}).createIndex(jn.documentKeyIndex,jn.documentKeyIndexPath,{unique:!1})})(e)})),o}Pn(e){let n=0;return e.store(ke.store).Qt((r,i)=>{n+=Cp(i)}).next(()=>{const r=new Cr(n);return e.store(Cr.store).put(Cr.key,r)})}Rn(e){const n=e.store(Ki.store),r=e.store(me.store);return n.qt().next(i=>I.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt(me.userMutationsIndex,o).next(a=>I.forEach(a,l=>{q(l.userId===s.userId);const u=la(this.O,l);return xM(e,s.userId,u).next(()=>{})}))}))}bn(e){const n=e.store(Ct.store),r=e.store(ke.store);return e.store(Tn.store).get(Tn.key).next(i=>{const s=[];return r.Qt((o,a)=>{const l=new re(o),u=function(c){return[0,rt(c)]}(l);s.push(n.get(u).next(c=>c?I.resolve():(h=>n.put(new Ct(0,rt(h),i.highestListenSequenceNumber)))(l)))}).next(()=>I.waitFor(s))})}vn(e,n){e.createObjectStore(Js.store,{keyPath:Js.keyPath});const r=n.store(Js.store),i=new UI,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:rt(l)})}};return n.store(ke.store).Qt({jt:!0},(o,a)=>{const l=new re(o);return s(l.popLast())}).next(()=>n.store($t.store).Qt({jt:!0},([o,a,l],u)=>{const c=br(a);return s(c.popLast())}))}Vn(e){const n=e.store(pn.store);return n.Qt((r,i)=>{const s=Cu(i),o=OM(this.O,s);return n.put(o)})}}function Bk(t){t.createObjectStore(Ct.store,{keyPath:Ct.keyPath}).createIndex(Ct.documentTargetsIndex,Ct.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(pn.store,{keyPath:pn.keyPath}).createIndex(pn.queryTargetsIndexName,pn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Tn.store)}const e_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class BI{constructor(e,n,r,i,s,o,a,l,u,c,h=12){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Sn=s,this.window=o,this.document=a,this.Dn=u,this.Cn=c,this.schemaVersion=h,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=d=>Promise.resolve(),!BI.Vt())throw new T(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dY(this,i),this.Bn=n+"main",this.O=new NM(l),this.Ln=new lr(this.Bn,this.schemaVersion,new gY(this.O)),this.Un=new lY(this.referenceDelegate,this.O),this.qn=function(d){return new fY(d)}(this.O),this.Kn=new tY,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,c===!1&&Ue("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new T(E.FAILED_PRECONDITION,e_);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new Cn(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){return this.Fn=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget(async()=>{this.started&&await this.jn()}))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ld(e).put(new ai(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(n=>{n||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(n=>this.isPrimary&&!n?this.Xn(e).next(()=>!1):!!n&&this.Zn(e).next(()=>!0))).catch(e=>{if(Wo(e))return b("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return b("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return yu(e).get(En.key).next(n=>I.resolve(this.ts(n)))}es(e){return Ld(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.ss(this.$n,18e5)){this.$n=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=mt(n,ai.store);return r.qt().next(i=>{const s=this.rs(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return I.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Gn)for(const n of e)this.Gn.removeItem(this.os(n.clientId))}}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?I.resolve(!0):yu(e).get(En.key).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,5e3)&&!this.cs(n.ownerId)){if(this.ts(n)&&this.networkEnabled)return!0;if(!this.ts(n)){if(!n.allowTabSynchronization)throw new T(E.FAILED_PRECONDITION,e_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ld(e).qt().next(r=>this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&b("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.xn=!1,this.us(),this.Mn&&(this.Mn.cancel(),this.Mn=null),this.hs(),this.ls(),await this.Ln.runTransaction("shutdown","readwrite",[En.store,ai.store],e=>{const n=new Ak(e,Cn.A);return this.Xn(n).next(()=>this.es(n))}),this.Ln.close(),this.fs()}rs(e,n){return e.filter(r=>this.ss(r.updateTimeMs,n)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>Ld(e).qt().next(n=>this.rs(n,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,n){return VI.Jt(e,this.O,n,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new aY(e)}getDocumentOverlayCache(e){return $I.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,n,r){b("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(o=this.schemaVersion)===13?J8:o===12?kM:o===11?CM:void F();var o;let a;return this.Ln.runTransaction(e,i,s,l=>(a=new Ak(l,this.Nn?this.Nn.next():Cn.A),n==="readwrite-primary"?this.Jn(a).next(u=>!!u||this.Yn(a)).next(u=>{if(!u)throw Ue(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new T(E.FAILED_PRECONDITION,AM);return r(a)}).next(u=>this.Zn(a).next(()=>u)):this._s(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}_s(e){return yu(e).get(En.key).next(n=>{if(n!==null&&this.ss(n.leaseTimestampMs,5e3)&&!this.cs(n.ownerId)&&!this.ts(n)&&!(this.Cn||this.allowTabSynchronization&&n.allowTabSynchronization))throw new T(E.FAILED_PRECONDITION,e_)})}Zn(e){const n=new En(this.clientId,this.allowTabSynchronization,Date.now());return yu(e).put(En.key,n)}static Vt(){return lr.Vt()}Xn(e){const n=yu(e);return n.get(En.key).next(r=>this.ts(r)?(b("IndexedDbPersistence","Releasing primary lease."),n.delete(En.key)):I.resolve())}ss(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ue(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Qn(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground=this.document.visibilityState==="visible")}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.kn=()=>{this.us(),w2()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var n;try{const r=((n=this.Gn)===null||n===void 0?void 0:n.getItem(this.os(e)))!==null;return b("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ue("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){Ue("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch{}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yu(t){return mt(t,En.store)}function Ld(t){return mt(t,ai.store)}function jI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mY{constructor(e,n){this.progress=e,this.ws=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY{constructor(e,n,r){this.qn=e,this.gs=n,this.indexManager=r}ys(e,n){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.ps(e,n,r))}ps(e,n,r){return this.qn.getEntry(e,n).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}Is(e,n){e.forEach((r,i)=>{for(const s of n)s.applyToLocalView(i)})}Es(e,n){return this.qn.getEntries(e,n).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,n){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.Is(n,r))}As(e,n,r){return function(i){return x.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Rs(e,n.path):kI(n)?this.Ps(e,n,r):this.bs(e,n,r)}Rs(e,n){return this.ys(e,new x(n)).next(r=>{let i=cw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,n,r){const i=n.collectionGroup;let s=cw();return this.indexManager.getCollectionParents(e,i).next(o=>I.forEach(o,a=>{const l=function(u,c){return new _i(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.bs(e,l,r).next(u=>{u.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}bs(e,n,r){let i;return this.qn.getAll(e,n.path,r).next(s=>(i=s,this.gs.getAllMutationBatchesAffectingQuery(e,n))).next(s=>{for(const o of s)for(const a of o.mutations){const l=a.key;let u=i.get(l);u==null&&(u=Ce.newInvalidDocument(l),i=i.insert(l,u)),uw(a,u,o.localWriteTime),u.isFoundDocument()||(i=i.remove(l))}}).next(()=>(i.forEach((s,o)=>{AI(n,o)||(i=i.remove(s))}),i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.vs=r,this.Vs=i}static Ss(e,n){let r=oe(),i=oe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{Ds(e){this.Cs=e}As(e,n,r,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(j.min())?this.Ns(e,n):this.Cs.Es(e,i).next(s=>{const o=this.xs(n,s);return(lf(n)||Sp(n))&&this.ks(n.limitType,o,i,r)?this.Ns(e,n):(sw()<=G.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),lw(n)),this.Cs.As(e,n,r).next(a=>(o.forEach(l=>{a=a.insert(l.key,l)}),a)))})}xs(e,n){let r=new Te(rM(e));return n.forEach((i,s)=>{AI(e,s)&&(r=r.add(s))}),r}ks(e,n,r,i){if(r.size!==n.size)return!0;const s=e==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ns(e,n){return sw()<=G.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",lw(n)),this.Cs.As(e,n,j.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{constructor(e,n,r,i){this.persistence=e,this.Os=n,this.O=i,this.Ms=new Fe(Z),this.$s=new Bl(s=>Kh(s),Am),this.Fs=j.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new yY(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function $M(t,e,n,r){return new _Y(t,e,n,r)}async function UM(t,e){const n=N(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.gs.getAllMutationBatches(r).next(s=>(i=s,n.Ls(e),n.gs.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=oe();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.Us.Es(r,l).next(u=>({qs:u,removedBatchIds:o,addedBatchIds:a}))})})}function vY(t,e){const n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let d=I.resolve();return h.forEach(f=>{d=d.next(()=>u.getEntry(a,f)).next(m=>{const _=l.docVersions.get(f);q(_!==null),m.version.compareTo(_)<0&&(c.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),d.next(()=>o.gs.removeMutationBatch(a,c))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.gs.performConsistencyCheck(r)).next(()=>n.Us.Es(r,i))})}function VM(t){const e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Un.getLastRemoteSnapshotVersion(n))}function wY(t,e){const n=N(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((u,c)=>{const h=i.get(c);if(!h)return;a.push(n.Un.removeMatchingKeys(s,u.removedDocuments,c).next(()=>n.Un.addMatchingKeys(s,u.addedDocuments,c)));let d=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(c)?d=d.withResumeToken(He.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,r)),i=i.insert(c,d),function(f,m,_){return f.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-f.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(h,d,u)&&a.push(n.Un.updateTargetData(s,d))});let l=Hn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(BM(s,o,e.documentUpdates).next(u=>{l=u})),!r.isEqual(j.min())){const u=n.Un.getLastRemoteSnapshotVersion(s).next(c=>n.Un.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return I.waitFor(a).next(()=>o.apply(s)).next(()=>n.Us.Ts(s,l)).next(()=>l)}).then(s=>(n.Ms=i,s))}function BM(t,e,n){let r=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let s=Hn();return n.forEach((o,a)=>{const l=i.get(o);a.isNoDocument()&&a.version.isEqual(j.min())?(e.removeEntry(o,a.readTime),s=s.insert(o,a)):!l.isValidDocument()||a.version.compareTo(l.version)>0||a.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(a),s=s.insert(o,a)):b("LocalStore","Ignoring outdated watch update for ",o,". Current version:",l.version," Watch version:",a.version)}),s})}function EY(t,e){const n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.gs.getNextMutationBatchAfterBatchId(r,e)))}function dl(t,e){const n=N(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Un.getTargetData(r,e).next(s=>s?(i=s,I.resolve(i)):n.Un.allocateTargetId(r).next(o=>(i=new Hi(e,o,0,r.currentSequenceNumber),n.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.$s.set(e,r.targetId)),r})}async function fl(t,e,n){const r=N(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Wo(o))throw o;b("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}function kp(t,e,n){const r=N(t);let i=j.min(),s=oe();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=N(a),h=c.$s.get(u);return h!==void 0?I.resolve(c.Ms.get(h)):c.Un.getTargetData(l,u)}(r,o,Jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Os.As(o,e,n?i:j.min(),n?s:oe())).next(a=>({documents:a,Ks:s})))}function jM(t,e){const n=N(t),r=N(n.Un),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.Tt(s,e).next(o=>o?o.target:null))}function qM(t){const e=N(t);return e.persistence.runTransaction("Get new document changes","readonly",n=>function(r,i,s){const o=N(r);let a=Hn(),l=MI(s);const u=bi(i),c=IDBKeyRange.lowerBound(l,!0);return u.Qt({index:ke.readTimeIndex,range:c},(h,d)=>{const f=PM(o.O,d);a=a.insert(f.key,f),l=d.readTime}).next(()=>({ws:a,readTime:LI(l)}))}(e.Bs,n,e.Fs)).then(({ws:n,readTime:r})=>(e.Fs=r,n))}async function IY(t){const e=N(t);return e.persistence.runTransaction("Synchronize last document change read time","readonly",n=>function(r){const i=bi(r);let s=j.min();return i.Qt({index:ke.readTimeIndex,reverse:!0},(o,a,l)=>{a.readTime&&(s=LI(a.readTime)),l.done()}).next(()=>s)}(n)).then(n=>{e.Fs=n})}async function TY(t,e,n,r){const i=N(t);let s=oe(),o=Hn();for(const u of n){const c=e.Gs(u.metadata.name);u.document&&(s=s.add(c));const h=e.js(u);h.setReadTime(e.Qs(u.metadata.readTime)),o=o.insert(c,h)}const a=i.Bs.newChangeBuffer({trackRemovals:!0}),l=await dl(i,function(u){return Jn(Vl(re.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>BM(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.Un.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Un.addMatchingKeys(u,s,l.targetId)).next(()=>i.Us.Ts(u,c)).next(()=>c)))}async function SY(t,e,n=oe()){const r=await dl(t,Jn(FI(e.bundledQuery))),i=N(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=ot(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kn.saveNamedQuery(s,e);const a=r.withResumeToken(He.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(a.targetId,a),i.Un.updateTargetData(s,a).next(()=>i.Un.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Un.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kn.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,n){return I.resolve(this.Ws.get(n))}saveBundleMetadata(e,n){var r;return this.Ws.set(n.id,{id:(r=n).id,version:r.version,createTime:ot(r.createTime)}),I.resolve()}getNamedQuery(e,n){return I.resolve(this.zs.get(n))}saveNamedQuery(e,n){return this.zs.set(n.name,function(r){return{name:r.name,query:FI(r.bundledQuery),readTime:ot(r.readTime)}}(n)),I.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{constructor(){this.overlays=new Fe(x.comparator),this.Hs=new Map}getOverlay(e,n){return I.resolve(this.overlays.get(n))}saveOverlays(e,n,r){return r.forEach(i=>{this.Yt(e,n,i)}),I.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Hs.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Hs.delete(r)),I.resolve()}getOverlaysForCollection(e,n,r){const i=new Map,s=n.length+1,o=new x(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return I.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=new Map,s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=new Map,l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(c,u)),!(a.size>=i)););return I.resolve(a)}Yt(e,n,r){if(r===null)return;const i=this.overlays.get(r.key);i!==null&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new DI(n,r));let s=this.Hs.get(n);s===void 0&&(s=new Set,this.Hs.set(n,s)),s.add(r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.Js=new Te(Xe.Ys),this.Xs=new Te(Xe.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ei(new Xe(e,n))}ni(e,n){e.forEach(r=>this.removeReference(r,n))}si(e){const n=new x(new re([])),r=new Xe(n,e),i=new Xe(n,e+1),s=[];return this.Xs.forEachInRange([r,i],o=>{this.ei(o),s.push(o.key)}),s}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const n=new x(new re([])),r=new Xe(n,e),i=new Xe(n,e+1);let s=oe();return this.Xs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xe(e,0),r=this.Js.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.oi=n}static Ys(e,n){return x.comparator(e.key,n.key)||Z(e.oi,n.oi)}static Zs(e,n){return Z(e.oi,n.oi)||x.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.gs=[],this.ci=1,this.ui=new Te(Xe.Ys)}checkEmpty(e){return I.resolve(this.gs.length===0)}addMutationBatch(e,n,r,i){const s=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];const o=new OI(s,n,r,i);this.gs.push(o);for(const a of i)this.ui=this.ui.add(new Xe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return I.resolve(o)}lookupMutationBatch(e,n){return I.resolve(this.ai(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.hi(r),s=i<0?0:i;return I.resolve(this.gs.length>s?this.gs[s]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(this.gs.length===0?-1:this.ci-1)}getAllMutationBatches(e){return I.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),s=[];return this.ui.forEachInRange([r,i],o=>{const a=this.ai(o.oi);s.push(a)}),I.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Te(Z);return n.forEach(i=>{const s=new Xe(i,0),o=new Xe(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([s,o],a=>{r=r.add(a.oi)})}),I.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;x.isDocumentKey(s)||(s=s.child(""));const o=new Xe(new x(s),0);let a=new Te(Z);return this.ui.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.oi)),!0)},o),I.resolve(this.li(a))}li(e){const n=[];return e.forEach(r=>{const i=this.ai(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){q(this.fi(n.batchId,"removed")===0),this.gs.shift();let r=this.ui;return I.forEach(n.mutations,i=>{const s=new Xe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,n){const r=new Xe(n,0),i=this.ui.firstAfterOrEqual(r);return I.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.gs.length,I.resolve()}fi(e,n){return this.hi(e)}hi(e){return this.gs.length===0?0:e-this.gs[0].batchId}ai(e){const n=this.hi(e);return n<0||n>=this.gs.length?null:this.gs[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(e){this.di=e,this.docs=new Fe(x.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.di(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return I.resolve(r?r.document.mutableCopy():Ce.newInvalidDocument(n))}getEntries(e,n){let r=Hn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ce.newInvalidDocument(i))}),I.resolve(r)}getAll(e,n,r){let i=Hn();const s=new x(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||l.readTime.compareTo(r)<=0||(i=i.insert(l.key,l.mutableCopy()))}return I.resolve(i)}_i(e,n){return I.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new RY(this)}getSize(e){return I.resolve(this.size)}}class RY extends LM{constructor(e){super(),this.Tn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),I.waitFor(n)}getFromCache(e,n){return this.Tn.getEntry(e,n)}getAllFromCache(e,n){return this.Tn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(e){this.persistence=e,this.wi=new Bl(n=>Kh(n),Am),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.mi=0,this.gi=new WI,this.targetCount=0,this.yi=To.He()}forEachTarget(e,n){return this.wi.forEach((r,i)=>n(i)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.mi&&(this.mi=n),I.resolve()}Ze(e){this.wi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.yi=new To(n),this.highestTargetId=n),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,n){return this.Ze(n),this.targetCount+=1,I.resolve()}updateTargetData(e,n){return this.Ze(n),I.resolve()}removeTargetData(e,n){return this.wi.delete(n.target),this.gi.si(n.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.wi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.wi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),I.waitFor(s).next(()=>i)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,n){const r=this.wi.get(n)||null;return I.resolve(r)}addMatchingKeys(e,n,r){return this.gi.ti(n,r),I.resolve()}removeMatchingKeys(e,n,r){this.gi.ni(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),I.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.gi.si(n),I.resolve()}getMatchingKeysForTargetId(e,n){const r=this.gi.ri(n);return I.resolve(r)}containsKey(e,n){return I.resolve(this.gi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{constructor(e,n){this.pi={},this.overlays={},this.Nn=new Cn(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new NY(this),this.indexManager=new oY,this.qn=function(r){return new AY(r)}(r=>this.referenceDelegate.Ii(r)),this.O=new NM(n),this.Kn=new bY(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CY,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.pi[e.toKey()];return r||(r=new kY(n,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,n,r){b("MemoryPersistence","Starting transaction:",e);const i=new OY(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.Ti(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return I.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,n)))}}class OY extends RM{constructor(e){super(),this.currentSequenceNumber=e}}class zI{constructor(e){this.persistence=e,this.Ri=new WI,this.Pi=null}static bi(e){return new zI(e)}get vi(){if(this.Pi)return this.Pi;throw F()}addReference(e,n,r){return this.Ri.addReference(r,n),this.vi.delete(r.toString()),I.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.vi.add(r.toString()),I.resolve()}markPotentiallyOrphaned(e,n){return this.vi.add(n.toString()),I.resolve()}removeTarget(e,n){this.Ri.si(n.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.vi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Pi=new Set}Ti(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.vi,r=>{const i=x.fromPath(r);return this.Vi(e,i).next(s=>{s||n.removeEntry(i,j.min())})}).next(()=>(this.Pi=null,n.apply(e)))}updateLimboDocument(e,n){return this.Vi(e,n).next(r=>{r?this.vi.delete(n.toString()):this.vi.add(n.toString())})}Ii(e){return 0}Vi(e,n){return I.or([()=>I.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t,e){return`firestore_clients_${t}_${e}`}function qk(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function t_(t,e){return`firestore_targets_${t}_${e}`}class Ap{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Si(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new T(i.error.code,i.error.message))),o?new Ap(e,n,i.state,s):(Ue("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Si(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new T(r.error.code,r.error.message))),s?new Qu(e,r.state,i):(Ue("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Si(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Pm();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=YD(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Rp(e,s):(Ue("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class KI{constructor(e,n){this.clientId=e,this.onlineState=n}static Si(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new KI(n.clientId,n.onlineState):(Ue("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fw{constructor(){this.activeTargetIds=Pm()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n_{constructor(e,n,r,i,s){this.window=e,this.Sn=n,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new Fe(Z),this.started=!1,this.$i=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Fi=jk(this.persistenceKey,this.xi),this.Bi=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Mi=this.Mi.insert(this.xi,new fw),this.Li=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ki=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Gi=function(a){return`firestore_bundle_loaded_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.ds();for(const r of e){if(r===this.xi)continue;const i=this.getItem(jk(this.persistenceKey,r));if(i){const s=Rp.Si(r,i);s&&(this.Mi=this.Mi.insert(s.clientId,s))}}this.ji();const n=this.storage.getItem(this.Ki);if(n){const r=this.Qi(n);r&&this.Wi(r)}for(const r of this.$i)this.Oi(r);this.$i=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let n=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,n,r){this.Hi(e,n,r),this.Ji(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(t_(this.persistenceKey,e));if(r){const i=Qu.Si(e,r);i&&(n=i.state)}}return this.Yi.Ci(e),this.ji(),n}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(t_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Xi(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return b("SharedClientState","READ",e,n),n}setItem(e,n){b("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){b("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){const n=e;if(n.storageArea===this.storage){if(b("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Fi)return void Ue("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Li.test(n.key)){if(n.newValue==null){const r=this.er(n.key);return this.nr(r,null)}{const r=this.sr(n.key,n.newValue);if(r)return this.nr(r.clientId,r)}}else if(this.Ui.test(n.key)){if(n.newValue!==null){const r=this.ir(n.key,n.newValue);if(r)return this.rr(r)}}else if(this.qi.test(n.key)){if(n.newValue!==null){const r=this.cr(n.key,n.newValue);if(r)return this.ur(r)}}else if(n.key===this.Ki){if(n.newValue!==null){const r=this.Qi(n.newValue);if(r)return this.Wi(r)}}else if(n.key===this.Bi){const r=function(i){let s=Cn.A;if(i!=null)try{const o=JSON.parse(i);q(typeof o=="number"),s=o}catch(o){Ue("SharedClientState","Failed to read sequence number from WebStorage",o)}return s}(n.newValue);r!==Cn.A&&this.sequenceNumberHandler(r)}else if(n.key===this.Gi)return this.syncEngine.ar()}}else this.$i.push(n)})}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,n,r){const i=new Ap(this.currentUser,e,n,r),s=qk(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Di())}Ji(e){const n=qk(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Zi(e){const n={clientId:this.xi,onlineState:e};this.storage.setItem(this.Ki,JSON.stringify(n))}Xi(e,n,r){const i=t_(this.persistenceKey,e),s=new Qu(e,n,r);this.setItem(i,s.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const n=this.Li.exec(e);return n?n[1]:null}sr(e,n){const r=this.er(e);return Rp.Si(r,n)}ir(e,n){const r=this.Ui.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Ap.Si(new Tt(s),i,n)}cr(e,n){const r=this.qi.exec(e),i=Number(r[1]);return Qu.Si(i,n)}Qi(e){return KI.Si(e)}async rr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.hr(e.batchId,e.state,e.error);b("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,n){const r=n?this.Mi.insert(e,n):this.Mi.remove(e),i=this.zi(this.Mi),s=this.zi(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.dr(o,a).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let n=Pm();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class WM{constructor(){this._r=new fw,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,n,r){this.wr[e]=n}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new fw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xY{mr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.kr=n+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,n,r,i,s){const o=this.$r(e,n);b("RestConnection","Sending: ",o,r);const a={};return this.Fr(a,i,s),this.Br(e,o,a,r).then(l=>(b("RestConnection","Received: ",l),l),l=>{throw Uc("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}Lr(e,n,r,i,s){return this.Mr(e,n,r,i,s)}Fr(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$r(e,n){const r=DY[e];return`${this.kr}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,n,r,i){return new Promise((s,o)=>{const a=new GQ;a.listenOnce(zQ.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Yy.NO_ERROR:const u=a.getResponseJson();b("Connection","XHR received:",JSON.stringify(u)),s(u);break;case Yy.TIMEOUT:b("Connection",'RPC "'+e+'" timed out'),o(new T(E.DEADLINE_EXCEEDED,"Request time out"));break;case Yy.HTTP_ERROR:const c=a.getStatus();if(b("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const d=function(f){const m=f.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(m)>=0?m:E.UNKNOWN}(h.status);o(new T(d,h.message))}else o(new T(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new T(E.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{b("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(i);a.send(n,"POST",l,r,15)})}Ur(e,n,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=qQ(),o=WQ(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new HQ({})),this.Fr(a.initMessageHeaders,n,r),Sg()||wh()||_2()||UE()||v2()||vh()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=i.join("");b("Connection","Creating WebChannel: "+l,a);const u=s.createWebChannel(l,a);let c=!1,h=!1;const d=new MY({Ar:m=>{h?b("Connection","Not sending because WebChannel is closed:",m):(c||(b("Connection","Opening WebChannel transport."),u.open(),c=!0),b("Connection","WebChannel sending:",m),u.send(m))},Rr:()=>u.close()}),f=(m,_,p)=>{m.listen(_,g=>{try{p(g)}catch(y){setTimeout(()=>{throw y},0)}})};return f(u,Rd.EventType.OPEN,()=>{h||b("Connection","WebChannel transport opened.")}),f(u,Rd.EventType.CLOSE,()=>{h||(h=!0,b("Connection","WebChannel transport closed"),d.Cr())}),f(u,Rd.EventType.ERROR,m=>{h||(h=!0,Uc("Connection","WebChannel transport errored:",m),d.Cr(new T(E.UNAVAILABLE,"The operation could not be completed")))}),f(u,Rd.EventType.MESSAGE,m=>{var _;if(!h){const p=m.data[0];q(!!p);const g=p,y=g.error||((_=g[0])===null||_===void 0?void 0:_.error);if(y){b("Connection","WebChannel received error:",y);const v=y.status;let w=function(A){const $=$e[A];if($!==void 0)return fM($)}(v),O=y.message;w===void 0&&(w=E.INTERNAL,O="Unknown error status: "+v+" with message "+y.message),h=!0,d.Cr(new T(w,O)),u.close()}else b("Connection","WebChannel received:",p),d.Nr(p)}}),f(o,KQ.STAT_EVENT,m=>{m.stat===ak.PROXY?b("Connection","Detected buffering proxy"):m.stat===ak.NOPROXY&&b("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.Dr()},0),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(){return typeof window!="undefined"?window:null}function hf(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){return new F8(t,!0)}class HI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Sn=e,this.timerId=n,this.qr=r,this.Kr=i,this.Gr=s,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const n=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,n-r);i>0&&b("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){this.Qr!==null&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){this.Qr!==null&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,r,i,s,o,a,l){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new HI(e,n)}oo(){return this.state===1||this.state===5||this.co()}co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.uo()}async stop(){this.oo()&&await this.close(0)}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&this.so===null&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}async lo(){if(this.co())return this.close(0)}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}async close(e,n){this._o(),this.wo(),this.ro.cancel(),this.no++,e!==4?this.ro.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(Ue(n.toString()),Ue("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.mo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.vr(n)}mo(){}auth(){this.state=1;const e=this.yo(this.no),n=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===n&&this.po(r,i)},r=>{e(()=>{const i=new T(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,n){const r=this.yo(this.no);this.stream=this.Eo(e,n),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){this.state=5,this.ro.Hr(async()=>{this.state=0,this.start()})}Io(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return n=>{this.Sn.enqueueAndForget(()=>this.no===e?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FY extends KM{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.O=s}Eo(e,n){return this.eo.Ur("Listen",e,n)}onMessage(e){this.ro.reset();const n=V8(this.O,e),r=function(i){if(!("targetChange"in i))return j.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?j.min():s.readTime?ot(s.readTime):j.min()}(e);return this.listener.To(n,r)}Ao(e){const n={};n.database=Kc(this.O),n.addTarget=function(i,s){let o;const a=s.target;return o=Tp(a)?{documents:EM(i,a)}:{query:IM(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=mM(i,s.resumeToken):s.snapshotVersion.compareTo(j.min())>0&&(o.readTime=Wc(i,s.snapshotVersion.toTimestamp())),o}(this.O,e);const r=j8(this.O,e);r&&(n.labels=r),this.fo(n)}Ro(e){const n={};n.database=Kc(this.O),n.removeTarget=e,this.fo(n)}}class $Y extends KM{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.O=s,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,n){return this.eo.Ur("Write",e,n)}onMessage(e){if(q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const n=B8(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.Vo(r,n)}return q(!e.writeResults||e.writeResults.length===0),this.Po=!0,this.listener.So()}Do(){const e={};e.database=Kc(this.O),this.fo(e)}vo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Hc(this.O,r))};this.fo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new T(E.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,n,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.eo.Mr(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(E.UNKNOWN,i.toString())})}Lr(e,n,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.eo.Lr(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(E.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class VY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){this.xo===0&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){this.state==="Online"?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,e==="Online"&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(Ue(n),this.Oo=!1):b("OnlineStateTracker",n)}Lo(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BY{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=s,this.jo.mr(o=>{r.enqueueAndForget(async()=>{Es(this)&&(b("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=N(a);l.Ko.add(4),await jl(l),l.Qo.set("Unknown"),l.Ko.delete(4),await ed(l)}(this))})}),this.Qo=new VY(r,i)}}async function ed(t){if(Es(t))for(const e of t.Go)await e(!0)}async function jl(t){for(const e of t.Go)await e(!1)}function xm(t,e){const n=N(t);n.qo.has(e.targetId)||(n.qo.set(e.targetId,e),YI(n)?QI(n):Wl(n).co()&&GI(n,e))}function Gc(t,e){const n=N(t),r=Wl(n);n.qo.delete(e),r.co()&&HM(n,e),n.qo.size===0&&(r.co()?r.ho():Es(n)&&n.Qo.set("Unknown"))}function GI(t,e){t.Wo.Z(e.targetId),Wl(t).Ao(e)}function HM(t,e){t.Wo.Z(e),Wl(t).Ro(e)}function QI(t){t.Wo=new D8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>t.qo.get(e)||null}),Wl(t).start(),t.Qo.Mo()}function YI(t){return Es(t)&&!Wl(t).oo()&&t.qo.size>0}function Es(t){return N(t).Ko.size===0}function GM(t){t.Wo=void 0}async function jY(t){t.qo.forEach((e,n)=>{GI(t,e)})}async function qY(t,e){GM(t),YI(t)?(t.Qo.Bo(e),QI(t)):t.Qo.set("Unknown")}async function WY(t,e,n){if(t.Qo.set("Online"),e instanceof gM&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.qo.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.qo.delete(o),r.Wo.removeTarget(o))}(t,e)}catch(r){b("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Np(t,r)}else if(e instanceof cf?t.Wo.ct(e):e instanceof pM?t.Wo._t(e):t.Wo.ht(e),!n.isEqual(j.min()))try{const r=await VM(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Wo.yt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.qo.get(l);u&&i.qo.set(l,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=i.qo.get(a);if(!l)return;i.qo.set(a,l.withResumeToken(He.EMPTY_BYTE_STRING,l.snapshotVersion)),HM(i,a);const u=new Hi(l.target,a,1,l.sequenceNumber);GI(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){b("RemoteStore","Failed to raise snapshot:",r),await Np(t,r)}}async function Np(t,e,n){if(!Wo(e))throw e;t.Ko.add(1),await jl(t),t.Qo.set("Offline"),n||(n=()=>VM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{b("RemoteStore","Retrying IndexedDB access"),await n(),t.Ko.delete(1),await ed(t)})}function QM(t,e){return e().catch(n=>Np(t,n,e))}async function ql(t){const e=N(t),n=us(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;zY(e);)try{const i=await EY(e.localStore,r);if(i===null){e.Uo.length===0&&n.ho();break}r=i.batchId,KY(e,i)}catch(i){await Np(e,i)}YM(e)&&XM(e)}function zY(t){return Es(t)&&t.Uo.length<10}function KY(t,e){t.Uo.push(e);const n=us(t);n.co()&&n.bo&&n.vo(e.mutations)}function YM(t){return Es(t)&&!us(t).oo()&&t.Uo.length>0}function XM(t){us(t).start()}async function HY(t){us(t).Do()}async function GY(t){const e=us(t);for(const n of t.Uo)e.vo(n.mutations)}async function QY(t,e,n){const r=t.Uo.shift(),i=xI.from(r,e,n);await QM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ql(t)}async function YY(t,e){e&&us(t).bo&&await async function(n,r){if(i=r.code,dM(i)&&i!==E.ABORTED){const s=n.Uo.shift();us(n).ao(),await QM(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await ql(n)}var i}(t,e),YM(t)&&XM(t)}async function zk(t,e){const n=N(t);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");const r=Es(n);n.Ko.add(3),await jl(n),r&&n.Qo.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ko.delete(3),await ed(n)}async function pw(t,e){const n=N(t);e?(n.Ko.delete(2),await ed(n)):e||(n.Ko.add(2),await jl(n),n.Qo.set("Unknown"))}function Wl(t){return t.zo||(t.zo=function(e,n,r){const i=N(e);return i.No(),new FY(n,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(t.datastore,t.asyncQueue,{Pr:jY.bind(null,t),vr:qY.bind(null,t),To:WY.bind(null,t)}),t.Go.push(async e=>{e?(t.zo.ao(),YI(t)?QI(t):t.Qo.set("Unknown")):(await t.zo.stop(),GM(t))})),t.zo}function us(t){return t.Ho||(t.Ho=function(e,n,r){const i=N(e);return i.No(),new $Y(n,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(t.datastore,t.asyncQueue,{Pr:HY.bind(null,t),vr:YY.bind(null,t),So:GY.bind(null,t),Vo:QY.bind(null,t)}),t.Go.push(async e=>{e?(t.Ho.ao(),await ql(t)):(await t.Ho.stop(),t.Uo.length>0&&(b("RemoteStore",`Stopping write stream with ${t.Uo.length} pending writes`),t.Uo=[]))})),t.Ho}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new it,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new XI(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new T(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zl(t,e){if(Ue("AsyncQueue",`${e}: ${t}`),Wo(t))return new T(E.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.comparator=e?(n,r)=>e(n,r)||x.comparator(n.key,r.key):(n,r)=>x.comparator(n.key,r.key),this.keyedMap=cw(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new $a(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.Jo=new Fe(x.comparator)}track(e){const n=e.doc.key,r=this.Jo.get(n);r?e.type!==0&&r.type===3?this.Jo=this.Jo.insert(n,e):e.type===3&&r.type!==1?this.Jo=this.Jo.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Jo=this.Jo.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Jo=this.Jo.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Jo=this.Jo.remove(n):e.type===1&&r.type===2?this.Jo=this.Jo.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Jo=this.Jo.insert(n,{type:2,doc:e.doc}):F():this.Jo=this.Jo.insert(n,e)}Yo(){const e=[];return this.Jo.inorderTraversal((n,r)=>{e.push(r)}),e}}class pl{constructor(e,n,r,i,s,o,a,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new pl(e,n,$a.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY{constructor(){this.Xo=void 0,this.listeners=[]}}class JY{constructor(){this.queries=new Bl(e=>nM(e),Hh),this.onlineState="Unknown",this.Zo=new Set}}async function JI(t,e){const n=N(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new XY),i)try{s.Xo=await n.onListen(r)}catch(o){const a=zl(o,`Initialization of query '${lw(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.tc(n.onlineState),s.Xo&&e.ec(s.Xo)&&eT(n)}async function ZI(t,e){const n=N(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function ZY(t,e){const n=N(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.ec(i)&&(r=!0);o.Xo=i}}r&&eT(n)}function eX(t,e,n){const r=N(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function eT(t){t.Zo.forEach(e=>{e.next()})}class tT{constructor(e,n,r){this.query=e,this.nc=n,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.sc?this.rc(e)&&(this.nc.next(e),n=!0):this.oc(e,this.onlineState)&&(this.cc(e),n=!0),this.ic=e,n}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let n=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),n=!0),n}oc(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.uc||!r)&&(!e.docs.isEmpty()||n==="Offline")}rc(e){if(e.docChanges.length>0)return!0;const n=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}cc(e){e=pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(e,n){this.payload=e,this.byteLength=n}ac(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.O=e}Gs(e){return Nr(this.O,e)}js(e){return e.metadata.exists?wM(this.O,e.document,!1):Ce.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return ot(e)}}class nX{constructor(e,n,r){this.hc=e,this.localStore=n,this.O=r,this.queries=[],this.documents=[],this.progress=JM(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}fc(e){const n=new Map,r=new Hk(this.O);for(const i of e)if(i.metadata.queries){const s=r.Gs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||oe()).add(s);n.set(o,a)}}return n}async complete(){const e=await TY(this.localStore,new Hk(this.O),this.documents,this.hc.id),n=this.fc(this.documents);for(const r of this.queries)await SY(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",new mY(Object.assign({},this.progress),e)}}function JM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.key=e}}class eL{constructor(e){this.key=e}}class tL{constructor(e,n){this.query=e,this.dc=n,this._c=null,this.current=!1,this.wc=oe(),this.mutatedKeys=oe(),this.mc=rM(e),this.gc=new $a(this.mc)}get yc(){return this.dc}Ic(e,n){const r=n?n.Ec:new Kk,i=n?n.gc:this.gc;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=lf(this.query)&&i.size===this.query.limit?i.last():null,u=Sp(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=AI(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let p=!1;d&&f?d.data.isEqual(f.data)?m!==_&&(r.track({type:3,doc:f}),p=!0):this.Tc(d,f)||(r.track({type:2,doc:f}),p=!0,(l&&this.mc(f,l)>0||u&&this.mc(f,u)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),p=!0):d&&!f&&(r.track({type:1,doc:d}),p=!0,(l||u)&&(a=!0)),p&&(f?(o=o.add(f),s=_?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),lf(this.query)||Sp(this.query))for(;o.size>this.query.limit;){const c=lf(this.query)?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{gc:o,Ec:r,ks:a,mutatedKeys:s}}Tc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const s=e.Ec.Yo();s.sort((u,c)=>function(h,d){const f=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return f(h)-f(d)}(u.type,c.type)||this.mc(u.doc,c.doc)),this.Ac(r);const o=n?this.Rc():[],a=this.wc.size===0&&this.current?1:0,l=a!==this._c;return this._c=a,s.length!==0||l?{snapshot:new pl(this.query,e.gc,i,s,e.mutatedKeys,a===0,l,!1),Pc:o}:{Pc:o}}tc(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new Kk,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(n=>this.dc=this.dc.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.dc=this.dc.delete(n)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=oe(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const n=[];return e.forEach(r=>{this.wc.has(r)||n.push(new eL(r))}),this.wc.forEach(r=>{e.has(r)||n.push(new ZM(r))}),n}vc(e){this.dc=e.Ks,this.wc=oe();const n=this.Ic(e.documents);return this.applyChanges(n,!0)}Vc(){return pl.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,this._c===0)}}class rX{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class iX{constructor(e){this.key=e,this.Sc=!1}}class sX{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new Bl(a=>nM(a),Hh),this.Nc=new Map,this.xc=new Set,this.kc=new Fe(x.comparator),this.Oc=new Map,this.Mc=new WI,this.$c={},this.Fc=new Map,this.Bc=To.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return this.Lc===!0}}async function oX(t,e){const n=oT(t);let r,i;const s=n.Cc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Vc();else{const o=await dl(n.localStore,Jn(e));n.isPrimaryClient&&xm(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await nT(n,e,r,a==="current")}return i}async function nT(t,e,n,r){t.Uc=(c,h,d)=>async function(f,m,_,p){let g=m.view.Ic(_);g.ks&&(g=await kp(f.localStore,m.query,!1).then(({documents:w})=>m.view.Ic(w,g)));const y=p&&p.targetChanges.get(m.targetId),v=m.view.applyChanges(g,f.isPrimaryClient,y);return gw(f,m.targetId,v.Pc),v.snapshot}(t,c,h,d);const i=await kp(t.localStore,e,!0),s=new tL(e,i.Ks),o=s.Ic(i.documents),a=Jh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),l=s.applyChanges(o,t.isPrimaryClient,a);gw(t,n,l.Pc);const u=new rX(e,n,s);return t.Cc.set(e,u),t.Nc.has(n)?t.Nc.get(n).push(e):t.Nc.set(n,[e]),l.snapshot}async function aX(t,e){const n=N(t),r=n.Cc.get(e),i=n.Nc.get(r.targetId);if(i.length>1)return n.Nc.set(r.targetId,i.filter(s=>!Hh(s,e))),void n.Cc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await fl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Gc(n.remoteStore,r.targetId),gl(n,r.targetId)}).catch(zo)):(gl(n,r.targetId),await fl(n.localStore,r.targetId,!0))}async function lX(t,e,n){const r=aT(t);try{const i=await function(s,o){const a=N(s),l=st.now(),u=o.reduce((h,d)=>h.add(d.key),oe());let c;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>a.Us.Es(h,u).next(d=>{c=d;const f=[];for(const m of o){const _=k8(m,c.get(m.key));_!=null&&f.push(new qo(m.key,_,XD(_.value.mapValue),Ve.exists(!0)))}return a.gs.addMutationBatch(h,l,f,o)})).then(h=>(h.applyToLocalDocumentSet(c),{batchId:h.batchId,changes:c}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let l=s.$c[s.currentUser.toKey()];l||(l=new Fe(Z)),l=l.insert(o,a),s.$c[s.currentUser.toKey()]=l}(r,i.batchId,n),await vi(r,i.changes),await ql(r.remoteStore)}catch(i){const s=zl(i,"Failed to persist write");n.reject(s)}}async function nL(t,e){const n=N(t);try{const r=await wY(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Oc.get(s);o&&(q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Sc=!0:i.modifiedDocuments.size>0?q(o.Sc):i.removedDocuments.size>0&&(q(o.Sc),o.Sc=!1))}),await vi(n,r,e)}catch(r){await zo(r)}}function Gk(t,e,n){const r=N(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Cc.forEach((s,o)=>{const a=o.view.tc(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=N(s);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.tc(o)&&(l=!0)}),l&&eT(a)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uX(t,e,n){const r=N(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Oc.get(e),s=i&&i.key;if(s){let o=new Fe(x.comparator);o=o.insert(s,Ce.newNoDocument(s,j.min()));const a=oe().add(s),l=new Xh(j.min(),new Map,new Te(Z),o,a);await nL(r,l),r.kc=r.kc.remove(s),r.Oc.delete(e),sT(r)}else await fl(r.localStore,e,!1).then(()=>gl(r,e,n)).catch(zo)}async function cX(t,e){const n=N(t),r=e.batch.batchId;try{const i=await vY(n.localStore,e);iT(n,r,null),rT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vi(n,i)}catch(i){await zo(i)}}async function hX(t,e,n){const r=N(t);try{const i=await function(s,o){const a=N(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.gs.lookupMutationBatch(l,o).next(c=>(q(c!==null),u=c.keys(),a.gs.removeMutationBatch(l,c))).next(()=>a.gs.performConsistencyCheck(l)).next(()=>a.Us.Es(l,u))})}(r.localStore,e);iT(r,e,n),rT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vi(r,i)}catch(i){await zo(i)}}async function dX(t,e){const n=N(t);Es(n.remoteStore)||b("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const o=N(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.gs.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Fc.get(r)||[];i.push(e),n.Fc.set(r,i)}catch(r){const i=zl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function rT(t,e){(t.Fc.get(e)||[]).forEach(n=>{n.resolve()}),t.Fc.delete(e)}function iT(t,e,n){const r=N(t);let i=r.$c[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function gl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Nc.get(e))t.Cc.delete(r),n&&t.Dc.qc(r,n);t.Nc.delete(e),t.isPrimaryClient&&t.Mc.si(e).forEach(r=>{t.Mc.containsKey(r)||rL(t,r)})}function rL(t,e){t.xc.delete(e.path.canonicalString());const n=t.kc.get(e);n!==null&&(Gc(t.remoteStore,n),t.kc=t.kc.remove(e),t.Oc.delete(n),sT(t))}function gw(t,e,n){for(const r of n)r instanceof ZM?(t.Mc.addReference(r.key,e),fX(t,r)):r instanceof eL?(b("SyncEngine","Document no longer in limbo: "+r.key),t.Mc.removeReference(r.key,e),t.Mc.containsKey(r.key)||rL(t,r.key)):F()}function fX(t,e){const n=e.key,r=n.path.canonicalString();t.kc.get(n)||t.xc.has(r)||(b("SyncEngine","New document in limbo: "+n),t.xc.add(r),sT(t))}function sT(t){for(;t.xc.size>0&&t.kc.size<t.maxConcurrentLimboResolutions;){const e=t.xc.values().next().value;t.xc.delete(e);const n=new x(re.fromString(e)),r=t.Bc.next();t.Oc.set(r,new iX(n)),t.kc=t.kc.insert(n,r),xm(t.remoteStore,new Hi(Jn(Vl(n.path)),r,2,Cn.A))}}async function vi(t,e,n){const r=N(t),i=[],s=[],o=[];r.Cc.isEmpty()||(r.Cc.forEach((a,l)=>{o.push(r.Uc(l,e,n).then(u=>{if(u){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u.fromCache?"not-current":"current"),i.push(u);const c=qI.Ss(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.Dc.To(i),await async function(a,l){const u=N(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>I.forEach(l,h=>I.forEach(h.vs,d=>u.persistence.referenceDelegate.addReference(c,h.targetId,d)).next(()=>I.forEach(h.Vs,d=>u.persistence.referenceDelegate.removeReference(c,h.targetId,d)))))}catch(c){if(!Wo(c))throw c;b("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const d=u.Ms.get(h),f=d.snapshotVersion,m=d.withLastLimboFreeSnapshotVersion(f);u.Ms=u.Ms.insert(h,m)}}}(r.localStore,s))}async function pX(t,e){const n=N(t);if(!n.currentUser.isEqual(e)){b("SyncEngine","User change. New user:",e.toKey());const r=await UM(n.localStore,e);n.currentUser=e,function(i,s){i.Fc.forEach(o=>{o.forEach(a=>{a.reject(new T(E.CANCELLED,s))})}),i.Fc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vi(n,r.qs)}}function gX(t,e){const n=N(t),r=n.Oc.get(e);if(r&&r.Sc)return oe().add(r.key);{let i=oe();const s=n.Nc.get(e);if(!s)return i;for(const o of s){const a=n.Cc.get(o);i=i.unionWith(a.view.yc)}return i}}async function mX(t,e){const n=N(t),r=await kp(n.localStore,e.query,!0),i=e.view.vc(r);return n.isPrimaryClient&&gw(n,e.targetId,i.Pc),i}async function yX(t){const e=N(t);return qM(e.localStore).then(n=>vi(e,n))}async function _X(t,e,n,r){const i=N(t),s=await function(o,a){const l=N(o),u=N(l.gs);return l.persistence.runTransaction("Lookup mutation documents","readonly",c=>u.Ge(c,a).next(h=>h?l.Us.Es(c,h):I.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ql(i.remoteStore):n==="acknowledged"||n==="rejected"?(iT(i,e,r||null),rT(i,e),function(o,a){N(N(o).gs).Qe(a)}(i.localStore,e)):F(),await vi(i,s)):b("SyncEngine","Cannot apply mutation batch with id: "+e)}async function vX(t,e){const n=N(t);if(oT(n),aT(n),e===!0&&n.Lc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Qk(n,r.toArray());n.Lc=!0,await pw(n.remoteStore,!0);for(const s of i)xm(n.remoteStore,s)}else if(e===!1&&n.Lc!==!1){const r=[];let i=Promise.resolve();n.Nc.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(gl(n,o),fl(n.localStore,o,!0))),Gc(n.remoteStore,o)}),await i,await Qk(n,r),function(s){const o=N(s);o.Oc.forEach((a,l)=>{Gc(o.remoteStore,l)}),o.Mc.ii(),o.Oc=new Map,o.kc=new Fe(x.comparator)}(n),n.Lc=!1,await pw(n.remoteStore,!1)}}async function Qk(t,e,n){const r=N(t),i=[],s=[];for(const o of e){let a;const l=r.Nc.get(o);if(l&&l.length!==0){a=await dl(r.localStore,Jn(l[0]));for(const u of l){const c=r.Cc.get(u),h=await mX(r,c);h.snapshot&&s.push(h.snapshot)}}else{const u=await jM(r.localStore,o);a=await dl(r.localStore,u),await nT(r,iL(u),o,!1)}i.push(a)}return r.Dc.To(s),i}function iL(t){return eM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function wX(t){const e=N(t);return N(N(e.localStore).persistence).ds()}async function EX(t,e,n,r){const i=N(t);if(i.Lc)b("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(n){case"current":case"not-current":{const s=await qM(i.localStore),o=Xh.createSynthesizedRemoteEventForCurrentChange(e,n==="current");await vi(i,s,o);break}case"rejected":await fl(i.localStore,e,!0),gl(i,e,r);break;default:F()}}async function IX(t,e,n){const r=oT(t);if(r.Lc){for(const i of e){if(r.Nc.has(i)){b("SyncEngine","Adding an already active target "+i);continue}const s=await jM(r.localStore,i),o=await dl(r.localStore,s);await nT(r,iL(s),o.targetId,!1),xm(r.remoteStore,o)}for(const i of n)r.Nc.has(i)&&await fl(r.localStore,i,!1).then(()=>{Gc(r.remoteStore,i),gl(r,i)}).catch(zo)}}function oT(t){const e=N(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uX.bind(null,e),e.Dc.To=ZY.bind(null,e.eventManager),e.Dc.qc=eX.bind(null,e.eventManager),e}function aT(t){const e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hX.bind(null,e),e}function TX(t,e,n){const r=N(t);(async function(i,s,o){try{const a=await s.getMetadata();if(await function(h,d){const f=N(h),m=ot(d.createTime);return f.persistence.runTransaction("hasNewerBundle","readonly",_=>f.Kn.getBundleMetadata(_,d.id)).then(_=>!!_&&_.createTime.compareTo(m)>=0)}(i.localStore,a))return await s.close(),void o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a));o._updateProgress(JM(a));const l=new nX(a,i.localStore,s.O);let u=await s.Kc();for(;u;){const h=await l.lc(u);h&&o._updateProgress(h),u=await s.Kc()}const c=await l.complete();await vi(i,c.ws,void 0),await function(h,d){const f=N(h);return f.persistence.runTransaction("Save bundle","readwrite",m=>f.Kn.saveBundleMetadata(m,d))}(i.localStore,a),o._completeWith(c.progress)}catch(a){Uc("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a)}})(r,e,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}class sL{constructor(){this.synchronizeTabs=!1}async initialize(e){this.O=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.Gc(e),this.persistence=this.jc(e),await this.persistence.start(),this.gcScheduler=this.Qc(e),this.localStore=this.Wc(e)}Qc(e){return null}Wc(e){return $M(this.persistence,new FM,e.initialUser,this.O)}jc(e){return new PY(zI.bi,this.O)}Gc(e){return new WM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class oL extends sL{constructor(e,n,r){super(),this.zc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await IY(this.localStore),await this.zc.initialize(this,e),await aT(this.zc.syncEngine),await ql(this.zc.remoteStore),await this.persistence.Hn(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}Wc(e){return $M(this.persistence,new FM,e.initialUser,this.O)}Qc(e){const n=this.persistence.referenceDelegate.garbageCollector;return new cY(n,e.asyncQueue)}jc(e){const n=jI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new BI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,zM(),hf(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new WM}}class SX extends oL{constructor(e,n){super(e,n,!1),this.zc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.zc.syncEngine;this.sharedClientState instanceof n_&&(this.sharedClientState.syncEngine={hr:_X.bind(null,n),lr:EX.bind(null,n),dr:IX.bind(null,n),ds:wX.bind(null,n),ar:yX.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Hn(async r=>{await vX(this.zc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):r||this.gcScheduler.stop())})}Gc(e){const n=zM();if(!n_.Vt(n))throw new T(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new n_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class lT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pX.bind(null,this.syncEngine),await pw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new JY}createDatastore(e){const n=Zh(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new LY(i));var i;return function(s,o,a,l){return new UY(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>Gk(this.syncEngine,a,0),o=Wk.Vt()?new Wk:new xY,new BY(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,l,u){const c=new sX(r,i,s,o,a,l);return u&&(c.Lc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=N(e);b("RemoteStore","RemoteStore shutting down."),n.Ko.add(5),await jl(n),n.jo.shutdown(),n.Qo.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bX{constructor(e,n){this.Yc=e,this.O=n,this.metadata=new it,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}async getMetadata(){return this.metadata.promise}async Kc(){return await this.getMetadata(),this.Zc()}async Zc(){const e=await this.tu();if(e===null)return null;const n=this.Xc.decode(e),r=Number(n);isNaN(r)&&this.eu(`length string (${n}) is not valid number`);const i=await this.nu(r);return new tX(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async tu(){for(;this.su()<0&&!await this.iu(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.eu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async nu(e){for(;this.buffer.length<e;)await this.iu()&&this.eu("Reached the end of bundle when more is expected.");const n=this.Xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}async iu(){const e=await this.Yc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new T(E.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const s=N(r),o=Kc(s.O)+"/documents",a={documents:i.map(h=>zc(s.O,h))},l=await s.Lr("BatchGetDocuments",o,a),u=new Map;l.forEach(h=>{const d=U8(s.O,h);u.set(d.key.toString(),d)});const c=[];return i.forEach(h=>{const d=u.get(h.toString());q(!!d),c.push(d)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=x.fromPath(r);this.mutations.push(new RI(i,this.precondition(i)))}),await async function(n,r){const i=N(n),s=Kc(i.O)+"/documents",o={writes:r.map(a=>Hc(i.O,a))};await i.Mr("Commit",s,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw F();n=j.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new T(E.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?Ve.updateTime(n):Ve.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(j.min()))throw new T(E.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ve.updateTime(n)}return Ve.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kX{constructor(e,n,r,i){this.asyncQueue=e,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new HI(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){this.ro.Hr(async()=>{const e=new CX(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.uu(i)}))}).catch(r=>{this.uu(r)})})}cu(e){try{const n=this.updateFunction(e);return!jo(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||!dM(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AX{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tt.UNAUTHENTICATED,this.clientId=KD.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{b("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(b("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new it;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function aL(t,e){t.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await UM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function lL(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uT(t);b("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>zk(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>zk(e.remoteStore,s)),t.onlineComponents=e}async function uT(t){return t.offlineComponents||(b("FirestoreClient","Using default OfflineComponentProvider"),await aL(t,new sL)),t.offlineComponents}async function Mm(t){return t.onlineComponents||(b("FirestoreClient","Using default OnlineComponentProvider"),await lL(t,new lT)),t.onlineComponents}function uL(t){return uT(t).then(e=>e.persistence)}function cT(t){return uT(t).then(e=>e.localStore)}function cL(t){return Mm(t).then(e=>e.remoteStore)}function hT(t){return Mm(t).then(e=>e.syncEngine)}async function ml(t){const e=await Mm(t),n=e.eventManager;return n.onListen=oX.bind(null,e.syncEngine),n.onUnlisten=aX.bind(null,e.syncEngine),n}function RX(t){return t.asyncQueue.enqueue(async()=>{const e=await uL(t),n=await cL(t);return e.setNetworkEnabled(!0),function(r){const i=N(r);return i.Ko.delete(0),ed(i)}(n)})}function NX(t){return t.asyncQueue.enqueue(async()=>{const e=await uL(t),n=await cL(t);return e.setNetworkEnabled(!1),async function(r){const i=N(r);i.Ko.add(0),await jl(i),i.Qo.set("Offline")}(n)})}function PX(t,e){const n=new it;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await function(a,l){const u=N(a);return u.persistence.runTransaction("read document","readonly",c=>u.Us.ys(c,l))}(r,i);o.isFoundDocument()?s.resolve(o):o.isNoDocument()?s.resolve(null):s.reject(new T(E.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=zl(o,`Failed to get document '${i} from cache`);s.reject(a)}}(await cT(t),e,n)),n.promise}function hL(t,e,n={}){const r=new it;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new Dm({next:h=>{s.enqueueAndForget(()=>ZI(i,c));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new T(E.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new T(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new tT(Vl(o.path),u,{includeMetadataChanges:!0,uc:!0});return JI(i,c)}(await ml(t),t.asyncQueue,e,n,r)),r.promise}function OX(t,e){const n=new it;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,s){try{const o=await kp(r,i,!0),a=new tL(i,o.Ks),l=a.Ic(o.documents),u=a.applyChanges(l,!1);s.resolve(u.snapshot)}catch(o){const a=zl(o,`Failed to execute query '${i} against cache`);s.reject(a)}}(await cT(t),e,n)),n.promise}function dL(t,e,n={}){const r=new it;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,l){const u=new Dm({next:h=>{s.enqueueAndForget(()=>ZI(i,c)),h.fromCache&&a.source==="server"?l.reject(new T(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new tT(o,u,{includeMetadataChanges:!0,uc:!0});return JI(i,c)}(await ml(t),t.asyncQueue,e,n,r)),r.promise}function xX(t,e){const n=new Dm(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){N(r).Zo.add(i),i.next()}(await ml(t),n)),()=>{n.Jc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){N(r).Zo.delete(i)}(await ml(t),n))}}function DX(t,e){const n=new it;return t.asyncQueue.enqueueAndForget(async()=>{const r=await function(i){return Mm(i).then(s=>s.datastore)}(t);new kX(t.asyncQueue,r,e,n).run()}),n.promise}function MX(t,e,n,r){const i=function(s,o){let a;return a=typeof s=="string"?new TextEncoder().encode(s):s,function(l,u){return new bX(l,u)}(function(l,u){if(l instanceof Uint8Array)return Yk(l,u);if(l instanceof ArrayBuffer)return Yk(new Uint8Array(l),u);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,Zh(e));t.asyncQueue.enqueueAndForget(async()=>{TX(await hT(t),i,r)})}function LX(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=N(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Kn.getNamedQuery(s,r))}(await cT(t),e))}const Xk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e,n){if(!n)throw new T(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fL(t,e,n,r){if(e===!0&&r===!0)throw new T(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jk(t){if(!x.isDocumentKey(t))throw new T(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zk(t){if(x.isDocumentKey(t))throw new T(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":F()}function ne(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lm(t);throw new T(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pL(t,e){if(e<=0)throw new T(E.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new T(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new T(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e1({}),this._settingsFrozen=!1,e instanceof yo?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new T(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(i.options.projectId)}(e))}get app(){if(!this._app)throw new T(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new T(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e1(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new XQ;switch(n.type){case"gapi":const r=n.client;return q(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new t8(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new T(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Xk.get(e);n&&(b("ComponentProvider","Removing Datastore"),Xk.delete(e),n.terminate())}(this),Promise.resolve()}}function FX(t,e,n,r={}){var i;const s=(t=ne(t,td))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Uc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=Tt.MOCK_USER;else{o=FE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new T(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Tt(l)}t._authCredentials=new JQ(new zD(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _e(this.firestore,e,this._key)}}class zt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zt(this.firestore,e,this._query)}}class Pr extends zt{constructor(e,n,r){super(e,n,Vl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _e(this.firestore,null,new x(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function gL(t,e,...n){if(t=S(t),dT("collection","path",e),t instanceof td){const r=re.fromString(e,...n);return Zk(r),new Pr(t,null,r)}{if(!(t instanceof _e||t instanceof Pr))throw new T(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(re.fromString(e,...n));return Zk(r),new Pr(t.firestore,null,r)}}function $X(t,e){if(t=ne(t,td),dT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new T(E.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zt(t,null,function(n){return new _i(re.emptyPath(),n)}(e))}function Pp(t,e,...n){if(t=S(t),arguments.length===1&&(e=KD.R()),dT("doc","path",e),t instanceof td){const r=re.fromString(e,...n);return Jk(r),new _e(t,null,new x(r))}{if(!(t instanceof _e||t instanceof Pr))throw new T(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(re.fromString(e,...n));return Jk(r),new _e(t.firestore,t instanceof Pr?t.converter:null,new x(r))}}function mL(t,e){return t=S(t),e=S(e),(t instanceof _e||t instanceof Pr)&&(e instanceof _e||e instanceof Pr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function yL(t,e){return t=S(t),e=S(e),t instanceof zt&&e instanceof zt&&t.firestore===e.firestore&&Hh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UX{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new HI(this,"async_queue_retry"),this.yu=()=>{const n=hf();n&&b("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ro.Yr()};const e=hf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const n=hf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const n=new it;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}async Eu(){if(this.lu.length!==0){try{await this.lu[0](),this.lu.shift(),this.ro.reset()}catch(e){if(!Wo(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.lu.length>0&&this.ro.Hr(()=>this.Eu())}}Iu(e){const n=this.hu.then(()=>(this.wu=!0,e().catch(r=>{this._u=r,this.wu=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw Ue("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.wu=!1,r))));return this.hu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.gu.indexOf(e)>-1&&(n=0);const i=XI.createAndSchedule(this,e,n,r,s=>this.Tu(s));return this.du.push(i),i}pu(){this._u&&F()}verifyOperationInProgress(){}async Au(){let e;do e=this.hu,await e;while(e!==this.hu)}Ru(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}function mw(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class VX{constructor(){this._progressObserver={},this._taskCompletionResolver=new it,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BX=-1;class Pe extends td{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new UX,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||_L(this),this._firestoreClient.terminate()}}function yt(t){return t._firestoreClient||_L(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function _L(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new l8(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new AX(t._authCredentials,t._appCheckCredentials,t._queue,r)}function jX(t,e){wL(t=ne(t,Pe));const n=yt(t),r=t._freezeSettings(),i=new lT;return vL(n,i,new oL(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function qX(t){wL(t=ne(t,Pe));const e=yt(t),n=t._freezeSettings(),r=new lT;return vL(e,r,new SX(r,n.cacheSizeBytes))}function vL(t,e,n){const r=new it;return t.asyncQueue.enqueue(async()=>{try{await aL(t,n),await lL(t,e),r.resolve()}catch(i){if(!function(s){return s.name==="FirebaseError"?s.code===E.FAILED_PRECONDITION||s.code===E.UNIMPLEMENTED:typeof DOMException!="undefined"&&s instanceof DOMException?s.code===22||s.code===20||s.code===11:!0}(i))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}}).then(()=>r.promise)}function WX(t){if(t._initialized&&!t._terminated)throw new T(E.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new it;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!lr.Vt())return Promise.resolve();const r=n+"main";await lr.delete(r)}(jI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function zX(t){return function(e){const n=new it;return e.asyncQueue.enqueueAndForget(async()=>dX(await hT(e),n)),n.promise}(yt(t=ne(t,Pe)))}function KX(t){return RX(yt(t=ne(t,Pe)))}function HX(t){return NX(yt(t=ne(t,Pe)))}function GX(t,e){const n=yt(t=ne(t,Pe)),r=new VX;return MX(n,t._databaseId,e,r),r}function QX(t,e){return LX(yt(t=ne(t,Pe)),e).then(n=>n?new zt(t,null,n.query):null)}function wL(t){if(t._initialized||t._terminated)throw new T(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new T(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(He.fromBase64String(e))}catch(n){throw new T(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ur(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new T(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new T(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX=/^__.*__$/;class XX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qh(e,this.data,n,this.fieldTransforms)}}class EL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function IL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}class $m{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.O=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new $m(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return Op(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(e.length===0)throw this.Ou("Document fields must not be empty");if(IL(this.Vu)&&YX.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class JX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.O=r||Zh(e)}Fu(e,n,r,i=!1){return new $m({Vu:e,methodName:n,$u:r,path:nt.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Ho(t){const e=t._freezeSettings(),n=Zh(t._databaseId);return new JX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Um(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);mT("Data must be an object, but it was:",o,r);const a=bL(r,o);let l,u;if(s.merge)l=new il(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=yw(e,h,n);if(!o.contains(d))throw new T(E.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);kL(c,d)||c.push(d)}l=new il(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new XX(new Ut(a),l,u)}class nd extends Ko{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Ou(`${this._methodName}() can only appear at the top level of your update data`):e.Ou(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nd}}function TL(t,e,n){return new $m({Vu:3,$u:e.settings.$u,methodName:t._methodName,Cu:n},e.databaseId,e.O,e.ignoreUndefinedProperties)}class fT extends Ko{_toFieldTransform(e){return new Gh(e.path,new ll)}isEqual(e){return e instanceof fT}}class ZX extends Ko{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){const n=TL(this,e,!0),r=this.Bu.map(s=>Go(s,n)),i=new vo(r);return new Gh(e.path,i)}isEqual(e){return this===e}}class e9 extends Ko{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){const n=TL(this,e,!0),r=this.Bu.map(s=>Go(s,n)),i=new wo(r);return new Gh(e.path,i)}isEqual(e){return this===e}}class t9 extends Ko{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=new ul(e.O,oM(e.O,this.Lu));return new Gh(e.path,n)}isEqual(e){return this===e}}function pT(t,e,n,r){const i=t.Fu(1,e,n);mT("Data must be an object, but it was:",i,r);const s=[],o=Ut.empty();Bo(r,(l,u)=>{const c=yT(e,l,n);u=S(u);const h=i.xu(c);if(u instanceof nd)s.push(c);else{const d=Go(u,h);d!=null&&(s.push(c),o.set(c,d))}});const a=new il(s);return new EL(o,a,i.fieldTransforms)}function gT(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[yw(e,r,n)],l=[i];if(s.length%2!=0)throw new T(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(yw(e,s[d])),l.push(s[d+1]);const u=[],c=Ut.empty();for(let d=a.length-1;d>=0;--d)if(!kL(u,a[d])){const f=a[d];let m=l[d];m=S(m);const _=o.xu(f);if(m instanceof nd)u.push(f);else{const p=Go(m,_);p!=null&&(u.push(f),c.set(f,p))}}const h=new il(u);return new EL(c,h,o.fieldTransforms)}function SL(t,e,n,r=!1){return Go(n,t.Fu(r?4:3,e))}function Go(t,e){if(CL(t=S(t)))return mT("Unsupported field value:",e,t),bL(t,e);if(t instanceof Ko)return function(n,r){if(!IL(r.Vu))throw r.Ou(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Cu&&e.Vu!==4)throw e.Ou("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Go(o,r.ku(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=S(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return oM(r.O,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=st.fromDate(n);return{timestampValue:Wc(r.O,i)}}if(n instanceof st){const i=new st(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Wc(r.O,i)}}if(n instanceof Fm)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ur)return{bytesValue:mM(r.O,n._byteString)};if(n instanceof _e){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.Ou(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:NI(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Ou(`Unsupported field value: ${Lm(n)}`)}(t,e)}function bL(t,e){const n={};return GD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(t,(r,i)=>{const s=Go(i,e.Du(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function CL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Fm||t instanceof Ur||t instanceof _e||t instanceof Ko)}function mT(t,e,n){if(!CL(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Lm(n);throw r==="an object"?e.Ou(t+" a custom object"):e.Ou(t+" "+r)}}function yw(t,e,n){if((e=S(e))instanceof cs)return e._internalPath;if(typeof e=="string")return yT(t,e);throw Op("Field path arguments must be of type string or ",t,!1,void 0,n)}const n9=new RegExp("[~\\*/\\[\\]]");function yT(t,e,n){if(e.search(n9)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cs(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Op(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new T(E.INVALID_ARGUMENT,a+t+l)}function kL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r9 extends Qc{data(){return super.data()}}function Vm(t,e){return typeof e=="string"?yT(t,e):e instanceof cs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pi extends Qc{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yu extends pi{data(e={}){return super.data(e)}}class hs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ws(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yu(this._firestore,this._userDataWriter,r.key,r,new Ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new T(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new Yu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ws(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new Yu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ws(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:i9(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function i9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}function AL(t,e){return t instanceof pi&&e instanceof pi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hs&&e instanceof hs&&t._firestore===e._firestore&&yL(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){if(Sp(t)&&t.explicitOrderBy.length===0)throw new T(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rd{}function Ti(t,...e){for(const n of e)t=n._apply(t);return t}class s9 extends rd{constructor(e,n,r){super(),this.Uu=e,this.qu=n,this.Ku=r,this.type="where"}_apply(e){const n=Ho(e.firestore),r=function(i,s,o,a,l,u,c){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new T(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){n1(c,u);const f=[];for(const m of c)f.push(t1(a,i,m));h={arrayValue:{values:f}}}else h=t1(a,i,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||n1(c,u),h=SL(o,s,c,u==="in"||u==="not-in");const d=tn.create(l,u,h);return function(f,m){if(m.S()){const p=CI(f);if(p!==null&&!p.isEqual(m.field))throw new T(E.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${p.toString()}' and '${m.field.toString()}'`);const g=bI(f);g!==null&&DL(f,m.field,g)}const _=function(p,g){for(const y of p.filters)if(g.indexOf(y.op)>=0)return y.op;return null}(f,function(p){switch(p){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(m.op));if(_!==null)throw _===m.op?new T(E.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${m.op.toString()}' filter.`):new T(E.INVALID_ARGUMENT,`Invalid query. You cannot use '${m.op.toString()}' filters with '${_.toString()}' filters.`)}(i,d),d}(e._query,"where",n,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new zt(e.firestore,e.converter,function(i,s){const o=i.filters.concat([s]);return new _i(i.path,i.collectionGroup,i.explicitOrderBy.slice(),o,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function o9(t,e,n){const r=e,i=Vm("where",t);return new s9(i,r,n)}class a9 extends rd{constructor(e,n){super(),this.Uu=e,this.Gu=n,this.type="orderBy"}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new T(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new T(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Fa(i,s);return function(a,l){if(bI(a)===null){const u=CI(a);u!==null&&DL(a,u,l.field)}}(r,o),o}(e._query,this.Uu,this.Gu);return new zt(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new _i(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function l9(t,e="asc"){const n=e,r=Vm("orderBy",t);return new a9(r,n)}class NL extends rd{constructor(e,n,r){super(),this.type=e,this.ju=n,this.Qu=r}_apply(e){return new zt(e.firestore,e.converter,tM(e._query,this.ju,this.Qu))}}function u9(t){return pL("limit",t),new NL("limit",t,"F")}function c9(t){return pL("limitToLast",t),new NL("limitToLast",t,"L")}class PL extends rd{constructor(e,n,r){super(),this.type=e,this.Wu=n,this.zu=r}_apply(e){const n=xL(e,this.type,this.Wu,this.zu);return new zt(e.firestore,e.converter,function(r,i){return new _i(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function h9(...t){return new PL("startAt",t,!0)}function d9(...t){return new PL("startAfter",t,!1)}class OL extends rd{constructor(e,n,r){super(),this.type=e,this.Wu=n,this.zu=r}_apply(e){const n=xL(e,this.type,this.Wu,this.zu);return new zt(e.firestore,e.converter,function(r,i){return new _i(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function f9(...t){return new OL("endBefore",t,!1)}function p9(...t){return new OL("endAt",t,!0)}function xL(t,e,n,r){if(n[0]=S(n[0]),n[0]instanceof Qc)return function(i,s,o,a,l){if(!a)throw new T(E.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of al(i))if(c.field.isKeyField())u.push(Ep(s,a.key));else{const h=a.data.field(c.field);if(SI(h))throw new T(E.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const d=c.field.canonicalString();throw new T(E.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${d}' (used as the orderBy) does not exist.`)}u.push(h)}return new ol(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ho(t.firestore);return function(s,o,a,l,u,c){const h=s.explicitOrderBy;if(u.length>h.length)throw new T(E.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const d=[];for(let f=0;f<u.length;f++){const m=u[f];if(h[f].field.isKeyField()){if(typeof m!="string")throw new T(E.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof m}`);if(!kI(s)&&m.indexOf("/")!==-1)throw new T(E.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${m}' contains a slash.`);const _=s.path.child(re.fromString(m));if(!x.isDocumentKey(_))throw new T(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const p=new x(_);d.push(Ep(o,p))}else{const _=SL(a,l,m);d.push(_)}}return new ol(d,c)}(t._query,t.firestore._databaseId,i,e,n,r)}}function t1(t,e,n){if(typeof(n=S(n))=="string"){if(n==="")throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kI(e)&&n.indexOf("/")!==-1)throw new T(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(re.fromString(n));if(!x.isDocumentKey(r))throw new T(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ep(t,new x(r))}if(n instanceof _e)return Ep(t,n._key);throw new T(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lm(n)}.`)}function n1(t,e){if(!Array.isArray(t)||t.length===0)throw new T(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new T(E.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function DL(t,e,n){if(!n.isEqual(e))throw new T(E.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{convertValue(e,n="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw F()}}convertObject(e,n){const r={};return Bo(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Fm(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=QD(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const n=ls(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=re.fromString(e);q(bM(r));const i=new yo(r.get(1),r.get(3)),s=new x(r.popFirst(5));return i.isEqual(n)||Ue(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class g9 extends _T{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _e(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ho(e)}set(e,n,r){this._verifyNotCommitted();const i=Ai(e,this._firestore),s=Bm(i.converter,n,r),o=Um(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ve.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ai(e,this._firestore);let o;return o=typeof(n=S(n))=="string"||n instanceof cs?gT(this._dataReader,"WriteBatch.update",s._key,n,r,i):pT(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ve.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ai(e,this._firestore);return this._mutations=this._mutations.concat(new Yh(n._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new T(E.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ai(t,e){if((t=S(t)).firestore!==e)throw new T(E.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(t){t=ne(t,_e);const e=ne(t.firestore,Pe);return hL(yt(e),t._key).then(n=>vT(e,t,n))}class Qo extends _T{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _e(this.firestore,null,n)}}function _9(t){t=ne(t,_e);const e=ne(t.firestore,Pe),n=yt(e),r=new Qo(e);return PX(n,t._key).then(i=>new pi(e,r,t._key,i,new Ws(i!==null&&i.hasLocalMutations,!0),t.converter))}function v9(t){t=ne(t,_e);const e=ne(t.firestore,Pe);return hL(yt(e),t._key,{source:"server"}).then(n=>vT(e,t,n))}function w9(t){t=ne(t,zt);const e=ne(t.firestore,Pe),n=yt(e),r=new Qo(e);return RL(t._query),dL(n,t._query).then(i=>new hs(e,r,t,i))}function E9(t){t=ne(t,zt);const e=ne(t.firestore,Pe),n=yt(e),r=new Qo(e);return OX(n,t._query).then(i=>new hs(e,r,t,i))}function I9(t){t=ne(t,zt);const e=ne(t.firestore,Pe),n=yt(e),r=new Qo(e);return dL(n,t._query,{source:"server"}).then(i=>new hs(e,r,t,i))}function r1(t,e,n){t=ne(t,_e);const r=ne(t.firestore,Pe),i=Bm(t.converter,e,n);return id(r,[Um(Ho(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ve.none())])}function i1(t,e,n,...r){t=ne(t,_e);const i=ne(t.firestore,Pe),s=Ho(i);let o;return o=typeof(e=S(e))=="string"||e instanceof cs?gT(s,"updateDoc",t._key,e,n,r):pT(s,"updateDoc",t._key,e),id(i,[o.toMutation(t._key,Ve.exists(!0))])}function T9(t){return id(ne(t.firestore,Pe),[new Yh(t._key,Ve.none())])}function S9(t,e){const n=ne(t.firestore,Pe),r=Pp(t),i=Bm(t.converter,e);return id(n,[Um(Ho(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ve.exists(!1))]).then(()=>r)}function ML(t,...e){var n,r,i;t=S(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||mw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(mw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof _e)u=ne(t.firestore,Pe),c=Vl(t._key.path),l={next:h=>{e[o]&&e[o](vT(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=ne(t,zt);u=ne(h.firestore,Pe),c=h._query;const d=new Qo(u);l={next:f=>{e[o]&&e[o](new hs(u,d,h,f))},error:e[o+1],complete:e[o+2]},RL(t._query)}return function(h,d,f,m){const _=new Dm(m),p=new tT(d,_,f);return h.asyncQueue.enqueueAndForget(async()=>JI(await ml(h),p)),()=>{_.Jc(),h.asyncQueue.enqueueAndForget(async()=>ZI(await ml(h),p))}}(yt(u),c,a,l)}function b9(t,e){return xX(yt(t=ne(t,Pe)),mw(e)?e:{next:e})}function id(t,e){return function(n,r){const i=new it;return n.asyncQueue.enqueueAndForget(async()=>lX(await hT(n),r,i)),i.promise}(yt(t),e)}function vT(t,e,n){const r=n.docs.get(e._key),i=new Qo(t);return new pi(t,i,e._key,r,new Ws(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Ho(e)}get(e){const n=Ai(e,this._firestore),r=new g9(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return F();const s=i[0];if(s.isFoundDocument())return new Qc(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Qc(this._firestore,r,n._key,null,n.converter);throw F()})}set(e,n,r){const i=Ai(e,this._firestore),s=Bm(i.converter,n,r),o=Um(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Ai(e,this._firestore);let o;return o=typeof(n=S(n))=="string"||n instanceof cs?gT(this._dataReader,"Transaction.update",s._key,n,r,i):pT(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Ai(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ai(e,this._firestore),r=new Qo(this._firestore);return super.get(e).then(i=>new pi(this._firestore,r,n._key,i._document,new Ws(!1,!1),n.converter))}}function k9(t,e){return DX(yt(t=ne(t,Pe)),n=>e(new C9(t,n)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(){return new nd("deleteField")}function R9(){return new fT("serverTimestamp")}function N9(...t){return new ZX("arrayUnion",t)}function P9(...t){return new e9("arrayRemove",t)}function O9(t){return new t9("increment",t)}(function(t,e=!0){(function(n){Ul=n})(Wr),Le(new se("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new Pe(i,new ZQ(n.getProvider("auth-internal")),new r8(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),ce(lk,"3.4.5",t),ce(lk,"3.4.5","esm2017")})();const x9="@firebase/firestore-compat",D9="0.1.14";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new T("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(){if(typeof Uint8Array=="undefined")throw new T("unimplemented","Uint8Arrays are not available in this environment.")}function o1(){if(!o8())throw new T("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Yc{constructor(e){this._delegate=e}static fromBase64String(e){return o1(),new Yc(Ur.fromBase64String(e))}static fromUint8Array(e){return s1(),new Yc(Ur.fromUint8Array(e))}toBase64(){return o1(),this._delegate.toBase64()}toUint8Array(){return s1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t){return M9(t,["next","error","complete"])}function M9(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{enableIndexedDbPersistence(e,n){return jX(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return qX(e._delegate)}clearIndexedDbPersistence(e){return WX(e._delegate)}}class LL{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Uc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){FX(this._delegate,e,n,r)}enableNetwork(){return KX(this._delegate)}disableNetwork(){return HX(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return zX(this._delegate)}onSnapshotsInSync(e){return b9(this._delegate,e)}get app(){if(!this._appCompat)throw new T("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yl(this,gL(this._delegate,e))}catch(n){throw Gt(n,"collection()","Firestore.collection()")}}doc(e){try{return new qn(this,Pp(this._delegate,e))}catch(n){throw Gt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ht(this,$X(this._delegate,e))}catch(n){throw Gt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return k9(this._delegate,n=>e(new FL(this,n)))}batch(){return yt(this._delegate),new $L(new m9(this._delegate,e=>id(this._delegate,e)))}loadBundle(e){return GX(this._delegate,e)}namedQuery(e){return QX(this._delegate,e).then(n=>n?new Ht(this,n):null)}}class jm extends _T{constructor(e){super();this.firestore=e}convertBytes(e){return new Yc(new Ur(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return qn.forKey(n,this.firestore,null)}}function F9(t){QQ(t)}class FL{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new jm(e)}get(e){const n=zs(e);return this._delegate.get(n).then(r=>new Xc(this._firestore,new pi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=zs(e);return r?(wT("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=zs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=zs(e);return this._delegate.delete(n),this}}class $L{constructor(e){this._delegate=e}set(e,n,r){const i=zs(e);return r?(wT("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=zs(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=zs(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class So{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Yu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jc(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=So.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new So(e,new jm(e),n),i.set(n,s)),s}}So.INSTANCES=new WeakMap;class qn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jm(e)}static forPath(e,n,r){if(e.length%2!==0)throw new T("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qn(n,new _e(n._delegate,r,new x(e)))}static forKey(e,n,r){return new qn(n,new _e(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new yl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yl(this.firestore,gL(this._delegate,e))}catch(n){throw Gt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=S(e),e instanceof _e?mL(this._delegate,e):!1}set(e,n){n=wT("DocumentReference.set",n);try{return n?r1(this._delegate,e,n):r1(this._delegate,e)}catch(r){throw Gt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?i1(this._delegate,e):i1(this._delegate,e,n,...r)}catch(i){throw Gt(i,"updateDoc()","DocumentReference.update()")}}delete(){return T9(this._delegate)}onSnapshot(...e){const n=UL(e),r=VL(e,i=>new Xc(this.firestore,new pi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ML(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=_9(this._delegate):(e==null?void 0:e.source)==="server"?n=v9(this._delegate):n=y9(this._delegate),n.then(r=>new Xc(this.firestore,new pi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qn(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Gt(t,e,n){return t.message=t.message.replace(e,n),t}function UL(t){for(const e of t)if(typeof e=="object"&&!_w(e))return e;return{}}function VL(t,e){var n,r;let i;return _w(t[0])?i=t[0]:_w(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Xc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new qn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return AL(this._delegate,e._delegate)}}class Jc extends Xc{data(e){const n=this._delegate.data(e);return YQ(n!==void 0),n}}class Ht{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new jm(e)}where(e,n,r){try{return new Ht(this.firestore,Ti(this._delegate,o9(e,n,r)))}catch(i){throw Gt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ht(this.firestore,Ti(this._delegate,l9(e,n)))}catch(r){throw Gt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ht(this.firestore,Ti(this._delegate,u9(e)))}catch(n){throw Gt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ht(this.firestore,Ti(this._delegate,c9(e)))}catch(n){throw Gt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ht(this.firestore,Ti(this._delegate,h9(...e)))}catch(n){throw Gt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ht(this.firestore,Ti(this._delegate,d9(...e)))}catch(n){throw Gt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ht(this.firestore,Ti(this._delegate,f9(...e)))}catch(n){throw Gt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ht(this.firestore,Ti(this._delegate,p9(...e)))}catch(n){throw Gt(n,"endAt()","Query.endAt()")}}isEqual(e){return yL(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=E9(this._delegate):(e==null?void 0:e.source)==="server"?n=I9(this._delegate):n=w9(this._delegate),n.then(r=>new vw(this.firestore,new hs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=UL(e),r=VL(e,i=>new vw(this.firestore,new hs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ML(this._delegate,n,r)}withConverter(e){return new Ht(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class $9{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Jc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vw{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ht(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new $9(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Jc(this._firestore,r))})}isEqual(e){return AL(this._delegate,e._delegate)}}class yl extends Ht{constructor(e,n){super(e,n);this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qn(this.firestore,e):null}doc(e){try{return e===void 0?new qn(this.firestore,Pp(this._delegate)):new qn(this.firestore,Pp(this._delegate,e))}catch(n){throw Gt(n,"doc()","CollectionReference.doc()")}}add(e){return S9(this._delegate,e).then(n=>new qn(this.firestore,n))}isEqual(e){return mL(this._delegate,e._delegate)}withConverter(e){return new yl(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function zs(t){return ne(t,_e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(...e){this._delegate=new cs(...e)}static documentId(){return new ET(nt.keyField().canonicalString())}isEqual(e){return e=S(e),e instanceof cs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this._delegate=e}static serverTimestamp(){const e=R9();return e._methodName="FieldValue.serverTimestamp",new Os(e)}static delete(){const e=A9();return e._methodName="FieldValue.delete",new Os(e)}static arrayUnion(...e){const n=N9(...e);return n._methodName="FieldValue.arrayUnion",new Os(n)}static arrayRemove(...e){const n=P9(...e);return n._methodName="FieldValue.arrayRemove",new Os(n)}static increment(e){const n=O9(e);return n._methodName="FieldValue.increment",new Os(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9={Firestore:LL,GeoPoint:Fm,Timestamp:st,Blob:Yc,Transaction:FL,WriteBatch:$L,DocumentReference:qn,DocumentSnapshot:Xc,Query:Ht,QueryDocumentSnapshot:Jc,QuerySnapshot:vw,CollectionReference:yl,FieldPath:ET,FieldValue:Os,setLogLevel:F9,CACHE_SIZE_UNLIMITED:BX};function V9(t,e){t.INTERNAL.registerComponent(new se("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},U9)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t){V9(t,(e,n)=>new LL(e,n,new L9)),t.registerVersion(x9,D9)}B9(pt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9="type.googleapis.com/google.protobuf.Int64Value",q9="type.googleapis.com/google.protobuf.UInt64Value";function BL(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function ww(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>ww(e));if(typeof t=="function"||typeof t=="object")return BL(t,e=>ww(e));throw new Error("Data cannot be encoded in JSON: "+t)}function xp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case j9:case q9:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>xp(e)):typeof t=="function"||typeof t=="object"?BL(t,e=>xp(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ua extends Me{constructor(e,n,r){super(`${jL}/${e}`,n||"");this.details=r}}function W9(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function z9(t,e){let n=W9(t),r=n,i;try{const s=e&&e.error;if(s){const o=s.status;if(typeof o=="string"){if(!a1[o])return new Ua("internal","internal");n=a1[o],r=o}const a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=xp(i))}}catch{}return n==="ok"?null:new Ua(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(!!this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),n=await this.getMessagingToken(),r=await this.getAppCheckToken();return{authToken:e,messagingToken:n,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="us-central1";function H9(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Ua("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class G9{constructor(e,n,r,i,s=l1,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new K9(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=l1}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Q9(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function Y9(t,e,n){return r=>J9(t,e,r,n||{})}async function X9(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}async function J9(t,e,n,r){const i=t._url(e);n=ww(n);const s={data:n},o={},a=await t.contextProvider.getContext();a.authToken&&(o.Authorization="Bearer "+a.authToken),a.messagingToken&&(o["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=a.appCheckToken);const l=r.timeout||7e4,u=H9(l),c=await Promise.race([X9(i,s,o,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!c)throw new Ua("cancelled","Firebase Functions instance was deleted.");const h=z9(c.status,c.json);if(h)throw h;if(!c.json)throw new Ua("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d=="undefined"&&(d=c.json.result),typeof d=="undefined")throw new Ua("internal","Response is missing data field.");return{data:xp(d)}}const u1="@firebase/functions",c1="0.7.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9="auth-internal",eJ="app-check-internal",tJ="messaging-internal";function nJ(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider(Z9),a=r.getProvider(tJ),l=r.getProvider(eJ);return new G9(s,o,a,l,i,t)};Le(new se(jL,n,"PUBLIC").setMultipleInstances(!0)),ce(u1,c1,e),ce(u1,c1,"esm2017")}function h1(t,e,n){Q9(S(t),e,n)}function rJ(t,e,n){return Y9(S(t),e,n)}nJ(fetch.bind(self));const iJ="@firebase/functions-compat",sJ="0.1.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n){this.app=e,this._delegate=n,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,n){return rJ(this._delegate,e,n)}useFunctionsEmulator(e){const n=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(n==null)throw new Me("functions","No origin provided to useFunctionsEmulator()");if(n[2]==null)throw new Me("functions","Port missing in origin provided to useFunctionsEmulator()");return h1(this._delegate,n[1],Number(n[2]))}useEmulator(e,n){return h1(this._delegate,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oJ="us-central1",aJ=(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("functions").getImmediate({identifier:e!=null?e:oJ});return new qL(n,r)};function lJ(){const t={Functions:qL};pt.INTERNAL.registerComponent(new se("functions-compat",aJ,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lJ();pt.registerVersion(iJ,sJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uJ="/firebase-messaging-sw.js",cJ="/firebase-cloud-messaging-push-scope",WL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hJ="https://fcmregistrations.googleapis.com/v1",zL="google.c.a.c_id",dJ="google.c.a.c_l",fJ="google.c.a.ts",pJ="google.c.a.e";var d1;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(d1||(d1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Zc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Zc||(Zc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gJ(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="fcm_token_details_db",mJ=5,f1="fcm_token_object_Store";async function yJ(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(r_))return null;let e=null;return(await Ih(r_,mJ,async r=>{var i;if(r.oldVersion<2||!r.objectStoreNames.contains(f1))return;const s=r.transaction.objectStore(f1),o=await s.index("fcmSenderId").get(t);if(await s.clear(),!!o){if(r.oldVersion===2){const a=o;if(!a.auth||!a.p256dh||!a.endpoint)return;e={token:a.fcmToken,createTime:(i=a.createTime)!==null&&i!==void 0?i:Date.now(),subscriptionOptions:{auth:a.auth,p256dh:a.p256dh,endpoint:a.endpoint,swScope:a.swScope,vapidKey:typeof a.vapidKey=="string"?a.vapidKey:Kr(a.vapidKey)}}}else if(r.oldVersion===3){const a=o;e={token:a.fcmToken,createTime:a.createTime,subscriptionOptions:{auth:Kr(a.auth),p256dh:Kr(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:Kr(a.vapidKey)}}}else if(r.oldVersion===4){const a=o;e={token:a.fcmToken,createTime:a.createTime,subscriptionOptions:{auth:Kr(a.auth),p256dh:Kr(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:Kr(a.vapidKey)}}}}})).close(),await Na(r_),await Na("fcm_vapid_details_db"),await Na("undefined"),_J(e)?e:null}function _J(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ="firebase-messaging-database",wJ=1,bo="firebase-messaging-store";let i_=null;function IT(){return i_||(i_=Ih(vJ,wJ,t=>{switch(t.oldVersion){case 0:t.createObjectStore(bo)}})),i_}async function KL(t){const e=ST(t),r=await(await IT()).transaction(bo).objectStore(bo).get(e);if(r)return r;{const i=await yJ(t.appConfig.senderId);if(i)return await TT(t,i),i}}async function TT(t,e){const n=ST(t),i=(await IT()).transaction(bo,"readwrite");return await i.objectStore(bo).put(e,n),await i.complete,e}async function EJ(t){const e=ST(t),r=(await IT()).transaction(bo,"readwrite");await r.objectStore(bo).delete(e),await r.complete}function ST({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IJ={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},sn=new an("messaging","Messaging",IJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TJ(t,e){const n=await CT(t),r=GL(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(bT(t.appConfig),i)).json()}catch(o){throw sn.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw sn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw sn.create("token-subscribe-no-token");return s.token}async function SJ(t,e){const n=await CT(t),r=GL(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${bT(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw sn.create("token-update-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw sn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw sn.create("token-update-no-token");return s.token}async function HL(t,e){const n=await CT(t),r={method:"DELETE",headers:n};try{const s=await(await fetch(`${bT(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw sn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw sn.create("token-unsubscribe-failed",{errorInfo:i})}}function bT({projectId:t}){return`${hJ}/projects/${t}/registrations`}async function CT({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function GL({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==WL&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ=7*24*60*60*1e3;async function CJ(t){const e=await AJ(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Kr(e.getKey("auth")),p256dh:Kr(e.getKey("p256dh"))},r=await KL(t.firebaseDependencies);if(r){if(RJ(r.subscriptionOptions,n))return Date.now()>=r.createTime+bJ?kJ(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await HL(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return p1(t.firebaseDependencies,n)}else return p1(t.firebaseDependencies,n)}async function QL(t){const e=await KL(t.firebaseDependencies);e&&(await HL(t.firebaseDependencies,e.token),await EJ(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function kJ(t,e){try{const n=await SJ(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await TT(t.firebaseDependencies,r),n}catch(n){throw await QL(t),n}}async function p1(t,e){const r={token:await TJ(t,e),createTime:Date.now(),subscriptionOptions:e};return await TT(t,r),r.token}async function AJ(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gJ(e)})}function RJ(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return NJ(e,t),PJ(e,t),OJ(e,t),e}function NJ(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}function PJ(t,e){!e.data||(t.data=e.data)}function OJ(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xJ(t){return typeof t=="object"&&!!t&&zL in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */YL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");YL("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function YL(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(t){if(!t||!t.options)throw s_("App Configuration Object");if(!t.name)throw s_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw s_(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function s_(t){return sn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=DJ(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t){try{t.swRegistration=await navigator.serviceWorker.register(uJ,{scope:cJ}),t.swRegistration.update().catch(()=>{})}catch(e){throw sn.create("failed-service-worker-registration",{browserErrorMessage:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LJ(t,e){if(!e&&!t.swRegistration&&await XL(t),!(!e&&!!t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw sn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FJ(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=WL)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(t,e){if(!navigator)throw sn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw sn.create("permission-blocked");return await FJ(t,e==null?void 0:e.vapidKey),await LJ(t,e==null?void 0:e.serviceWorkerRegistration),CJ(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $J(t,e,n){const r=UJ(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[zL],message_name:n[dJ],message_time:n[fJ],message_device_time:Math.floor(Date.now()/1e3)})}function UJ(t){switch(t){case Zc.NOTIFICATION_CLICKED:return"notification_open";case Zc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VJ(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Zc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(g1(n)):t.onMessageHandler.next(g1(n)));const r=n.data;xJ(r)&&r[pJ]==="1"&&await $J(t,n.messageType,r)}const m1="@firebase/messaging",y1="0.9.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ=t=>{const e=new MJ(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>VJ(e,n)),e},jJ=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>JL(e,r)}};function qJ(){Le(new se("messaging",BJ,"PUBLIC")),Le(new se("messaging-internal",jJ,"PRIVATE")),ce(m1,y1),ce(m1,y1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WJ(t){if(!navigator)throw sn.create("only-available-in-window");return t.swRegistration||await XL(t),QL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(t,e){if(!navigator)throw sn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}async function KJ(t,e){return t=S(t),JL(t,e)}function HJ(t){return t=S(t),WJ(t)}function GJ(t,e){return t=S(t),zJ(t,e)}qJ();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",QJ="https://fcmregistrations.googleapis.com/v1",eF="FCM_MSG",YJ="google.c.a.c_id",XJ=3,JJ=1;var Dp;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Dp||(Dp={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Mp;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Mp||(Mp={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ZJ(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="fcm_token_details_db",e7=5,_1="fcm_token_object_Store";async function t7(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(o_))return null;let e=null;return(await Ih(o_,e7,async r=>{var i;if(r.oldVersion<2||!r.objectStoreNames.contains(_1))return;const s=r.transaction.objectStore(_1),o=await s.index("fcmSenderId").get(t);if(await s.clear(),!!o){if(r.oldVersion===2){const a=o;if(!a.auth||!a.p256dh||!a.endpoint)return;e={token:a.fcmToken,createTime:(i=a.createTime)!==null&&i!==void 0?i:Date.now(),subscriptionOptions:{auth:a.auth,p256dh:a.p256dh,endpoint:a.endpoint,swScope:a.swScope,vapidKey:typeof a.vapidKey=="string"?a.vapidKey:Hr(a.vapidKey)}}}else if(r.oldVersion===3){const a=o;e={token:a.fcmToken,createTime:a.createTime,subscriptionOptions:{auth:Hr(a.auth),p256dh:Hr(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:Hr(a.vapidKey)}}}else if(r.oldVersion===4){const a=o;e={token:a.fcmToken,createTime:a.createTime,subscriptionOptions:{auth:Hr(a.auth),p256dh:Hr(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:Hr(a.vapidKey)}}}}})).close(),await Na(o_),await Na("fcm_vapid_details_db"),await Na("undefined"),n7(e)?e:null}function n7(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7="firebase-messaging-database",i7=1,Co="firebase-messaging-store";let a_=null;function kT(){return a_||(a_=Ih(r7,i7,t=>{switch(t.oldVersion){case 0:t.createObjectStore(Co)}})),a_}async function AT(t){const e=NT(t),r=await(await kT()).transaction(Co).objectStore(Co).get(e);if(r)return r;{const i=await t7(t.appConfig.senderId);if(i)return await RT(t,i),i}}async function RT(t,e){const n=NT(t),i=(await kT()).transaction(Co,"readwrite");return await i.objectStore(Co).put(e,n),await i.complete,e}async function s7(t){const e=NT(t),r=(await kT()).transaction(Co,"readwrite");await r.objectStore(Co).delete(e),await r.complete}function NT({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Or=new an("messaging","Messaging",o7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a7(t,e){const n=await OT(t),r=nF(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(PT(t.appConfig),i)).json()}catch(o){throw Or.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw Or.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Or.create("token-subscribe-no-token");return s.token}async function l7(t,e){const n=await OT(t),r=nF(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${PT(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Or.create("token-update-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw Or.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Or.create("token-update-no-token");return s.token}async function tF(t,e){const n=await OT(t),r={method:"DELETE",headers:n};try{const s=await(await fetch(`${PT(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw Or.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Or.create("token-unsubscribe-failed",{errorInfo:i})}}function PT({projectId:t}){return`${QJ}/projects/${t}/registrations`}async function OT({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function nF({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==ZL&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=7*24*60*60*1e3;async function c7(t){const e=await d7(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Hr(e.getKey("auth")),p256dh:Hr(e.getKey("p256dh"))},r=await AT(t.firebaseDependencies);if(r){if(f7(r.subscriptionOptions,n))return Date.now()>=r.createTime+u7?h7(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await tF(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return v1(t.firebaseDependencies,n)}else return v1(t.firebaseDependencies,n)}async function Ew(t){const e=await AT(t.firebaseDependencies);e&&(await tF(t.firebaseDependencies,e.token),await s7(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function h7(t,e){try{const n=await l7(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await RT(t.firebaseDependencies,r),n}catch(n){throw await Ew(t),n}}async function v1(t,e){const r={token:await a7(t,e),createTime:Date.now(),subscriptionOptions:e};return await RT(t,r),r.token}async function d7(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ZJ(e)})}function f7(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return g7(e,t),m7(e,t),y7(e,t),e}function g7(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}function m7(t,e){!e.data||(t.data=e.data)}function y7(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t){return typeof t=="object"&&!!t&&YJ in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rF("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");rF("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");async function w7(t,e){const n=E7(e,await t.firebaseDependencies.installations.getId());I7(t,n)}function E7(t,e){var n,r;const i={};return t.from&&(i.project_number=t.from),t.fcmMessageId&&(i.message_id=t.fcmMessageId),i.instance_id=e,t.notification?i.message_type=Dp.DISPLAY_NOTIFICATION.toString():i.message_type=Dp.DATA_MESSAGE.toString(),i.sdk_platform=XJ.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),t.collapse_key&&(i.collapse_key=t.collapse_key),i.event=JJ.toString(),((n=t.fcmOptions)===null||n===void 0?void 0:n.analytics_label)&&(i.analytics_label=(r=t.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function I7(t,e){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(e),t.logEvents.push(n)}function rF(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T7(t,e){var n,r;const{newSubscription:i}=t;if(!i){await Ew(e);return}const s=await AT(e.firebaseDependencies);await Ew(e),e.vapidKey=(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:ZL,await c7(e)}async function S7(t,e){const n=k7(t);if(!n)return;e.deliveryMetricsExportedToBigQueryEnabled&&await w7(e,n);const r=await iF();if(R7(r))return N7(r,n);if(n.notification&&await P7(C7(n)),!!e&&e.onBackgroundMessageHandler){const i=p7(n);typeof e.onBackgroundMessageHandler=="function"?e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function b7(t){var e,n;const r=(n=(e=t.notification)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n[eF];if(r){if(t.action)return}else return;t.stopImmediatePropagation(),t.notification.close();const i=O7(r);if(!i)return;const s=new URL(i,self.location.href),o=new URL(self.location.origin);if(s.host!==o.host)return;let a=await A7(s);if(a?a=await a.focus():(a=await self.clients.openWindow(i),await v7(3e3)),!!a)return r.messageType=Mp.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,a.postMessage(r)}function C7(t){const e=Object.assign({},t.notification);return e.data={[eF]:t},e}function k7({data:t}){if(!t)return null;try{return t.json()}catch{return null}}async function A7(t){const e=await iF();for(const n of e){const r=new URL(n.url,self.location.href);if(t.host===r.host)return n}return null}function R7(t){return t.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function N7(t,e){e.isFirebaseMessaging=!0,e.messageType=Mp.PUSH_RECEIVED;for(const n of t)n.postMessage(e)}function iF(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function P7(t){var e;const{actions:n}=t,{maxActions:r}=Notification;return n&&r&&n.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=t.title)!==null&&e!==void 0?e:"",t)}function O7(t){var e,n,r;const i=(n=(e=t.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&n!==void 0?n:(r=t.notification)===null||r===void 0?void 0:r.click_action;return i||(_7(t.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(t){if(!t||!t.options)throw l_("App Configuration Object");if(!t.name)throw l_("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw l_(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function l_(t){return Or.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=x7(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=t=>{const e=new D7(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",n=>{n.waitUntil(S7(n,e))}),self.addEventListener("pushsubscriptionchange",n=>{n.waitUntil(T7(n,e))}),self.addEventListener("notificationclick",n=>{n.waitUntil(b7(n))}),e};function L7(){Le(new se("messaging-sw",M7,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(t,e){if(self.document!==void 0)throw Or.create("only-available-in-sw");return t.onBackgroundMessageHandler=e,()=>{t.onBackgroundMessageHandler=null}}function $7(t,e){return t=S(t),F7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */L7();const U7="@firebase/messaging-compat",V7="0.1.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(){return self&&"ServiceWorkerGlobalScope"in self?q7():j7()}function j7(){return typeof window!="undefined"&&Nn()&&Cg()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function q7(){return Nn()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class w1{constructor(e,n){this.app=e,this._delegate=n,this.app=e,this._delegate=n}async getToken(e){return KJ(this._delegate,e)}async deleteToken(){return HJ(this._delegate)}onMessage(e){return GJ(this._delegate,e)}onBackgroundMessage(e){return $7(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7=t=>self&&"ServiceWorkerGlobalScope"in self?new w1(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging-sw").getImmediate()):new w1(t.getProvider("app-compat").getImmediate(),t.getProvider("messaging").getImmediate()),z7={isSupported:B7};function K7(){pt.INTERNAL.registerComponent(new se("messaging-compat",W7,"PUBLIC").setServiceProps(z7))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */K7();pt.registerVersion(U7,V7);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF="firebasestorage.googleapis.com",oF="storageBucket",H7=2*60*1e3,G7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe extends Me{constructor(e,n){super(u_(e),`Firebase Storage: ${n} (${u_(e)})`);this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oe.prototype)}_codeEquals(e){return u_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function u_(t){return"storage/"+t}function xT(){const t="An unknown error occurred, please check the error payload for server response.";return new Oe("unknown",t)}function Q7(t){return new Oe("object-not-found","Object '"+t+"' does not exist.")}function Y7(t){return new Oe("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function X7(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Oe("unauthenticated",t)}function J7(){return new Oe("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Z7(t){return new Oe("unauthorized","User does not have permission to access '"+t+"'.")}function eZ(){return new Oe("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function aF(){return new Oe("canceled","User canceled the upload/download.")}function tZ(t){return new Oe("invalid-url","Invalid URL '"+t+"'.")}function nZ(t){return new Oe("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function rZ(){return new Oe("no-default-bucket","No default bucket found. Did you set the '"+oF+"' property when initializing the app?")}function lF(){return new Oe("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function iZ(){return new Oe("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function sZ(){return new Oe("no-download-url","The given file does not have any download URLs.")}function Va(t){return new Oe("invalid-argument",t)}function uF(){return new Oe("app-deleted","The Firebase app was deleted.")}function cF(t){return new Oe("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xu(t,e){return new Oe("invalid-format","String does not match format '"+t+"': "+e)}function _u(t){throw new Oe("internal-error","Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Bt.makeFromUrl(e,n)}catch{return new Bt(e,"")}if(r.path==="")return r;throw nZ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),m={bucket:1,path:3},_=n===sF?"(?:storage.googleapis.com|storage.cloud.google.com)":n,p="([^?#]*)",g=new RegExp(`^https?://${_}/${i}/${p}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:f,indices:m,postModify:u},{regex:g,indices:{bucket:1,path:2},postModify:u}];for(let w=0;w<v.length;w++){const O=v[w],A=O.regex.exec(e);if(A){const $=A[O.indices.bucket];let U=A[O.indices.path];U||(U=""),r=new Bt($,U),O.postModify(r);break}}if(r==null)throw tZ(e);return r}}class oZ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...p){u||(u=!0,e.apply(null,p))}function h(p){i=setTimeout(()=>{i=null,t(f,l())},p)}function d(){s&&clearTimeout(s)}function f(p,...g){if(u){d();return}if(p){d(),c.call(null,p,...g);return}if(l()||o){d(),c.call(null,p,...g);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,h(v)}let m=!1;function _(p){m||(m=!0,d(),!u&&(i!==null?(p||(a=2),clearTimeout(i),h(0)):p||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function lZ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uZ(t){return t!==void 0}function cZ(t){return typeof t=="function"}function hZ(t){return typeof t=="object"&&!Array.isArray(t)}function qm(t){return typeof t=="string"||t instanceof String}function E1(t){return DT()&&t instanceof Blob}function DT(){return typeof Blob!="undefined"}function Iw(t,e,n,r){if(r<e)throw Va(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Va(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function hF(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Zs||(Zs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(e,n,r,i,s,o,a,l,u,c,h){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Fd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Zs.NO_ERROR,l=s.getStatus();if(!a||this.isRetryStatusCode_(l)){const c=s.getErrorCode()===Zs.ABORT;r(!1,new Fd(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Fd(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());uZ(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=xT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?uF():aF();o(l)}else{const l=eZ();o(l)}};this.canceled_?n(!1,new Fd(!1,null,!0)):this.backoffId_=aZ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lZ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=this.additionalRetryCodes_.indexOf(e)!==-1;return n||i||s}}class Fd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function fZ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pZ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function gZ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mZ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function yZ(t,e,n,r,i,s){const o=hF(t.urlParams),a=t.url+o,l=Object.assign({},t.headers);return gZ(l,e),fZ(l,n),pZ(l,s),mZ(l,r),new dZ(a,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Z(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function vZ(...t){const e=_Z();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(DT())return new Blob(t);throw new Oe("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function wZ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EZ(t){return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class c_{constructor(e,n){this.data=e,this.contentType=n||null}}function dF(t,e){switch(t){case Wn.RAW:return new c_(fF(e));case Wn.BASE64:case Wn.BASE64URL:return new c_(pF(t,e));case Wn.DATA_URL:return new c_(TZ(e),SZ(e))}throw xT()}function fF(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function IZ(t){let e;try{e=decodeURIComponent(t)}catch{throw Xu(Wn.DATA_URL,"Malformed data URL.")}return fF(e)}function pF(t,e){switch(t){case Wn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Xu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Xu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=EZ(e)}catch{throw Xu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class gF{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xu(Wn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=bZ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function TZ(t){const e=new gF(t);return e.base64?pF(Wn.BASE64,e.rest):IZ(e.rest)}function SZ(t){return new gF(t).contentType}function bZ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){let r=0,i="";E1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(E1(this.data_)){const r=this.data_,i=wZ(r,e,n);return i===null?null:new Yr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yr(r,!0)}}static getBlob(...e){if(DT()){const n=e.map(r=>r instanceof Yr?r.data_:r);return new Yr(vZ.apply(null,n))}else{const n=e.map(o=>qm(o)?dF(Wn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Yr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t){let e;try{e=JSON.parse(t)}catch{return null}return hZ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CZ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kZ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mF(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AZ(t,e){return e}class Kt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||AZ}}let $d=null;function RZ(t){return!qm(t)||t.length<2?t:mF(t)}function Wm(){if($d)return $d;const t=[];t.push(new Kt("bucket")),t.push(new Kt("generation")),t.push(new Kt("metageneration")),t.push(new Kt("name","fullPath",!0));function e(s,o){return RZ(o)}const n=new Kt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Kt("size");return i.xform=r,t.push(i),t.push(new Kt("timeCreated")),t.push(new Kt("updated")),t.push(new Kt("md5Hash",null,!0)),t.push(new Kt("cacheControl",null,!0)),t.push(new Kt("contentDisposition",null,!0)),t.push(new Kt("contentEncoding",null,!0)),t.push(new Kt("contentLanguage",null,!0)),t.push(new Kt("contentType",null,!0)),t.push(new Kt("metadata","customMetadata",!0)),$d=t,$d}function NZ(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Bt(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function PZ(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return NZ(r,t),r}function yF(t,e,n){const r=MT(e);return r===null?null:PZ(t,r,n)}function OZ(t,e,n,r){const i=MT(e);if(i===null||!qm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=t.bucket,h=t.fullPath,d="/b/"+o(c)+"/o/"+o(h),f=Is(d,n,r),m=hF({alt:"media",token:u});return f+m})[0]}function LT(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="prefixes",T1="items";function xZ(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[I1])for(const i of n[I1]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Bt(e,s));r.prefixes.push(o)}if(n[T1])for(const i of n[T1]){const s=t._makeStorageReference(new Bt(e,i.name));r.items.push(s)}return r}function DZ(t,e,n){const r=MT(n);return r===null?null:xZ(t,e,r)}class wi{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t){if(!t)throw xT()}function zm(t,e){function n(r,i){const s=yF(t,i,e);return xr(s!==null),s}return n}function MZ(t,e){function n(r,i){const s=DZ(t,e,i);return xr(s!==null),s}return n}function LZ(t,e){function n(r,i){const s=yF(t,i,e);return xr(s!==null),OZ(s,i,t.host,t._protocol)}return n}function Kl(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=J7():i=X7():n.getStatus()===402?i=Y7(t.bucket):n.getStatus()===403?i=Z7(t.path):i=r,i.serverResponse=r.serverResponse,i}return e}function Km(t){const e=Kl(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Q7(t.path)),s.serverResponse=i.serverResponse,s}return n}function _F(t,e,n){const r=e.fullServerUrl(),i=Is(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new wi(i,s,zm(t,n),o);return a.errorHandler=Km(e),a}function FZ(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Is(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,c=new wi(a,l,MZ(t,e.bucket),u);return c.urlParams=s,c.errorHandler=Kl(e),c}function $Z(t,e,n){const r=e.fullServerUrl(),i=Is(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new wi(i,s,LZ(t,n),o);return a.errorHandler=Km(e),a}function UZ(t,e,n,r){const i=e.fullServerUrl(),s=Is(i,t.host,t._protocol),o="PATCH",a=LT(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,c=new wi(s,o,zm(t,r),u);return c.headers=l,c.body=a,c.errorHandler=Km(e),c}function VZ(t,e){const n=e.fullServerUrl(),r=Is(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new wi(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Km(e),a}function BZ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function vF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=BZ(null,e)),r}function jZ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let w=0;w<2;w++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=vF(e,r,i),c=LT(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=Yr.getBlob(h,r,d);if(f===null)throw lF();const m={name:u.fullPath},_=Is(s,t.host,t._protocol),p="POST",g=t.maxUploadRetryTime,y=new wi(_,p,zm(t,n),g);return y.urlParams=m,y.headers=o,y.body=f.uploadData(),y.errorHandler=Kl(e),y}class Lp{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function FT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{xr(!1)}return xr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function qZ(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=vF(e,r,i),a={name:o.fullPath},l=Is(s,t.host,t._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=LT(o,n),d=t.maxUploadRetryTime;function f(_){FT(_);let p;try{p=_.getResponseHeader("X-Goog-Upload-URL")}catch{xr(!1)}return xr(qm(p)),p}const m=new wi(l,u,f,d);return m.urlParams=a,m.headers=c,m.body=h,m.errorHandler=Kl(e),m}function WZ(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const c=FT(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xr(!1)}h||xr(!1);const d=Number(h);return xr(!isNaN(d)),new Lp(d,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,l=new wi(n,o,s,a);return l.headers=i,l.errorHandler=Kl(e),l}const S1=256*1024;function zZ(t,e,n,r,i,s,o,a){const l=new Lp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw iZ();const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const h=l.current,d=h+c,m={"X-Goog-Upload-Command":c===u?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},_=r.slice(h,d);if(_===null)throw lF();function p(w,O){const A=FT(w,["active","final"]),$=l.current+c,U=r.size();let L;return A==="final"?L=zm(e,s)(w,O):L=null,new Lp($,U,A==="final",L)}const g="POST",y=e.maxUploadRetryTime,v=new wi(n,g,p,y);return v.headers=m,v.body=_.uploadData(),v.progressCallback=a||null,v.errorHandler=Kl(t),v}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KZ={STATE_CHANGED:"state_changed"},Qt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function h_(t){switch(t){case"running":case"pausing":case"canceling":return Qt.RUNNING;case"paused":return Qt.PAUSED;case"success":return Qt.SUCCESS;case"canceled":return Qt.CANCELED;case"error":return Qt.ERROR;default:return Qt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZ{constructor(e,n,r){if(cZ(e)||n!=null||r!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=r!=null?r:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class GZ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw _u("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _u("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _u("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _u("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _u("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class QZ extends GZ{initXhr(){this.xhr_.responseType="text"}}function wr(){return new QZ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Wm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=qZ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=WZ(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,wr,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=S1*this._chunkMultiplier,n=new Lp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=zZ(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,wr,i,s);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){S1*this._chunkMultiplier<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=_F(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,wr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=jZ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":this._state=e,this._request!==void 0&&this._request.cancel();break;case"pausing":this._state=e,this._request!==void 0&&this._request.cancel();break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=aF(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=h_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new HZ(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(h_(this._state)){case Qt.SUCCESS:sa(this._resolve.bind(null,this.snapshot))();break;case Qt.CANCELED:case Qt.ERROR:const n=this._reject;sa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(h_(this._state)){case Qt.RUNNING:case Qt.PAUSED:e.next&&sa(e.next.bind(e,this.snapshot))();break;case Qt.SUCCESS:e.complete&&sa(e.complete.bind(e))();break;case Qt.CANCELED:case Qt.ERROR:e.error&&sa(e.error.bind(e,this._error))();break;default:e.error&&sa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this._service=e,n instanceof Bt?this._location=n:this._location=Bt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ko(e,n)}get root(){const e=new Bt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mF(this._location.path)}get storage(){return this._service}get parent(){const e=CZ(this._location.path);if(e===null)return null;const n=new Bt(this._location.bucket,e);return new ko(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw cF(e)}}function YZ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new wF(t,new Yr(e),n)}function XZ(t){const e={prefixes:[],items:[]};return EF(t,e).then(()=>e)}async function EF(t,e,n){const i=await IF(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await EF(t,e,i.nextPageToken)}function IF(t,e){e!=null&&typeof e.maxResults=="number"&&Iw("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=FZ(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,wr)}function JZ(t){t._throwIfRoot("getMetadata");const e=_F(t.storage,t._location,Wm());return t.storage.makeRequestWithTokens(e,wr)}function ZZ(t,e){t._throwIfRoot("updateMetadata");const n=UZ(t.storage,t._location,e,Wm());return t.storage.makeRequestWithTokens(n,wr)}function eee(t){t._throwIfRoot("getDownloadURL");const e=$Z(t.storage,t._location,Wm());return t.storage.makeRequestWithTokens(e,wr).then(n=>{if(n===null)throw sZ();return n})}function tee(t){t._throwIfRoot("deleteObject");const e=VZ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,wr)}function TF(t,e){const n=kZ(t._location.path,e),r=new Bt(t._location.bucket,n);return new ko(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nee(t){return/^[A-Za-z]+:\/\//.test(t)}function ree(t,e){return new ko(t,e)}function SF(t,e){if(t instanceof $T){const n=t;if(n._bucket==null)throw rZ();const r=new ko(n,n._bucket);return e!=null?SF(r,e):r}else return e!==void 0?TF(t,e):t}function iee(t,e){if(e&&nee(e)){if(t instanceof $T)return ree(t,e);throw Va("To use ref(service, url), the first argument must be a Storage instance.")}else return SF(t,e)}function b1(t,e){const n=e==null?void 0:e[oF];return n==null?null:Bt.makeFromBucketSpec(n,t)}function see(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:FE(i,t.app.options.projectId))}class $T{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=sF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=H7,this._maxUploadRetryTime=G7,this._requests=new Set,i!=null?this._bucket=Bt.makeFromBucketSpec(i,this._host):this._bucket=b1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bt.makeFromBucketSpec(this._url,e):this._bucket=b1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Iw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Iw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ko(this,e)}_makeRequest(e,n,r,i){if(this._deleted)return new oZ(uF());{const s=yZ(e,this._appId,r,i,n,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const C1="@firebase/storage",k1="0.9.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oee="storage";function aee(t,e,n){return t=S(t),YZ(t,e,n)}function lee(t){return t=S(t),JZ(t)}function uee(t,e){return t=S(t),ZZ(t,e)}function cee(t,e){return t=S(t),IF(t,e)}function hee(t){return t=S(t),XZ(t)}function dee(t){return t=S(t),eee(t)}function fee(t){return t=S(t),tee(t)}function A1(t,e){return t=S(t),iee(t,e)}function pee(t,e){return TF(t,e)}function gee(t,e,n,r={}){see(t,e,n,r)}function mee(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $T(n,r,i,e,Wr)}function yee(){Le(new se(oee,mee,"PUBLIC").setMultipleInstances(!0)),ce(C1,k1,""),ce(C1,k1,"esm2017")}yee();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ud(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Ud(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Ud(o,this,this._ref)):s={next:n.next?o=>n.next(new Ud(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class N1{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new li(e,this._service))}get items(){return this._delegate.items.map(e=>new li(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=pee(this._delegate,e);return new li(n,this.storage)}get root(){return new li(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new li(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new R1(aee(this._delegate,e,n),this)}putString(e,n=Wn.RAW,r){this._throwIfRoot("putString");const i=dF(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new R1(new wF(this._delegate,new Yr(i.data,!0),s),this)}listAll(){return hee(this._delegate).then(e=>new N1(e,this.storage))}list(e){return cee(this._delegate,e||void 0).then(n=>new N1(n,this.storage))}getMetadata(){return lee(this._delegate)}updateMetadata(e){return uee(this._delegate,e)}getDownloadURL(){return dee(this._delegate)}delete(){return this._throwIfRoot("delete"),fee(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw cF(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(P1(e))throw Va("ref() expected a child path but got a URL, use refFromURL instead.");return new li(A1(this._delegate,e),this)}refFromURL(e){if(!P1(e))throw Va("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bt.makeFromUrl(e,this._delegate.host)}catch{throw Va("refFromUrl() expected a valid full URL but got an invalid one.")}return new li(A1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){gee(this._delegate,e,n,r)}}function P1(t){return/^[A-Za-z]+:\/\//.test(t)}const _ee="@firebase/storage-compat",vee="0.1.10";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wee="storage-compat";function Eee(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new bF(n,r)}function Iee(t){const e={TaskState:Qt,TaskEvent:KZ,StringFormat:Wn,Storage:bF,Reference:li};t.INTERNAL.registerComponent(new se(wee,Eee,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(_ee,vee)}Iee(pt);const O1="@firebase/performance",Tw="0.5.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=Tw,Tee="FB-PERF-TRACE-START",See="FB-PERF-TRACE-STOP",Sw="FB-PERF-TRACE-MEASURE",kF="_wt_",AF="_fp",RF="_fcp",NF="_fid",PF="@firebase/performance/config",OF="@firebase/performance/configexpire",bee="performance",xF="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cee={["trace started"]:"Trace {$traceName} was started before.",["trace stopped"]:"Trace {$traceName} is not running.",["nonpositive trace startTime"]:"Trace {$traceName} startTime should be positive.",["nonpositive trace duration"]:"Trace {$traceName} duration should be positive.",["no window"]:"Window is not available.",["no app id"]:"App id is not available.",["no project id"]:"Project id is not available.",["no api key"]:"Api key is not available.",["invalid cc log"]:"Attempted to queue invalid cc event",["FB not default"]:"Performance can only start when Firebase app instance is the default one.",["RC response not ok"]:"RC response is not ok",["invalid attribute name"]:"Attribute name {$attributeName} is invalid.",["invalid attribute value"]:"Attribute value {$attributeValue} is invalid.",["invalid custom metric name"]:"Custom metric name {$customMetricName} is invalid",["invalid String merger input"]:"Input for String merger is invalid, contact support team to resolve.",["already initialized"]:"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},Ft=new an(bee,xF,Cee);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new qr(xF);Vr.logLevel=G.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d_,DF;class at{constructor(e){if(this.window=e,!e)throw Ft.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Cg()?(Vr.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Nn()?!0:(Vr.info("IndexedDB is not supported by current browswer"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(const s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return d_===void 0&&(d_=new at(DF)),d_}}function kee(t){DF=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MF;function Aee(t){const e=t.getId();return e.then(n=>{MF=n}),e}function UT(){return MF}function Ree(t){const e=t.getToken();return e.then(n=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t,e){const n=t.length-e.length;if(n<0||n>1)throw Ft.create("invalid String merger input");const r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f_;class An{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=x1("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=x1("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return f_===void 0&&(f_=new An),f_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ba;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"})(Ba||(Ba={}));const Nee=["firebase_","google_","ga_"],Pee=new RegExp("^[a-zA-Z]\\w*$"),Oee=40,xee=100;function Dee(){const t=at.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function LF(){switch(at.getInstance().document.visibilityState){case"visible":return Ba.VISIBLE;case"hidden":return Ba.HIDDEN;default:return Ba.UNKNOWN}}function Mee(){const e=at.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Lee(t){return t.length===0||t.length>Oee?!1:!Nee.some(n=>t.startsWith(n))&&!!t.match(Pee)}function Fee(t){return t.length!==0&&t.length<=xee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw Ft.create("no app id");return n}function $ee(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw Ft.create("no project id");return n}function Uee(t){var e;const n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw Ft.create("no api key");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vee="0.0.1",Bee={loggingEnabled:!0},jee="FIREBASE_INSTALLATIONS_AUTH";function qee(t,e){const n=Wee();return n?(D1(n),Promise.resolve()):Hee(t,e).then(D1).then(r=>zee(r),()=>{})}function Wee(){const t=at.getInstance().localStorage;if(!t)return;const e=t.getItem(OF);if(!e||!Gee(e))return;const n=t.getItem(PF);if(!!n)try{return JSON.parse(n)}catch{return}}function zee(t){const e=at.getInstance().localStorage;!t||!e||(e.setItem(PF,JSON.stringify(t)),e.setItem(OF,String(Date.now()+An.getInstance().configTimeToLive*60*60*1e3)))}const Kee="Could not fetch config, will use default configs";function Hee(t,e){return Ree(t.installations).then(n=>{const r=$ee(t.app),i=Uee(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${jee} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:FF(t.app),app_version:CF,sdk_version:Vee})});return fetch(o).then(a=>{if(a.ok)return a.json();throw Ft.create("RC response not ok")})}).catch(()=>{Vr.info(Kee)})}function D1(t){if(!t)return t;const e=An.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=Bee.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=M1(e.tracesSamplingRate),e.logNetworkAfterSampling=M1(e.networkRequestsSamplingRate),t}function Gee(t){return Number(t)>Date.now()}function M1(t){return Math.random()<=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VT=1,p_;function $F(t){return VT=2,p_=p_||Yee(t),p_}function Qee(){return VT===3}function Yee(t){return Xee().then(()=>Aee(t.installations)).then(e=>qee(t,e)).then(()=>L1(),()=>L1())}function Xee(){const t=at.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){const n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function L1(){VT=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=10*1e3,Jee=5.5*1e3,UF=3,Zee=1e3;let Fp=UF,Gi=[],F1=!1;function ete(){F1||(Hm(Jee),F1=!0)}function Hm(t){setTimeout(()=>{if(Fp!==0){if(!Gi.length)return Hm(BT);tte()}},t)}function tte(){const t=Gi.splice(0,Zee),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:An.getInstance().logSource,log_event:e};nte(n,t).catch(()=>{Gi=[...t,...Gi],Fp--,Vr.info(`Tries left: ${Fp}.`),Hm(BT)})}function nte(t,e){return rte(t).then(n=>(n.ok||Vr.info("Call to Firebase backend failed."),n.json())).then(n=>{const r=Number(n.nextRequestWaitMillis);let i=BT;isNaN(r)||(i=Math.max(r,i));const s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(Gi=[...e,...Gi],Vr.info("Retry transport request later.")),Fp=UF,Hm(i)})}function rte(t){const e=An.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function ite(t){if(!t.eventTime||!t.message)throw Ft.create("invalid cc log");Gi=[...Gi,t]}function ste(t){return(...e)=>{const n=t(...e);ite({message:n,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g_;function VF(t,e){g_||(g_=ste(ate)),g_(t,e)}function Vd(t){const e=An.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||!at.getInstance().requiredApisAvailable()||t.isAuto&&LF()!==Ba.VISIBLE||(Qee()?m_(t):$F(t.performanceController).then(()=>m_(t),()=>m_(t)))}function m_(t){if(!UT())return;const e=An.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>VF(t,1),0)}function ote(t){const e=An.getInstance();if(!e.instrumentationEnabled)return;const n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>VF(t,0),0)}function ate(t,e){return e===0?lte(t):ute(t)}function lte(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:BF(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function ute(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);const n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);const r={application_info:BF(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function BF(t){return{google_app_id:FF(t),app_instance_id:UT(),web_app_info:{sdk_version:CF,page_url:at.getInstance().getUrl(),service_worker_status:Dee(),visibility_state:LF(),effective_connection_type:Mee()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cte=100,hte="_",dte=[AF,RF,NF];function fte(t,e){return t.length===0||t.length>cte?!1:e&&e.startsWith(kF)&&dte.indexOf(t)>-1||!t.startsWith(hte)}function pte(t){const e=Math.floor(t);return e<t&&Vr.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=at.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${Tee}-${this.randomId}-${this.name}`,this.traceStopMark=`${See}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Sw}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw Ft.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw Ft.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Vd(this)}record(e,n,r){if(e<=0)throw Ft.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw Ft.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Number(Math.floor(r.metrics[i])));Vd(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(fte(e,this.name))this.counters[e]=pte(n);else throw Ft.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){const r=Lee(e),i=Fee(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw Ft.create("invalid attribute name",{attributeName:e});if(!i)throw Ft.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i){const s=at.getInstance().getUrl();if(!s)return;const o=new Qi(e,kF+s,!0),a=Math.floor(at.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));const l="first-paint",u="first-contentful-paint";if(r){const c=r.find(d=>d.name===l);c&&c.startTime&&o.putMetric(AF,Math.floor(c.startTime*1e3));const h=r.find(d=>d.name===u);h&&h.startTime&&o.putMetric(RF,Math.floor(h.startTime*1e3)),i&&o.putMetric(NF,Math.floor(i*1e3))}Vd(o)}static createUserTimingTrace(e,n){const r=new Qi(e,n,!1,n);Vd(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e){const n=e;if(!n||n.responseStart===void 0)return;const r=at.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],l={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};ote(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gte=5e3;function U1(t){!UT()||(setTimeout(()=>yte(t),0),setTimeout(()=>mte(t),0),setTimeout(()=>_te(t),0))}function mte(t){const e=at.getInstance(),n=e.getEntriesByType("resource");for(const r of n)$1(t,r);e.setupObserver("resource",r=>$1(t,r))}function yte(t){const e=at.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{Qi.createOobTrace(t,n,r),i=void 0},gte);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),Qi.createOobTrace(t,n,r,s))})}else Qi.createOobTrace(t,n,r)}function _te(t){const e=at.getInstance(),n=e.getEntriesByType("measure");for(const r of n)V1(t,r);e.setupObserver("measure",r=>V1(t,r))}function V1(t,e){const n=e.name;n.substring(0,Sw.length)!==Sw&&Qi.createUserTimingTrace(t,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vte{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),at.getInstance().requiredApisAvailable()?bg().then(n=>{n&&(ete(),$F(this).then(()=>U1(this),()=>U1(this)),this.initialized=!0)}).catch(n=>{Vr.info(`Environment doesn't support IndexedDB: ${n}`)}):Vr.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){An.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return An.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){An.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return An.getInstance().dataCollectionEnabled}}const wte="[DEFAULT]";function Ete(t,e){return t=S(t),new Qi(t,e)}const Ite=(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==wte)throw Ft.create("FB not default");if(typeof window=="undefined")throw Ft.create("no window");kee(window);const i=new vte(n,r);return i._init(e),i};function Tte(){Le(new se("performance",Ite,"PUBLIC")),ce(O1,Tw),ce(O1,Tw,"esm2017")}Tte();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ste{constructor(e,n){this.app=e,this._delegate=n}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return Ete(this._delegate,e)}}const bte="@firebase/performance-compat",Cte="0.1.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kte(t){t.INTERNAL.registerComponent(new se("performance-compat",Ate,"PUBLIC")),t.registerVersion(bte,Cte)}function Ate(t){const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("performance").getImmediate();return new Ste(e,n)}kte(pt);const y_="@firebase/remote-config",B1="0.3.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rte{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nte="remote-config";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pte={["registration-window"]:"Undefined window object. This SDK only supports usage in a browser environment.",["registration-project-id"]:"Undefined project identifier. Check Firebase app initialization.",["registration-api-key"]:"Undefined API key. Check Firebase app initialization.",["registration-app-id"]:"Undefined app identifier. Check Firebase app initialization.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",["fetch-client-network"]:"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-timeout"]:'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',["fetch-throttle"]:'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',["fetch-client-parse"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["indexed-db-unavailable"]:"Indexed DB is not supported by current browser"},dn=new an("remoteconfig","Remote Config",Pte);function Ote(t,e){return t instanceof Me&&t.code.indexOf(e)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xte=!1,Dte="",j1=0,Mte=["1","true","t","yes","y","on"];class __{constructor(e,n=Dte){this._source=e,this._value=n}asString(){return this._value}asBoolean(){return this._source==="static"?xte:Mte.indexOf(this._value.toLowerCase())>=0}asNumber(){if(this._source==="static")return j1;let e=Number(this._value);return isNaN(e)&&(e=j1),e}getSource(){return this._source}}async function jF(t){const e=S(t),[n,r]=await Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()]);return!n||!n.config||!n.eTag||n.eTag===r?!1:(await Promise.all([e._storageCache.setActiveConfig(n.config),e._storage.setActiveConfigEtag(n.eTag)]),!0)}function qF(t){const e=S(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}async function WF(t){const e=S(t),n=new Rte;setTimeout(async()=>{n.abort()},e.settings.fetchTimeoutMillis);try{await e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:n}),await e._storageCache.setLastFetchStatus("success")}catch(r){const i=Ote(r,"fetch-throttle")?"throttle":"failure";throw await e._storageCache.setLastFetchStatus(i),r}}function Lte(t){const e=S(t);return Bte(e._storageCache.getActiveConfig(),e.defaultConfig).reduce((n,r)=>(n[r]=sd(t,r),n),{})}function Fte(t,e){return sd(S(t),e).asBoolean()}function $te(t,e){return sd(S(t),e).asNumber()}function Ute(t,e){return sd(S(t),e).asString()}function sd(t,e){const n=S(t);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${e}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const r=n._storageCache.getActiveConfig();return r&&r[e]!==void 0?new __("remote",r[e]):n.defaultConfig&&n.defaultConfig[e]!==void 0?new __("default",String(n.defaultConfig[e])):(n._logger.debug(`Returning static value for key "${e}". Define a default or remote value if this is unintentional.`),new __("static"))}function Vte(t,e){const n=S(t);switch(e){case"debug":n._logger.logLevel=G.DEBUG;break;case"silent":n._logger.logLevel=G.SILENT;break;default:n._logger.logLevel=G.ERROR}}function Bte(t={},e={}){return Object.keys(Object.assign(Object.assign({},t),e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jte{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}async fetch(e){const[n,r]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=await this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),await Promise.all(s),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qte(t=navigator){return t.languages&&t.languages[0]||t.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}async fetch(e){const[n,r]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:qte()},l={method:"POST",headers:o,body:JSON.stringify(a)},u=fetch(s,l),c=new Promise((p,g)=>{e.signal.addEventListener(()=>{const y=new Error("The operation was aborted.");y.name="AbortError",g(y)})});let h;try{await Promise.race([u,c]),h=await u}catch(p){let g="fetch-client-network";throw p.name==="AbortError"&&(g="fetch-timeout"),dn.create(g,{originalErrorMessage:p.message})}let d=h.status;const f=h.headers.get("ETag")||void 0;let m,_;if(h.status===200){let p;try{p=await h.json()}catch(g){throw dn.create("fetch-client-parse",{originalErrorMessage:g.message})}m=p.entries,_=p.state}if(_==="INSTANCE_STATE_UNSPECIFIED"?d=500:_==="NO_CHANGE"?d=304:(_==="NO_TEMPLATE"||_==="EMPTY_CONFIG")&&(m={}),d!==304&&d!==200)throw dn.create("fetch-status",{httpStatus:d});return{status:d,eTag:f,config:m}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zte(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Kte(t){if(!(t instanceof Me)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Hte{constructor(e,n){this.client=e,this.storage=n}async fetch(e){const n=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)}async attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){await zte(e.signal,n);try{const i=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),i}catch(i){if(!Kte(i))throw i;const s={throttleEndTimeMillis:Date.now()+Vf(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(s),this.attemptFetch(e,s)}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gte=60*1e3,Qte=12*60*60*1e3;class Yte{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Gte,minimumFetchIntervalMillis:Qte},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t,e){const n=t.target.error||void 0;return dn.create(e,{originalErrorMessage:n&&n.message})}const Rs="app_namespace_store",Xte="firebase_remote_config",Jte=1;function Zte(){return new Promise((t,e)=>{try{const n=indexedDB.open(Xte,Jte);n.onerror=r=>{e(df(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Rs,{keyPath:"compositeKey"})}}}catch(n){e(dn.create("storage-open",{originalErrorMessage:n}))}})}class ene{constructor(e,n,r,i=Zte()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const n=await this.openDbPromise;return new Promise((r,i)=>{const o=n.transaction([Rs],"readonly").objectStore(Rs),a=this.createCompositeKey(e);try{const l=o.get(a);l.onerror=u=>{i(df(u,"storage-get"))},l.onsuccess=u=>{const c=u.target.result;r(c?c.value:void 0)}}catch(l){i(dn.create("storage-get",{originalErrorMessage:l&&l.message}))}})}async set(e,n){const r=await this.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([Rs],"readwrite").objectStore(Rs),l=this.createCompositeKey(e);try{const u=a.put({compositeKey:l,value:n});u.onerror=c=>{s(df(c,"storage-set"))},u.onsuccess=()=>{i()}}catch(u){s(dn.create("storage-set",{originalErrorMessage:u&&u.message}))}})}async delete(e){const n=await this.openDbPromise;return new Promise((r,i)=>{const o=n.transaction([Rs],"readwrite").objectStore(Rs),a=this.createCompositeKey(e);try{const l=o.delete(a);l.onerror=u=>{i(df(u,"storage-delete"))},l.onsuccess=()=>{r()}}catch(l){i(dn.create("storage-delete",{originalErrorMessage:l&&l.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tne{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=await e;i&&(this.lastFetchStatus=i);const s=await n;s&&(this.lastSuccessfulFetchTimestampMillis=s);const o=await r;o&&(this.activeConfig=o)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nne(){Le(new se(Nte,t,"PUBLIC").setMultipleInstances(!0)),ce(y_,B1),ce(y_,B1,"esm2017");function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window=="undefined")throw dn.create("registration-window");if(!Nn())throw dn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw dn.create("registration-project-id");if(!o)throw dn.create("registration-api-key");if(!a)throw dn.create("registration-app-id");n=n||"firebase";const l=new ene(a,r.name,n),u=new tne(l),c=new qr(y_);c.logLevel=G.ERROR;const h=new Wte(i,Wr,n,s,o,a),d=new Hte(h,l),f=new jte(d,l,u,c),m=new Yte(r,f,u,l,c);return qF(m),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rne(t){return t=S(t),await WF(t),jF(t)}async function ine(){if(!Nn())return!1;try{return await bg()}catch{return!1}}nne();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sne{constructor(e,n){this.app=e,this._delegate=n}get defaultConfig(){return this._delegate.defaultConfig}set defaultConfig(e){this._delegate.defaultConfig=e}get fetchTimeMillis(){return this._delegate.fetchTimeMillis}get lastFetchStatus(){return this._delegate.lastFetchStatus}get settings(){return this._delegate.settings}set settings(e){this._delegate.settings=e}activate(){return jF(this._delegate)}ensureInitialized(){return qF(this._delegate)}fetch(){return WF(this._delegate)}fetchAndActivate(){return rne(this._delegate)}getAll(){return Lte(this._delegate)}getBoolean(e){return Fte(this._delegate,e)}getNumber(e){return $te(this._delegate,e)}getString(e){return Ute(this._delegate,e)}getValue(e){return sd(this._delegate,e)}setLogLevel(e){Vte(this._delegate,e)}}const one="@firebase/remote-config-compat",ane="0.1.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lne(t){t.INTERNAL.registerComponent(new se("remoteConfig-compat",une,"PUBLIC").setMultipleInstances(!0).setServiceProps({isSupported:ine})),t.registerVersion(one,ane)}function une(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("remote-config").getImmediate({identifier:e});return new sne(n,r)}lne(pt);var cne="firebase",hne="9.6.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pt.registerVersion(cne,hne,"app-compat");var dne="firebase",fne="9.6.7";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);pt.registerVersion(dne,fne,"compat");function sr(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ds(t){return!!t&&!!t[we]}function fs(t){return!!t&&(function(e){if(!e||typeof e!="object")return!1;var n=Object.getPrototypeOf(e);if(n===null)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===Ine}(t)||Array.isArray(t)||!!t[Q1]||!!t.constructor[Q1]||jT(t)||qT(t))}function Ao(t,e,n){n===void 0&&(n=!1),Hl(t)===0?(n?Object.keys:qa)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Hl(t){var e=t[we];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:jT(t)?2:qT(t)?3:0}function ja(t,e){return Hl(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function pne(t,e){return Hl(t)===2?t.get(e):t[e]}function zF(t,e,n){var r=Hl(t);r===2?t.set(e,n):r===3?(t.delete(e),t.add(n)):t[e]=n}function KF(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function jT(t){return wne&&t instanceof Map}function qT(t){return Ene&&t instanceof Set}function Ns(t){return t.o||t.t}function WT(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=GF(t);delete e[we];for(var n=qa(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function zT(t,e){return e===void 0&&(e=!1),KT(t)||ds(t)||!fs(t)||(Hl(t)>1&&(t.set=t.add=t.clear=t.delete=gne),Object.freeze(t),e&&Ao(t,function(n,r){return zT(r,!0)},!0)),t}function gne(){sr(2)}function KT(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function Dr(t){var e=Aw[t];return e||sr(18,t),e}function mne(t,e){Aw[t]||(Aw[t]=e)}function bw(){return eh}function v_(t,e){e&&(Dr("Patches"),t.u=[],t.s=[],t.v=e)}function $p(t){Cw(t),t.p.forEach(yne),t.p=null}function Cw(t){t===eh&&(eh=t.l)}function q1(t){return eh={p:[],l:eh,h:t,m:!0,_:0}}function yne(t){var e=t[we];e.i===0||e.i===1?e.j():e.O=!0}function w_(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.g||Dr("ES5").S(e,t,r),r?(n[we].P&&($p(e),sr(4)),fs(t)&&(t=Up(e,t),e.l||Vp(e,t)),e.u&&Dr("Patches").M(n[we].t,t,e.u,e.s)):t=Up(e,n,[]),$p(e),e.u&&e.v(e.u,e.s),t!==HF?t:void 0}function Up(t,e,n){if(KT(e))return e;var r=e[we];if(!r)return Ao(e,function(s,o){return W1(t,r,e,s,o,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Vp(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=WT(r.k):r.o;Ao(r.i===3?new Set(i):i,function(s,o){return W1(t,r,i,s,o,n)}),Vp(t,i,!1),n&&t.u&&Dr("Patches").R(r,n,t.u,t.s)}return r.o}function W1(t,e,n,r,i,s){if(ds(i)){var o=Up(t,i,s&&e&&e.i!==3&&!ja(e.D,r)?s.concat(r):void 0);if(zF(n,r,o),!ds(o))return;t.m=!1}if(fs(i)&&!KT(i)){if(!t.h.F&&t._<1)return;Up(t,i),e&&e.A.l||Vp(t,i)}}function Vp(t,e,n){n===void 0&&(n=!1),t.h.F&&t.m&&zT(e,n)}function E_(t,e){var n=t[we];return(n?Ns(n):t)[e]}function z1(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Ri(t){t.P||(t.P=!0,t.l&&Ri(t.l))}function I_(t){t.o||(t.o=WT(t.t))}function kw(t,e,n){var r=jT(e)?Dr("MapSet").N(e,n):qT(e)?Dr("MapSet").T(e,n):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:bw(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=th;o&&(l=[a],u=ku);var c=Proxy.revocable(l,u),h=c.revoke,d=c.proxy;return a.k=d,a.j=h,d}(e,n):Dr("ES5").J(e,n);return(n?n.A:bw()).p.push(r),r}function _ne(t){return ds(t)||sr(22,t),function e(n){if(!fs(n))return n;var r,i=n[we],s=Hl(n);if(i){if(!i.P&&(i.i<4||!Dr("ES5").K(i)))return i.t;i.I=!0,r=K1(n,s),i.I=!1}else r=K1(n,s);return Ao(r,function(o,a){i&&pne(i.t,o)===a||zF(r,o,e(a))}),s===3?new Set(r):r}(t)}function K1(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return WT(t)}function vne(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[we];return th.get(l,s)},set:function(l){var u=this[we];th.set(u,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][we];if(!a.P)switch(a.i){case 5:r(a)&&Ri(a);break;case 4:n(a)&&Ri(a)}}}function n(s){for(var o=s.t,a=s.k,l=qa(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==we){var h=o[c];if(h===void 0&&!ja(o,c))return!0;var d=a[c],f=d&&d[we];if(f?f.t!==h:!KF(d,h))return!0}}var m=!!o[we];return l.length!==qa(o).length+(m?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};mne("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(c,h){if(c){for(var d=Array(h.length),f=0;f<h.length;f++)Object.defineProperty(d,""+f,t(f,!0));return d}var m=GF(h);delete m[we];for(var _=qa(m),p=0;p<_.length;p++){var g=_[p];m[g]=t(g,c||!!m[g].enumerable)}return Object.create(Object.getPrototypeOf(h),m)}(a,s),u={i:a?5:4,A:o?o.A:bw(),P:!1,I:!1,D:{},l:o,t:s,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,we,{value:u,writable:!0}),l},S:function(s,o,a){a?ds(o)&&o[we].A===s&&e(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var c=u[we];if(c){var h=c.t,d=c.k,f=c.D,m=c.i;if(m===4)Ao(d,function(v){v!==we&&(h[v]!==void 0||ja(h,v)?f[v]||l(d[v]):(f[v]=!0,Ri(c)))}),Ao(h,function(v){d[v]!==void 0||ja(d,v)||(f[v]=!1,Ri(c))});else if(m===5){if(r(c)&&(Ri(c),f.length=!0),d.length<h.length)for(var _=d.length;_<h.length;_++)f[_]=!1;else for(var p=h.length;p<d.length;p++)f[p]=!0;for(var g=Math.min(d.length,h.length),y=0;y<g;y++)d.hasOwnProperty(y)||(f[y]=!0),f[y]===void 0&&l(d[y])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var H1,eh,HT=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",wne=typeof Map!="undefined",Ene=typeof Set!="undefined",G1=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",HF=HT?Symbol.for("immer-nothing"):((H1={})["immer-nothing"]=!0,H1),Q1=HT?Symbol.for("immer-draftable"):"__$immer_draftable",we=HT?Symbol.for("immer-state"):"__$immer_state",Ine=""+Object.prototype.constructor,qa=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,GF=Object.getOwnPropertyDescriptors||function(t){var e={};return qa(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Aw={},th={get:function(t,e){if(e===we)return t;var n=Ns(t);if(!ja(n,e))return function(i,s,o){var a,l=z1(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!fs(r)?r:r===E_(t.t,e)?(I_(t),t.o[e]=kw(t.A.h,r,t)):r},has:function(t,e){return e in Ns(t)},ownKeys:function(t){return Reflect.ownKeys(Ns(t))},set:function(t,e,n){var r=z1(Ns(t),e);if(r==null?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=E_(Ns(t),e),s=i==null?void 0:i[we];if(s&&s.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(KF(n,i)&&(n!==void 0||ja(t.t,e)))return!0;I_(t),Ri(t)}return t.o[e]===n&&typeof n!="number"&&(n!==void 0||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return E_(t.t,e)!==void 0||e in t.t?(t.D[e]=!1,I_(t),Ri(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Ns(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){sr(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){sr(12)}},ku={};Ao(th,function(t,e){ku[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),ku.deleteProperty=function(t,e){return ku.set.call(this,t,e,void 0)},ku.set=function(t,e,n){return th.set.call(this,t[0],e,n,t[0])};var Tne=function(){function t(n){var r=this;this.g=G1,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(_){var p=this;_===void 0&&(_=a);for(var g=arguments.length,y=Array(g>1?g-1:0),v=1;v<g;v++)y[v-1]=arguments[v];return l.produce(_,function(w){var O;return(O=s).call.apply(O,[p,w].concat(y))})}}var u;if(typeof s!="function"&&sr(6),o!==void 0&&typeof o!="function"&&sr(7),fs(i)){var c=q1(r),h=kw(r,i,void 0),d=!0;try{u=s(h),d=!1}finally{d?$p(c):Cw(c)}return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(_){return v_(c,o),w_(_,c)},function(_){throw $p(c),_}):(v_(c,o),w_(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===HF&&(u=void 0),r.F&&zT(u,!0),o){var f=[],m=[];Dr("Patches").M(i,u,f,m),o(f,m)}return u}sr(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,h=Array(c>1?c-1:0),d=1;d<c;d++)h[d-1]=arguments[d];return r.produceWithPatches(u,function(f){return i.apply(void 0,[f].concat(h))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){fs(n)||sr(8),ds(n)&&(n=_ne(n));var r=q1(this),i=kw(this,n,void 0);return i[we].C=!0,Cw(r),i},e.finishDraft=function(n,r){var i=n&&n[we],s=i.A;return v_(s,r),w_(void 0,s)},e.setAutoFreeze=function(n){this.F=n},e.setUseProxies=function(n){n&&!G1&&sr(20),this.g=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Dr("Patches").$;return ds(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),xn=new Tne,Sne=xn.produce;xn.produceWithPatches.bind(xn);xn.setAutoFreeze.bind(xn);xn.setUseProxies.bind(xn);xn.applyPatches.bind(xn);xn.createDraft.bind(xn);xn.finishDraft.bind(xn);var ff=Sne;function bne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y1(Object(n),!0).forEach(function(r){bne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var J1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),T_=function(){return Math.random().toString(36).substring(7).split("").join(".")},Bp={INIT:"@@redux/INIT"+T_(),REPLACE:"@@redux/REPLACE"+T_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+T_()}};function Cne(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function QF(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof e=="function"&&typeof n=="undefined"&&(n=e,e=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(Mt(1));return n(QF)(t,e)}if(typeof t!="function")throw new Error(Mt(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(Mt(3));return s}function h(_){if(typeof _!="function")throw new Error(Mt(4));if(l)throw new Error(Mt(5));var p=!0;return u(),a.push(_),function(){if(!!p){if(l)throw new Error(Mt(6));p=!1,u();var y=a.indexOf(_);a.splice(y,1),o=null}}}function d(_){if(!Cne(_))throw new Error(Mt(7));if(typeof _.type=="undefined")throw new Error(Mt(8));if(l)throw new Error(Mt(9));try{l=!0,s=i(s,_)}finally{l=!1}for(var p=o=a,g=0;g<p.length;g++){var y=p[g];y()}return _}function f(_){if(typeof _!="function")throw new Error(Mt(10));i=_,d({type:Bp.REPLACE})}function m(){var _,p=h;return _={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Mt(11));function v(){y.next&&y.next(c())}v();var w=p(v);return{unsubscribe:w}}},_[J1]=function(){return this},_}return d({type:Bp.INIT}),r={dispatch:d,subscribe:h,getState:c,replaceReducer:f},r[J1]=m,r}function kne(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Bp.INIT});if(typeof r=="undefined")throw new Error(Mt(12));if(typeof n(void 0,{type:Bp.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Mt(13))})}function Ane(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{kne(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,h={},d=0;d<s.length;d++){var f=s[d],m=n[f],_=l[f],p=m(_,u);if(typeof p=="undefined")throw u&&u.type,new Error(Mt(14));h[f]=p,c=c||p!==_}return c=c||s.length!==Object.keys(l).length,c?h:l}}function jp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Rne(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Mt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=jp.apply(void 0,a)(i.dispatch),X1(X1({},i),{},{dispatch:s})}}}function YF(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var XF=YF();XF.withExtraArgument=YF;var Z1=XF,Nne=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();globalThis&&globalThis.__generator;var qp=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},Pne=Object.defineProperty,eA=Object.getOwnPropertySymbols,One=Object.prototype.hasOwnProperty,xne=Object.prototype.propertyIsEnumerable,tA=function(t,e,n){return e in t?Pne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},nh=function(t,e){for(var n in e||(e={}))One.call(e,n)&&tA(t,n,e[n]);if(eA)for(var r=0,i=eA(e);r<i.length;r++){var n=i[r];xne.call(e,n)&&tA(t,n,e[n])}return t},Dne=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jp:jp.apply(null,arguments)};function Mne(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var Lne=function(t){Nne(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,qp([void 0],n[0].concat(this)))):new(e.bind.apply(e,qp([void 0],n.concat(this))))},e}(Array);function Fne(t){return typeof t=="boolean"}function $ne(){return function(e){return Une(e)}}function Une(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new Lne;return n&&(Fne(n)?r.push(Z1):r.push(Z1.withExtraArgument(n.extraArgument))),r}var Vne=!0;function Zne(t){var e=$ne(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,h=n.enhancers,d=h===void 0?void 0:h,f;if(typeof i=="function")f=i;else if(Mne(i))f=Ane(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=o;typeof m=="function"&&(m=m(e));var _=Rne.apply(void 0,m),p=jp;l&&(p=Dne(nh({trace:!Vne},typeof l=="object"&&l)));var g=[_];Array.isArray(d)?g=qp([_],d):typeof d=="function"&&(g=d(g));var y=p.apply(void 0,g);return QF(f,c,y)}function nA(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return nh(nh({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function JF(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function Bne(t){return typeof t=="function"}function jne(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?JF(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(Bne(t))l=function(){return ff(t(),function(){})};else{var u=ff(t,function(){});l=function(){return u}}function c(h,d){h===void 0&&(h=l());var f=qp([s[d.type]],o.filter(function(m){var _=m.matcher;return _(d)}).map(function(m){var _=m.reducer;return _}));return f.filter(function(m){return!!m}).length===0&&(f=[a]),f.reduce(function(m,_){if(_)if(ds(m)){var p=m,g=_(p,d);return typeof g=="undefined"?m:g}else{if(fs(m))return ff(m,function(y){return _(y,d)});var g=_(m,d);if(typeof g=="undefined"){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}return m},h)}return c.getInitialState=l,c}function qne(t,e){return t+"/"+e}function ere(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n=typeof t.initialState=="function"?t.initialState:ff(t.initialState,function(){}),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var h=r[c],d=qne(e,c),f,m;"reducer"in h?(f=h.reducer,m=h.prepare):f=h,s[c]=f,o[d]=f,a[c]=m?nA(d,m):nA(d)});function l(){var c=typeof t.extraReducers=="function"?JF(t.extraReducers):[t.extraReducers],h=c[0],d=h===void 0?{}:h,f=c[1],m=f===void 0?[]:f,_=c[2],p=_===void 0?void 0:_,g=nh(nh({},d),o);return jne(n,g,m,p)}var u;return{name:e,reducer:function(c,h){return u||(u=l()),u(c,h)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}vne();export{Yne as B,zne as P,yA as R,Jne as a,Gne as b,Xne as c,xV as d,ere as e,pt as f,Hne as g,Kne as h,Zne as i,Wne as j,H as r,Qne as u};
